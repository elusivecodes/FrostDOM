"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e:Object.assign(void 0,e(void 0))}(0,function(t){if(!t)throw new Error("FrostDOM requires a Window.");if(!("Core"in t))throw new Error("FrostDOM requires FrostCore.");if(!t.Core.isWindow(t))throw new Error("FrostDOM requires a valid Window object.");var e=t.Core,n=t.document,r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;_classCallCheck(this,t),this.context=e,this.animating=!1,this.animations=new Map,this.queues=new WeakMap,this.nodeData=new WeakMap,this.nodeEvents=new WeakMap,this.nodeStyles=new WeakMap}return _createClass(t,[{key:"exec",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.context.execCommand(t,!1,e)}}]),t}();return Object.assign(r.prototype,{animate:function(t,e,n){var i=this;n=_objectSpread({},r.animationDefaults,n);var o=this._nodeFilter(t).map(function(t){return i._animate(t,e,n)});return this._start(),Promise.all(o)},stop:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._nodeFilter(t).forEach(function(t){return e._stop(t,n)})},_animate:function(t,n,r){var i=this;this.animations.has(t)||this.animations.set(t,[]);var o=performance.now();return new Promise(function(s,a){i.animations.get(t).push(function(){var i,u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u&&!c?(a(t),!0):(c?i=1:(i=(performance.now()-o)/r.duration,r.infinite?i%=1:i=e.clamp(i),"ease-in"===r.type?i=Math.pow(i,2):"ease-out"===r.type?i=Math.sqrt(i):"ease-in-out"===r.type&&(i=i<=.5?2*Math.pow(i,2):1-2*Math.pow(1-i,2))),n(t,i,r),1===i?(s(t),!0):void 0)})})},_animationFrame:function(){var e=this;this.animations.forEach(function(t,n){(t=t.filter(function(t){return!t()})).length?e.animations.set(n,t):e.animations.delete(n)}),this.animations.size?t.requestAnimationFrame(function(t){return e._animationFrame()}):this.animating=!1},_start:function(){this.animating||(this.animating=!0,this._animationFrame())},_stop:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.animations.has(t)&&(this.animations.get(t).forEach(function(t){return t(!0,e)}),this.animations.delete(t))}}),Object.assign(r.prototype,{dropIn:function(t,e){return this.slideIn(t,_objectSpread({direction:"top"},e))},dropOut:function(t,e){return this.slideOut(t,_objectSpread({direction:"top"},e))},fadeIn:function(t,e){return this.animate(t,function(t,e){return r._setStyle(t,{opacity:e<1?e:""})},e)},fadeOut:function(t,e){return this.animate(t,function(t,e){return r._setStyle(t,{opacity:e<1?1-e:""})},e)},rotateIn:function(t,e){return this.animate(t,function(t,e,n){return r._setStyle(t,{transform:e<1?"rotate3d(".concat(n.x,", ").concat(n.y,", 0, ").concat((90-90*e)*(n.inverse?-1:1),"deg)"):""})},_objectSpread({x:0,y:1},e))},rotateOut:function(t,e){return this.animate(t,function(t,e,n){return r._setStyle(t,{transform:e<1?"rotate3d(".concat(n.x,", ").concat(n.y,", 0, ").concat(90*e*(n.inverse?-1:1),"deg)"):""})},_objectSpread({x:0,y:1},e))},slideIn:function(t,n){var i=this;return this.animate(t,function(t,n,o){var s;if(n<1){var a,u,c,l=e.isFunction(o.direction)?o.direction():o.direction;"top"===l||"bottom"===l?(a="Y",u=i._height(t),c="top"===l):(a="X",u=i._width(t),c="left"===l),s="translate".concat(a,"(").concat(Math.round(u-u*n)*(c?-1:1),"px)")}else s="";r._setStyle(t,{transform:s})},_objectSpread({direction:"bottom"},n))},slideOut:function(t,n){var i=this;return this.animate(t,function(t,n,o){var s;if(n<1){var a,u,c,l=e.isFunction(o.direction)?o.direction():o.direction;"top"===l||"bottom"===l?(a="Y",u=i._height(t),c="top"===l):(a="X",u=i._width(t),c="left"===l),s="translate".concat(a,"(").concat(Math.round(u*n)*(c?-1:1),"px)")}else s="";r._setStyle(t,{transform:s})},_objectSpread({direction:"bottom"},n))},squeezeIn:function(t,e){var n=this;return e=_objectSpread({direction:"bottom"},e),Promise.all(this._nodeFilter(t).map(function(t){return n._squeezeIn(t,e)}))},squeezeOut:function(t,e){var n=this;return e=_objectSpread({direction:"bottom"},e),Promise.all(this._nodeFilter(t).map(function(t){return n._squeezeOut(t,e)}))},_squeezeIn:function(t,n){var i=this,o=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(t,o);var s=r._parent(t).shift();return this.animate(t,function(t,n,o){if(1===n)return r._before(s,r._children(s,!1,!1,!1)),void i._remove(s);var a,u,c=e.isFunction(o.direction)?o.direction():o.direction;"top"===c||"bottom"===c?(a="height","top"===c&&(u="Y")):"left"!==c&&"right"!==c||(a="width","left"===c&&(u="X"));var l=Math.round(i["_".concat(a)](t)),f=Math.round(l*n),h=_defineProperty({},a,f+"px");u&&(h.transform="translate".concat(u,"(").concat(l-f,"px)")),r._setStyle(s,h)},n)},_squeezeOut:function(t,n){var i=this,o=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(t,o);var s=r._parent(t).shift();return this.animate(t,function(t,n,o){if(1===n)return r._before(s,r._children(s,!1,!1,!1)),void i._remove(s);var a,u,c=e.isFunction(o.direction)?o.direction():o.direction;"top"===c||"bottom"===c?(a="height","top"===c&&(u="Y")):"left"!==c&&"right"!==c||(a="width","left"===c&&(u="X"));var l=Math.round(i["_".concat(a)](t)),f=Math.round(l-l*n),h=_defineProperty({},a,f+"px");u&&(h.transform="translate".concat(u,"(").concat(l-f,"px)")),r._setStyle(s,h)},n)}}),Object.assign(r.prototype,{queue:function(t,e){var n=this;this._nodeFilter(t).forEach(function(t){return n._queue(t,e)})},clearQueue:function(t){var e=this;this._nodeFilter(t).forEach(function(t){return e._clearQueue(t)})},_clearQueue:function(t){this.queues.has(t)&&this.queues.delete(t)},_dequeueNode:function(t){var e=this;if(this.queues.has(t)){var n=this.queues.get(t).shift();n?Promise.resolve(n(t)).finally(function(n){return e._dequeueNode(t)}):this.queues.delete(t)}},_queue:function(t,e){var n,r=!this.queues.has(t);r?(n=[],this.queues.set(t,n)):n=this.queues.get(t),n.push(e),r&&this._dequeueNode(t)}}),Object.assign(r.prototype,{getAttribute:function(t,e){var n=this._nodeFind(t);if(n)return r._getAttribute(n,e)},getDataset:function(t,e){var n=this._nodeFind(t);if(n)return r._getDataset(n,e)},getHTML:function(t){return this.getProperty(t,"innerHTML")},getProperty:function(t,e){var n=this._nodeFind(t);if(n)return r._getProperty(n,e)},getText:function(t){return this.getProperty(t,"innerText")},getValue:function(t){return this.getProperty(t,"value")},removeAttribute:function(t,e){this._nodeFilter(t).forEach(function(t){return r._removeAttribute(t,e)})},removeProperty:function(t,e){this._nodeFilter(t).forEach(function(t){return r._removeProperty(t,e)})},setAttribute:function(t,e,n){var i=r._parseData(e,n);this._nodeFilter(t).forEach(function(t){return r._setAttribute(t,i)})},setDataset:function(t,e,n){var i=r._parseData(e,n);this._nodeFilter(t).forEach(function(t){return r._setDataset(t,i)})},setHTML:function(t,e){this.empty(t),this.setProperty(t,"innerHTML",e)},setProperty:function(t,e,n){var i=r._parseData(e,n);this._nodeFilter(t).forEach(function(t){return r._setProperty(t,i)})},setText:function(t,e){this.empty(t),this.setProperty(t,"innerText",e)},setValue:function(t,e){this.setProperty(t,"value",e)}}),Object.assign(r.prototype,{cloneData:function(t,n){var i=this;this._nodeFilter(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return i._cloneData(t,n)})},getData:function(t,n){var i=this._nodeFind(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)});if(i)return this._getData(i,n)},removeData:function(t,n){var i=this;this._nodeFilter(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return i._removeData(t,n)})},setData:function(t,n,i){var o=this,s=r._parseData(n,i);this._nodeFilter(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return o._setData(t,s)})},_cloneData:function(t,e){this.nodeData.has(t)&&this.setData(e,_objectSpread({},this.nodeData.get(t)))},_getData:function(t,e){if(this.nodeData.has(t))return e?this.nodeData.get(t)[e]:this.nodeData.get(t)},_removeData:function(t,e){if(this.nodeData.has(t)){if(e){var n=this.nodeData.get(t);if(delete n[e],Object.keys(n).length)return}this.nodeData.delete(t)}},_setData:function(t,e){this.nodeData.has(t)||this.nodeData.set(t,{}),Object.assign(this.nodeData.get(t),e)}}),Object.assign(r.prototype,{center:function(t,e){var n=this.rect(t,e);if(n)return{x:n.left+n.width/2,y:n.top+n.height/2}},constrain:function(t,e){var n=this,r=this.rect(e);r&&this._nodeFilter(t).forEach(function(t){return n._constrain(t,r)})},distTo:function(t,n,r,i){var o=this.center(t,i);if(o)return e.dist(o.x,o.y,n,r)},distToNode:function(t,e){var n=this.center(e);if(n)return this.distTo(t,n.x,n.y)},nearestTo:function(t,e,n,r){var i=this,o=null,s=Number.MAX_VALUE;return this._nodeFilter(t).forEach(function(t){var a=i.distTo(t,e,n,r);a&&a<s&&(s=a,o=t)}),o},nearestToNode:function(t,e){var n=this.center(e);if(n)return this.nearestTo(t,n.x,n.y)},percentX:function(t,n,r){var i=this.rect(t,r);if(i)return e.clampPercent((n-i.left)/i.width*100)},percentY:function(t,n,r){var i=this.rect(t,r);if(i)return e.clampPercent((n-i.top)/i.height*100)},position:function(t,e){var n=this._nodeFind(t);if(n)return this._position(n,e)},rect:function(t,e){var n=this._nodeFind(t);if(n)return this._rect(n,e)},_constrain:function(t,e){var n=this._rect(t);n.height>e.height&&r._setStyle(t,{height:e.height}),n.width>e.width&&r._setStyle(t,{width:e.width}),n.top<e.top&&r._setStyle(t,{top:e.top}),n.right>e.right&&r._setStyle(t,{right:e.right-n.width}),n.bottom>e.bottom&&r._setStyle(t,{top:e.bottom-n.height}),n.left<e.left&&r._setStyle(t,{left:e.left})},_position:function(t,e){return this.forceShow(t,function(t){var n={x:t.offsetLeft,y:t.offsetTop};if(e)for(var r=t;r=r.offsetParent;)n.x+=r.offsetLeft,n.y+=r.offsetTop;return n})},_rect:function(e,n){return this.forceShow(e,function(e){var i=e.getBoundingClientRect();return n&&(i.x+=r._getScrollX(t),i.y+=r._getScrollY(t)),i})}}),Object.assign(r.prototype,{getScrollX:function(t){var n=this._nodeFind(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)});if(n)return r._getScrollX(n)},getScrollY:function(t){var n=this._nodeFind(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)});if(n)return r._getScrollY(n)},setScroll:function(t,n,i){this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return r._setScroll(t,n,i)})},setScrollX:function(t,n){this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return r._setScrollX(t,n)})},setScrollY:function(t,n){this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return r._setScrollY(t,n)})}}),Object.assign(r.prototype,{height:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this._nodeFind(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)});if(s)return this._height(s,n,i,o)},width:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this._nodeFind(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)});if(s)return this._width(s,n,i,o)},_height:function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return e.isWindow(t)?i?t.outerHeight:t.innerHeight:(r.isDocument(t)&&(t=t.documentElement),this.forceShow(t,function(t){var e=t.clientHeight;return i||(e-=parseInt(n._css(t,"padding-top"))+parseInt(n._css(t,"padding-bottom"))),o&&(e+=parseInt(n._css(t,"border-top-width"))+parseInt(n._css(t,"border-bottom-width"))),s&&(e+=parseInt(n._css(t,"margin-top"))+parseInt(n._css(t,"margin-bottom"))),e}))},_width:function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return e.isWindow(t)?i?t.outerWidth:t.innerWidth:(r.isDocument(t)&&(t=t.documentElement),this.forceShow(t,function(t){var e=t.clientWidth;return i||(e-=parseInt(n._css(t,"padding-left"))+parseInt(n._css(t,"padding-right"))),o&&(e+=parseInt(n._css(t,"border-left-width"))+parseInt(n._css(t,"border-right-width"))),s&&(e+=parseInt(n._css(t,"margin-left"))+parseInt(n._css(t,"margin-right"))),e}))}}),Object.assign(r.prototype,{addClass:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(n=r._parseClasses(n)).length&&this._nodeFilter(t).forEach(function(t){return r._addClass(t,n)})},removeClass:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(n=r._parseClasses(n)).length&&this._nodeFilter(t).forEach(function(t){return r._removeClass(t,n)})},toggleClass:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(n=r._parseClasses(n)).length&&this._nodeFilter(t).forEach(function(t){return r._toggleClass(t,n)})},getStyle:function(t,n){n=e.snakeCase(n);var i=this._nodeFind(t);if(i)return r._getStyle(i,n)},setStyle:function(t,n,i,o){var s=r._parseData(n,i),a={};Object.keys(s).forEach(function(t){var n=""+s[t];t=e.snakeCase(t),n&&e.isNumeric(n)&&!r.cssNumberProperties.includes(t)&&(n+="px"),a[t]=n}),this._nodeFilter(t).forEach(function(t){return r._setStyle(t,a,o)})},css:function(t,e){var n=this._nodeFind(t);if(n)return this._css(n,e)},hide:function(t){this.setStyle(t,"display","none")},show:function(t){this.setStyle(t,"display","")},toggle:function(t){this._nodeFilter(t).forEach(function(t){return r._toggle(t)})},_css:function(e,n){return this.nodeStyles.has(e)||this.nodeStyles.set(e,t.getComputedStyle(e)),this.nodeStyles.get(e).getPropertyValue(n)}}),Object.assign(r.prototype,{blur:function(t){var e=this._nodeFind(t);e&&r._blur(e)},click:function(t){var e=this._nodeFind(t);e&&r._click(e)},focus:function(t){var e=this._nodeFind(t);e&&r._focus(e)},ready:function(e){if("complete"===this.context.readyState)return e();this.addEvent(t,"DOMContentLoaded",e)}}),Object.assign(r.prototype,{addEvent:function(t,n,i,o,s){var a=this;this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return a._addEvent(t,n,i,o,s)})},addEventDelegate:function(t,e,n,r){return this.addEvent(t,e,r,n)},addEventDelegateOnce:function(t,e,n,r){return this.addEvent(t,e,r,n,!0)},addEventOnce:function(t,e,n){return this.addEvent(t,e,n,null,!0)},cloneEvents:function(t,n){var i=this;this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return i._cloneEvents(t,n)})},removeEvent:function(t,n,i,o){var s=this;this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return s._removeEvent(t,n,i,o)})},removeEventDelegate:function(t,e,n,r){return this.removeEvent(t,e,r,n)},triggerEvent:function(t,n,i){var o=this;this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).forEach(function(t){return o._triggerEvent(t,n,i)})},_addEvent:function(t,e,n,i,o){var s=n;o&&(s=this._selfDestructFactory(t,e,i,s)),i&&(s=this._delegateFactory(t,i,s)),this.nodeEvents.has(t)||this.nodeEvents.set(t,{});var a=this.nodeEvents.get(t),u={delegate:i,callback:n,realCallback:s,selfDestruct:o};r._parseEvents(e).forEach(function(e){var n=r._parseEvent(e);if(u.event=e,u.realEvent=n,a[n]){if(a[n].includes(u))return}else a[n]=[];t.addEventListener(n,s),a[n].push(u)})},_cloneEvents:function(t,e){var n=this;if(this.nodeEvents.has(t)){var i=this.nodeEvents.get(t);Object.keys(i).forEach(function(t){var o=r._parseEvent(t);i[o].forEach(function(t){n.addEvent(e,t.event,t.callback,t.delegate,t.selfDestruct)})})}},_removeEvent:function(t,e,n,i){if(this.nodeEvents.has(t)){var o=this.nodeEvents.get(t);(e?r._parseEvents(e):Object.keys(o)).forEach(function(e){var s=r._parseEvent(e);o[s]&&(o[s]=o[s].filter(function(r){return!!(s===e&&s!==r.realEvent||s!==e&&e!==r.event||i&&(i!==r.delegate||n&&n!==r.callback)||!i&&n&&n!==r.realCallback)||(t.removeEventListener(r.realEvent,r.realCallback),!1)}),o[s].length||delete o[s])}),Object.keys(o).length||this.nodeEvents.delete(t)}},_triggerEvent:function(t,e,n){r._parseEvents(e).forEach(function(e){var i=r._parseEvent(e),o=new Event(i);n&&Object.assign(o,n),t.dispatchEvent(o)})}}),Object.assign(r.prototype,{create:function(t,e){var n=this.context.createElement(t);return e?(e.html?this.setHTML(n,e.html):e.text&&this.setText(n,e.text),e.class&&this.addClass(n,e.class),e.style&&this.setStyle(n,e.style),e.value&&this.setValue(n,e.value),e.attributes&&this.setAttribute(n,e.attributes),e.properties&&this.setProperty(n,e.properties),e.dataset&&this.setDataset(n,e.dataset),n):n},createComment:function(t){return this.context.createComment(t)},createText:function(t){return this.context.createTextNode(t)}}),Object.assign(r.prototype,{clone:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._nodeFilter(t,r.isNode).map(function(t){return e._clone(t,n,i,o)})},detach:function(t){this._nodeFilter(t,r.isNode).forEach(function(t){return r._detach(t)})},empty:function(t){var e=this;this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)}).forEach(function(t){return e._empty(t)})},extractSelection:function(){var e=t.getSelection();if(!e.rangeCount)return[];var n=e.getRangeAt(0);return e.removeAllRanges(),_toConsumableArray(n.extractContents().childNodes)},remove:function(t){var e=this;this._nodeFilter(t,r.isNode).forEach(function(t){return e._remove(t)})},replaceAll:function(t,e){this.replaceWith(e,t)},replaceWith:function(t,e){var n=this;e=this._parseQuery(e,r.isNode),this._nodeFilter(t,r.isNode).forEach(function(t){return n._replaceWith(t,e)})},_clone:function(t,e,n,r){var i=t.cloneNode(e);return n||r?(n&&this._cloneEvents(t,i),r&&this._cloneData(t,i),e&&this._deepClone(t,i,n,r),i):i},_deepClone:function(t,e,n,i){var o=this,s=r._contents(e);r._children(t,!1,!1,!1).forEach(function(t,e){n&&o._cloneEvents(s[e],t),i&&o._cloneData(s[e],t),o._cloneDeep(t,s[e])})},_empty:function(t){var e=this;r._children(t,!1,!1,!1).forEach(function(t){return e._remove(t)})},_remove:function(t){r.isElement(t)&&this._empty(t),this._clearQueue(t),this._stop(t),this._removeEvent(t),this._removeData(t),this.nodeStyles.has(t)&&this.nodeStyles.delete(t),r._detach(t),this._triggerEvent(t,"remove")},_replaceWith:function(t,e){r._before(t,this.clone(e,!0)),this._remove(t)}}),Object.assign(r.prototype,{after:function(t,e){var n=this._nodeFind(t,r.isNode);n&&r._after(n,this._parseQuery(e,r.isNode))},afterSelection:function(e){var n=t.getSelection();if(n.rangeCount){e=this._parseQuery(e);var r=n.getRangeAt(0);n.removeAllRanges(),r.collapse(),e.forEach(function(t){return r.insertNode(t)})}},append:function(t,e){var n=this._nodeFind(t);n&&r._append(n,this._parseQuery(e,r.isNode))},appendTo:function(t,e){this.append(e,t)},before:function(t,e){var n=this._nodeFind(t,r.isNode);n&&r._before(n,this._parseQuery(e,r.isNode))},beforeSelection:function(e){var n=t.getSelection();if(n.rangeCount){e=this._parseQuery(e);var r=n.getRangeAt(0);n.removeAllRanges(),e.forEach(function(t){return r.insertNode(t)})}},insertAfter:function(t,e){this.after(e,t)},insertBefore:function(t,e){this.before(e,t)},prepend:function(t,e){var n=this._nodeFind(t);n&&r._prepend(n,this._parseQuery(e,r.isNode))},prependTo:function(t,e){this.prepend(e,t)}}),Object.assign(r.prototype,{unwrap:function(t,e){var n=this;this._nodeFilter(t,r.isNode).forEach(function(t){return n._unwrap(t,e)})},wrap:function(t,e){var n=this;e=this._parseQuery(e),this._nodeFilter(t,r.isNode).forEach(function(t){return n._wrap(t,e)})},wrapAll:function(t,e){var n=this;e=this._parseQuery(e);var i=this.clone(e,!0);r._before(t,i);var o=i.shift();r._append(this.filterOne(r._findBySelector("*",o),function(t){return!n.child(t)})||o,t)},wrapInner:function(t,e){var n=this;e=this._parseQuery(e),this._nodeFilter(t,r.isNode).forEach(function(t){return n._wrapInner(t,e)})},wrapSelection:function(e){var n=t.getSelection();if(n.rangeCount){e=this._parseQuery(e);var i=n.getRangeAt(0);n.removeAllRanges();var o=e.slice().shift();r._append(this.filterOne(r._findBySelector("*",o),function(t){return!r._children(t,!1,!0).length})||o,_toConsumableArray(i.extractContents().childNodes)),e.forEach(function(t){return i.insertNode(t)})}},_unwrap:function(t,e){var n=r._parent(t,e).shift();n&&(r._before(n,r._children(n,!1,!1,!1)),this._remove(n))},_wrap:function(t,e){var n=this.clone(e,!0);r._before(t,n);var i=n.shift();r._append(this.filterOne(r._findBySelector("*",i),function(t){return!r._children(t,!1,!0).length})||i,[t])},_wrapInner:function(t,e){var n=this.clone(e,!0),i=r._children(t,!1,!1,!1);r._append(t,n);var o=n.shift();r._append(this.filterOne(r._findBySelector("*",o),function(t){return!r._children(t,!1,!0).length})||o,i)}}),Object.assign(r.prototype,{filter:function(t,e){return e=this._parseFilter(e),this._nodeFilter(t,function(t,n){return r.isElement(t)&&(!e||e(t,n))})},filterOne:function(t,e){return e=this._parseFilter(e),this._nodeFind(t,function(t,n){return r.isElement(t)&&(!e||e(t,n))})||null},not:function(t,e){return(e=this._parseFilter(e))?this._nodeFilter(t,function(t,n){return r.isElement(t)&&!e(t,n)}):[]},notOne:function(t,e){return(e=this._parseFilter(e))&&this._nodeFind(t,function(t,n){return r.isElement(t)&&!e(t,n)})||null},has:function(t,e){return e=this._parseFilterContains(e),this._nodeFilter(t,function(t,n){return(r.isElement(t)||r.isDocument(t))&&(!e||e(t,n))})},hasOne:function(t,e){return e=this._parseFilterContains(e),this._nodeFind(t,function(t,n){return(r.isElement(t)||r.isDocument(t))&&(!e||e(t,n))})||null},hidden:function(t){var n=this;return this._nodeFilter(t,function(t){return(r.isNode(t)||r.isDocument(t)||e.isWindow(t))&&n.isHidden(t)})},hiddenOne:function(t){var n=this;return this._nodeFind(t,function(t){return(r.isNode(t)||r.isDocument(t)||e.isWindow(t))&&n.isHidden(t)})||null},visible:function(t){var n=this;return this._nodeFilter(t,function(t){return(r.isNode(t)||r.isDocument(t)||e.isWindow(t))&&n.isVisible(t)})},visibleOne:function(t){var n=this;return this._nodeFind(t,function(t){return(r.isNode(t)||r.isDocument(t)||e.isWindow(t))&&n.isVisible(t)})||null}}),Object.assign(r.prototype,{find:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context,n=t.match(r.fastRegex);return n?"#"===n[1]?this.findById(n[2]):"."===n[1]?this.findByClass(n[2],e):this.findByTag(n[2],e):t.match(r.complexRegex)?this._findByCustom(t,e):this.findBySelector(t,e)},findOne:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context,n=t.match(r.fastRegex);return n?"#"===n[1]?this.findOneById(n[2]):"."===n[1]?this.findOneByClass(n[2],e):this.findOneByTag(n[2],e):t.match(r.complexRegex)?this._findOneByCustom(t,e):this.findOneBySelector(t,e)},findByClass:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(n)||r.isDocument(n))return e.merge([],r._findByClass(t,n));n=this._nodeFilter(n,function(t){return r.isElement(t)||r.isDocument(t)});var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._findByClass(t,l))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return n.length>1&&i.length>1?e.unique(i):i},findOneByClass:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(e)||r.isDocument(e))return r._findByClass(t,e).item(0);e=this._nodeFilter(e,function(t){return r.isElement(t)||r.isDocument(t)});var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value,c=r._findByClass(t,u).item(0);if(c)return c}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null},findById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context,n=r._findById(t,this.context);return!n||e!==this.context&&!this.hasOne(e,n)?[]:[n]},findOneById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context,n=r._findById(t,this.context);return!n||e!==this.context&&!this.hasOne(e,n)?null:n},findByTag:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(n)||r.isDocument(n))return e.merge([],r._findByTag(t,n));n=this._nodeFilter(n,function(t){return r.isElement(t)||r.isDocument(t)});var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._findByTag(t,l))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return n.length>1&&i.length>1?e.unique(i):i},findOneByTag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(e)||r.isDocument(e))return r._findByTag(t,e).item(0);e=this._nodeFilter(e,function(t){return r.isElement(t)||r.isDocument(t)});var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value,c=r._findByTag(t,u).item(0);if(c)return c}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null},findBySelector:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(n)||r.isDocument(n))return e.merge([],r._findBySelector(t,n));n=this._nodeFilter(n,function(t){return r.isElement(t)||r.isDocument(t)});var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._findBySelector(t,l))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return n.length>1&&i.length>1?e.unique(i):i},findOneBySelector:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(r.isElement(e)||r.isDocument(e))return r._findOneBySelector(t,e);e=this._nodeFilter(e,function(t){return r.isElement(t)||r.isDocument(t)});var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value,c=r._findOneBySelector(t,u);if(c)return c}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null},_findByCustom:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(e.isString(n))return r._findBySelector(r._prefixSelectors(t,"".concat(n," ")),this.context);var i=r._prefixSelectors(t,"#".concat(r.tempId," "));if(r.isElement(n)||r.isDocument(n))return e.merge([],r._findByCustom(i,n));n=this._nodeFilter(n,function(t){return r.isElement(t)||r.isDocument(t)});var o=[],s=!0,a=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value;e.merge(o,r._findByCustom(i,f))}}catch(t){a=!0,u=t}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return n.length>1&&o.length>1?e.unique(o):o},_findOneByCustom:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;if(e.isString(n))return r._findOneBySelector(r._prefixSelectors(t,"".concat(n," ")),this.context);var i=r._prefixSelectors(t,"#".concat(r.tempId," "));if(r.isElement(n)||r.isDocument(n))return r._findOneByCustom(i,n);n=this._nodeFilter(n,function(t){return r.isElement(t)||r.isDocument(t)});var o=!0,s=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value,f=r._findOneByCustom(i,l);if(f)return f}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return null}}),Object.assign(r.prototype,{child:function(t,e){return this.children(t,e,!0)},children:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n=this._parseFilter(n),r.isElement(t))return r._children(t,n,i,o);t=this._nodeFilter(t);var s=[],a=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;e.merge(s,r._children(h,n,i,o))}}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return t.length>1&&s.length>1?e.unique(s):s},commonAncestor:function(t){if((t=this.sortNodes(t)).length){var e=this.context.createRange();return 1==t.length?e.selectNode(t.shift()):(e.setStartBefore(t.shift()),e.setEndAfter(t.pop())),e.commonAncestorContainer}},contents:function(t){return this.children(t,!1,!1,!1)},closest:function(t,e,n){return this.parents(t,e,n,!0)},parent:function(t,n){if(n=this._parseFilter(n),r.isNode(t))return r._parent(t,n);t=this._nodeFilter(t,r.isNode);var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._parent(l,n))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return t.length>1&&i.length>1?e.unique(i):i},parents:function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n=this._parseFilter(n),i=this._parseFilter(i),r.isNode(t))return r._parent(t,n,i,o);t=this._nodeFilter(t,r.isNode);var s=[],a=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;e.merge(s,r._parents(h,n,i,o))}}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return t.length>1&&s.length>1?e.unique(s):s},offsetParent:function(t){return this.forceShow(t,function(t){return t.offsetParent})},next:function(t,n){if(n=this._parseFilter(n),r.isElement(t))return r._next(t,n);t=this._nodeFilter(t);var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._next(l,n))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return t.length>1&&i.length>1?e.unique(i):i},nextAll:function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n=this._parseFilter(n),i=this._parseFilter(i),r.isElement(t))return r._nextAll(t,n,i,o);t=this._nodeFilter(t);var s=[],a=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;e.merge(s,r._nextAll(h,n,i,o))}}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return t.length>1&&s.length>1?e.unique(s):s},prev:function(t,n){if(n=this._parseFilter(n),r.isElement(t))return r._prev(t,n);t=this._nodeFilter(t);var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.merge(i,r._prev(l,n))}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}return t.length>1&&i.length>1?e.unique(i):i},prevAll:function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n=this._parseFilter(n),i=this._parseFilter(i),r.isElement(t))return r._prevAll(t,n,i,o);t=this._nodeFilter(t);var s=[],a=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;e.merge(s,r._prevAll(h,n,i,o))}}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return t.length>1&&s.length?e.unique(s):s},siblings:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n=this._parseFilter(n),r.isElement(t))return r._siblings(t,n,i);t=this._nodeFilter(t);var o=[],s=!0,a=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value;e.merge(o,r._siblings(f,n,elementsOnlyt))}}catch(t){a=!0,u=t}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return t.length>1&&o.length>1?e.unique(o):o}}),Object.assign(r.prototype,{getSelection:function(){var e=t.getSelection();if(!e.rangeCount)return[];var n=e.getRangeAt(0),i=r._findBySelector("*",n.commonAncestorContainer);if(!i.length)return[n.commonAncestorContainer];if(1===i.length)return i;var o=r.isElement(n.startContainer)?n.startContainer:r._parent(n.startContainer).shift(),s=r.isElement(n.endContainer)?n.endContainer:r._parent(n.endContainer).shift();return i.slice(i.indexOf(o),i.indexOf(s)+1)},select:function(e){var n=this._nodeFind(e,r.isNode);if(n&&n.select)return n.select();var i=t.getSelection();if(i.rangeCount>0&&i.removeAllRanges(),n){var o=this.context.createRange();o.selectNode(n),i.addRange(o)}},selectAll:function(e){var n=t.getSelection();if(n.rangeCount&&n.removeAllRanges(),(e=this.sortNodes(e)).length){var r=this.context.createRange();1==e.length?r.selectNode(e.shift()):(r.setStartBefore(e.shift()),r.setEndAfter(e.pop())),n.addRange(r)}}}),Object.assign(r.prototype,{hasAnimation:function(t){var e=this;return this._nodeFilter(t).some(function(t){return!!parseFloat(e._css(t,"animation-duration"))})},hasAttribute:function(t,e){return this._nodeFilter(t).some(function(t){return t.hasAttribute(e)})},hasClass:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n=r._parseClasses(n),this._nodeFilter(t).some(function(t){return n.find(function(e){return t.classList.contains(e)})})},hasData:function(t,n){var i=this;return this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)||e.isWindow(t)}).some(function(t){return i.nodeData.has(t)&&(!n||i.nodeData.get(t).hasOwnProperty(n))})},hasProperty:function(t,e){return this._nodeFilter(t).some(function(t){return t.hasOwnProperty(e)})},hasTransition:function(t){var e=this;return this._nodeFilter(t).some(function(t){return!!parseFloat(e._css(t,"transition-duration"))})},contains:function(t,e){return e=this._parseFilterContains(e),this._nodeFilter(t,function(t){return r.isElement(t)||r.isDocument(t)}).some(function(t){return!e||e(t)})},is:function(t,e){return e=this._parseFilter(e),this._nodeFilter(t).some(function(t){return!e||e(t)})},isConnected:function(t){return this._nodeFilter(t,r.isNode).some(function(t){return r._isConnected(t)})},isFixed:function(t){var e=this;return this._nodeFilter(t).some(function(t){return"fixed"===e._css(t,"position")||e._parents(t,function(t){return"fixed"===e._css(t,"position")},!1,!0).length})},isHidden:function(t){return this._nodeFilter(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)}).some(function(t){return!r._isVisible(t)})},isVisible:function(t){return this._nodeFilter(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)}).some(function(t){return r._isVisible(t)})}}),Object.assign(r.prototype,{forceShow:function(t,n){var i=this,o=this._nodeFind(t,function(t){return r.isNode(t)||r.isDocument(t)||e.isWindow(t)});if(o){if(this.isVisible(o))return n(o);var s=[],a=[];"none"===this._css(o,"display")&&(s.push(o),a.push(r._getAttribute(o,"style"))),this._parents(o,function(t){return"none"===i._css(t,"display")}).forEach(function(t){s.push(t),a.push(r._getAttribute(t,"style"))}),r._setStyle(s,{display:"initial"},!0);var u=n(o);return s.forEach(function(t,e){return a[e]?r._setStyle(t,{display:a[e]}):r._removeAttribute(t,"style")}),u}},index:function(t,e){return e=this._parseFilter(e),this._nodeFilter(t).findIndex(function(t){return!e||e(t)})},indexOf:function(t){var e=this._nodeFind(t);if(e)return this.children(this.parent(e)).indexOf(e)},serialize:function(t){return r._parseParams(this.serializeArray(t))},serializeArray:function(t){var e=this;return this._nodeFilter(t).reduce(function(t,n){if(r._is(n,"form"))return t.concat(e.serializeArray(r._findBySelector("input, select, textarea",n)));if(r._is(n,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return t;var i=r._getAttribute(n,"name");if(!i)return t;var o=r._getAttribute(n,"value")||"";return t.push({name:i,value:o}),t},[])}}),Object.assign(r,{_getAttribute:function(t,e){return t.getAttribute(e)},_getDataset:function(t,e){return e?t.dataset[e]:t.dataset},_getProperty:function(t,e){return t[e]},_removeAttribute:function(t,e){t.removeAttribute(e)},_removeProperty:function(t,e){delete t[e]},_setAttribute:function(t,e){for(var n in e)t.setAttribute(n,e[n])},_setDataset:function(t,e){Object.assign(t.dataset,e)},_setProperty:function(t,e){Object.assign(t,e)}}),Object.assign(r,{_getScrollX:function(t){return e.isWindow(t)?t.scrollX:this.isDocument(t)?t.scrollingElement.scrollLeft:t.scrollLeft},_getScrollY:function(t){return e.isWindow(t)?t.scrollY:this.isDocument(t)?t.scrollingElement.scrollTop:t.scrollTop},_setScroll:function(t,n,r){return e.isWindow(t)?t.scroll(n,r):this.isDocument(t)?(t.scrollingElement.scrollLeft=n,void(t.scrollingElement.scrollTop=r)):(t.scrollLeft=n,void(t.scrollTop=r))},_setScrollX:function(t,n){if(e.isWindow(t))return t.scroll(n,t.scrollY);this.isDocument(t)?t.scrollingElement.scrollLeft=n:t.scrollLeft=n},_setScrollY:function(t,n){if(e.isWindow(t))return t.scroll(t.scrollX,n);this.isDocument(t)?t.scrollingElement.scrollTop=n:t.scrollTop=n}}),Object.assign(r,{_addClass:function(t,e){var n;(n=t.classList).add.apply(n,_toConsumableArray(e))},_removeClass:function(t,e){var n;(n=t.classList).remove.apply(n,_toConsumableArray(e))},_toggleClass:function(t,e){var n;(n=t.classList).toggle.apply(n,_toConsumableArray(e))},_getStyle:function(t,e){return t.style[e]},_setStyle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var r in e)t.style.setProperty(r,e[r],n?"important":"")},_toggle:function(t){"none"===this._getStyle(t,"display")?this._setStyle(t,{display:""}):this._setStyle(t,{display:"none"})}}),Object.assign(r,{_blur:function(t){t.blur()},_click:function(t){t.click()},_focus:function(t){t.focus()}}),Object.assign(r,{_detach:function(t){t.parentNode&&t.parentNode.removeChild(t)}}),Object.assign(r,{_after:function(t,e){t.parentNode&&e.reverse().forEach(function(e){return t.parentNode.insertBefore(e,t.nextSibling)})},_append:function(t,e){e.forEach(function(e){return t.insertBefore(e,null)})},_before:function(t,e){t.parentNode&&e.forEach(function(e){return t.parentNode.insertBefore(e,t)})},_prepend:function(t,e){e.reverse().forEach(function(e){return t.insertBefore(e,t.firstChild)})}}),Object.assign(r,{isDocument:function(t){return e.isObject(t)&&"nodeType"in t&&t.nodeType===Node.DOCUMENT_NODE},isElement:function(t){return e.isObject(t)&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE},isNode:function(t){return e.isObject(t)&&"nodeType"in t&&(t.nodeType===Node.ELEMENT_NODE||t.nodeType===Node.TEXT_NODE||t.nodeType===Node.COMMENT_NODE)},_compareNodes:function(t,e){if(r._isSame(t,e))return 0;var n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0},_has:function(t,e){return t.contains(e)},_hasChildren:function(t){return!!t.childElementCount},_is:function(t,e){return t.matches(e)},_isConnected:function(t){return t.isConnected},_isEqual:function(t,e){return t.isEqualNode(e)},_isSame:function(t,e){return t.isSameNode(e)},_isVisible:function(t){return e.isWindow(t)?"visible"===dom.context.visibilityState:r.isDocument(t)?"visible"===t.visibilityState:!!t.offsetParent},_normalize:function(t){t.normalize()}}),Object.assign(r,{parseHTML:function(t){return(new DOMParser).parseFromString(t,"text/html")},parseXML:function(t){return(new DOMParser).parseFromString(t,"application/xml")}}),Object.assign(r,{_findByClass:function(t,e){return e.getElementsByClassName(t)},_findById:function(t,e){return e.getElementById(t)},_findByTag:function(t,e){return e.getElementsByTagName(t)},_findBySelector:function(t,e){return e.querySelectorAll(t)},_findOneBySelector:function(t,e){return e.querySelector(t)},_findByCustom:function(t,e){var n=this._getAttribute(e,"id");this._setAttribute(e,{id:this.tempId});var r=this._findBySelector(t,e);return n?this._setAttribute(e,{id:n}):this._removeAttribute(e,"id"),r},_findOneByCustom:function(t,e){var n=this._getAttribute(e,"id");this._setAttribute(e,{id:this.tempId});var r=this._findOneBySelector(t,e);return n?this._setAttribute(e,{id:n}):this._removeAttribute(e,"id"),r}}),Object.assign(r,{_children:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?t.children:t.childNodes,o=[],s=!0,a=!1,u=void 0;try{for(var c,l=i[Symbol.iterator]();!(s=(c=l.next()).done)&&(n=c.value,e&&!e(n)||(o.push(n),!r));s=!0);}catch(t){a=!0,u=t}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return o},_parent:function(t,e){var n=[];return t.parentNode?e&&!e(t.parentNode)?n:(n.push(t.parentNode),n):n},_parents:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];(t=t.parentNode)&&(!n||!n(t))&&(e&&!e(t)||(i.push(t),!r)););return i},_next:function(t,e){for(var n=[];(t=t.nextSibling)&&!this.isElement(t););return t?e&&!e(t)?n:(n.push(t),n):n},_nextAll:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];t=t.nextSibling;)if(this.isElement(t)){if(n&&n(t))break;if((!e||e(t))&&(i.push(t),r))break}return i},_prev:function(t,e){for(var n=[];(t=t.previousSibling)&&!this.isElement(t););return t?e&&!e(t)?n:(n.push(t),n):n},_prevAll:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];t=t.previousSibling;)if(this.isElement(t)){if(n&&n(t))break;if((!e||e(t))&&(i.push(t),r))break}return i},_siblings:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];if(!t.parentNode)return i;var o,s=n?t.parentNode.children:t.parentNode.childNodes,a=!0,u=!1,c=void 0;try{for(var l,f=s[Symbol.iterator]();!(a=(l=f.next()).done);a=!0)o=l.value,r._isSame(t,o)||e&&!e(o)||i.push(o)}catch(t){u=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(u)throw c}}return i}}),Object.assign(r,{_parseClasses:function(t){return t.flat().flatMap(function(t){return t.split(" ")})},_parseData:function(t,n){return e.isObject(t)?t:_defineProperty({},t,n)},_parseEvent:function(t){return t.split(".").shift()},_parseEvents:function(t){return t.split(" ")},_parseFormData:function(t){var e=new FormData;if(Array.isArray(t)){var n={};t.forEach(function(t){return n[t.name]=t.value}),t=n}return this._parseFormValues(t,e),e},_parseFormValues:function(t,n,r){var i;for(i in t){var o=t[i];r&&(i="".concat(r,"[").concat(i,"]")),e.isPlainObject(o)?this._parseFormValues(o,n,i):Array.isArray(o)?o.forEach(function(t){return n.append(i,t)}):n.set(i,o)}},_parseParams:function(t){var n=this,r=[];return Array.isArray(t)?r=t.map(function(t){return n._parseParam(t.name,t.value)}):e.isObject(t)&&(r=Object.keys(t).map(function(e){return n._parseParam(e,t[e])})),r.flatMap(encodeURI).join("&")},_parseParam:function(t,n){var r=this;return Array.isArray(n)?n.map(function(e){return r._parseParam(t,e)}).flat():e.isObject(n)?Object.keys(n).map(function(e){return r._parseParam(t+"["+e+"]",n[e])}).flat():t+"="+n},_prefixSelectors:function(t,e){return t.split(this.splitRegex).filter(function(t){return!!t}).map(function(t){return"".concat(e," ").concat(t)}).join(", ")}}),Object.assign(r.prototype,{ajax:function(e){var n=_objectSpread({url:t.location,headers:{}},r.ajaxDefaults,e);if(!n.cache){var i=new URL(n.url);i.searchParams.append("_",Date.now()),n.url=i.toString()}return n.contentType&&!n.headers["Content-Type"]&&(n.headers["Content-Type"]=n.contentType),n.headers["X-Requested-With"]||(n.headers["X-Requested-With"]="XMLHttpRequest"),new Promise(function(t,i){var o=new XMLHttpRequest;o.open(n.method,n.url,!0),Object.keys(n.headers).forEach(function(t){return o.setRequestHeader(t,n.headers[t])}),n.responseType&&(o.responseType=n.responseType),o.onload=function(e){o.status>400?i({status:o.status,xhr:o,event:e}):t({response:o.response,xhr:o,event:e})},o.onerror=function(t){return i({status:o.status,xhr:o,event:t})},n.uploadProgress&&(o.upload.onprogress=function(t){return n.uploadProgress(t.loaded/t.total,o,t)}),n.beforeSend&&n.beforeSend(o),n.data&&n.processData&&("application/json"===n.contentType?n.data=JSON.stringify(n.data):"application/x-www-form-urlencoded"===n.contentType?n.data=r._parseParams(n.data):e.data=r._parseFormData(e.data)),o.send(n.data)})},get:function(t,e){return this.ajax(_objectSpread({url:t},e))},post:function(t,e,n){return this.ajax(_objectSpread({url:t,data:e,method:"POST"},n))},upload:function(t){return this.ajax(_objectSpread({method:"POST",contentType:!1},t))},loadScript:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.ajax(e,{cache:n}).then(function(e){return eval.apply(t,e.response)})},loadScripts:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Promise.all(e.map(function(t){return n.ajax(t,{cache:r})})).then(function(e){return e.forEach(function(e){return eval.apply(t,e.response)})})},loadStyle:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.ajax(t,{cache:n}).then(function(t){return e.append(e.findOne("head"),e.create("style",{text:t.response}))})},loadStyles:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Promise.all(t.map(function(t){return e.ajax(t,{cache:n})})).then(function(t){return e.append(e.findOne("head"),e.create("style",{text:t.map(function(t){return t.response}).join("\r\n")}))})}}),Object.assign(r.prototype,{getCookie:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=decodeURIComponent(this.context.cookie).split(";").find(function(e){return e.trimStart().substring(0,t.length)===t});if(!n)return null;var r=n.trimStart().substring(t.length+1);return e?JSON.parse(r):r},removeCookie:function(t,e){this.setCookie(t,"",_objectSpread({expires:-1},e))},setCookie:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){r&&(e=JSON.stringify(e));var i="".concat(t,"=").concat(e);if(n){if(n.expires){var o=new Date;o.setTime(o.getTime()+1e3*n.expires),i+=";expires=".concat(o.toUTCString())}n.path&&(i+=";path=".concat(n.path)),n.secure&&(i+=";secure")}this.context.cookie=i}}}),Object.assign(r.prototype,{mouseDragFactory:function(n,r,i){var o=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r&&s&&(r=e.animationFactory(r),i&&(i=e.animationFactory(i))),function(e){if(n&&!1===n(e))return!1;r&&o._addEvent(t,"mousemove",r),(r||i)&&o._addEventOnce(t,"mouseup",function(e){r&&o._removeEvent(t,"mousemove",r),i&&i(e)})}},_delegateFactory:function(t,e,n){var i=e.match(r.complexRegex)?this._getDelegateContainsFactory(t,e):this._getDelegateMatchFactory(t,e);return function(e){if(!r._isSame(e.target,t)){var o=i(e.target);if(o)return e.delegateTarget=o,n(e)}}},_getDelegateContainsFactory:function(t,e){return e=r._prefixSelectors(selectors,"#".concat(r._tempId)),function(n){var i=r._findByCustom(e,t);return!!i.length&&(i.includes(n)?n:r._parents(n,function(t){return i.contains(t)},function(e){return r._isSame(t,e)},!0).shift())}},_getDelegateMatchFactory:function(t,e){return function(n){return r._is(n,e)?n:r._parents(n,function(t){return r._is(t,e)},function(e){return r._isSame(t,e)},!0).shift()}},_selfDestructFactory:function(t,e,n,r){var i=this;return function o(s){return n?i._removeEvent(t,e,r,n):i._removeEvent(t,e,o),r(s)}}}),Object.assign(r.prototype,{_parseFilter:function(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?function(e){return r.isElement(e)&&r._is(e,t)}:r.isNode(t)?function(e){return r._isSame(e,t)}:!!(t=this._nodeFilter(t)).length&&function(e){return t.includes(e)})},_parseFilterContains:function(t){var n=this;return!!t&&(e.isFunction(t)?t:e.isString(t)?function(e){return!!n.findOne(t,e)}:r.isElement(t)?function(e){return r._has(e,t)}:!!(t=this._nodeFilter(t)).length&&function(e){return!!t.find(function(t){return r._has(e,t)})})}}),Object.assign(r.prototype,{sortNodes:function(t){return this._nodeFilter(t,r.isNode).sort(r._compareNodes)},_nodeFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.isElement;return e.isString(t)?this.find(t).filter(n):n(t)?[t]:e.wrap(t).filter(n)},_nodeFind:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.isElement;if(e.isString(t)){var i=this.findOne(t);return n(i)?i:null}var o=e.wrap(t).shift();return n(o)?o:null},_parseQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.isElement;return e.isString(t)&&"<"===t.trim().charAt(0)?this.parseHTML(t):this._nodeFilter(t,n)}}),Object.assign(r.prototype,{parseHTML:function(t){return e.merge([],this.context.createRange().createContextualFragment(t).childNodes)}}),Object.assign(r,{ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],complexRegex:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,fastRegex:/^([\#\.]?)([\w\-]+)$/,splitRegex:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,tempId:"frost"+Date.now().toString(16)}),{DOM:r,dom:new r}});