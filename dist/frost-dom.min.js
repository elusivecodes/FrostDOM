!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t:Object.assign(e,t(e))}(this,function(e){"use strict";if(!e)throw new Error("FrostDOM requires a Window.");if(!("Core"in e))throw new Error("FrostDOM requires FrostCore.");const t=e.Core,s=e.document;class r{constructor(e=s){this._context=e}}Object.assign(r.prototype,{ajax(t){t={url:e.location,headers:{},...r.ajaxDefaults,...t};const s=r._localRegExp.test(location.protocol);if(!t.cache){const e=new URL(t.url);e.searchParams.append("_",Date.now()),t.url=e.toString()}return"Content-Type"in t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=t.contentType),s||"X-Requested-With"in t.headers||(t.headers["X-Requested-With"]="XMLHttpRequest"),new Promise((e,n)=>{const o=new XMLHttpRequest;o.open(t.method,t.url,!0);for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);t.responseType&&(o.responseType=t.responseType),o.onload=(t=>{o.status>400?n({status:o.status,xhr:o,event:t}):e({response:o.response,xhr:o,event:t})}),s||(o.onerror=(e=>n({status:o.status,xhr:o,event:e}))),t.uploadProgress&&(o.upload.onprogress=(e=>t.uploadProgress(e.loaded/e.total,o,e))),t.beforeSend&&t.beforeSend(o),t.data&&t.processData&&("application/json"===t.contentType?t.data=JSON.stringify(t.data):"application/x-www-form-urlencoded"===t.contentType?t.data=r._parseParams(t.data):t.data=r._parseFormData(t.data)),o.send(t.data)})},delete(e,t){return this.ajax({url:e,method:"DELETE",...t})},get(e,t){return this.ajax({url:e,...t})},patch(e,t,s){return this.ajax({url:e,data:t,method:"PATCH",...s})},post(e,t,s){return this.ajax({url:e,data:t,method:"POST",...s})},put(e,t,s){return this.ajax({url:e,data:t,method:"PUT",...s})},upload(e,t,s){return this.ajax({url:e,data:t,method:"POST",contentType:!1,...s})}}),Object.assign(r.prototype,{loadScript(t,s=!0){return this.ajax({url:t,cache:s}).then(t=>eval.call(e,t.response))},loadScripts(t,s=!0){return Promise.all(t.map(e=>this.ajax({url:e,cache:s}))).then(t=>{for(const s of t)eval.call(e,s.response)})}}),Object.assign(r.prototype,{loadStyle(e,t=!0){return this.ajax({url:e,cache:t}).then(e=>n.insertBefore(this._context.head,this.create("style",{html:e.response})))},loadStyles(e,t=!0){return Promise.all(e.map(e=>this.ajax({url:e,cache:t}))).then(e=>{for(const t of e)n.insertBefore(this._context.head,this.create("style",{html:t.response}))})}}),Object.assign(r.prototype,{getCookie(e,t=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(t=>t.trimStart().substring(0,e.length)===e);if(!s)return null;const r=s.trimStart().substring(e.length+1);return t?JSON.parse(r):r},removeCookie(e,t){this.setCookie(e,"",{expires:-1,...t})},setCookie(e,t,s,r=!1){if(!e)return;r&&(t=JSON.stringify(t));let n=`${e}=${t}`;if(s){if(s.expires){let e=new Date;e.setTime(e.getTime()+1e3*s.expires),n+=`;expires=${e.toUTCString()}`}s.path&&(n+=`;path=${s.path}`),s.secure&&(n+=";secure")}this._context.cookie=n}}),Object.assign(r.prototype,{animate(e,t,s){e=this.parseNodes(e),s={...r.animationDefaults,...s};const n=e.map(e=>r._animate(e,t,s));return r._start(),Promise.all(n)},stop(e,t=!0){e=this.parseNodes(e);for(const s of e)r._stop(s,t)}}),Object.assign(r.prototype,{dropIn(e,t){return this.slideIn(e,{direction:"top",...t})},dropOut(e,t){return this.slideOut(e,{direction:"top",...t})},fadeIn(e,t){return this.animate(e,(e,t)=>n.setStyle(e,"opacity",t<1?t:""),t)},fadeOut(e,t){return this.animate(e,(e,t)=>n.setStyle(e,"opacity",t<1?1-t:""),t)},rotateIn(e,t){return this.animate(e,(e,t,s)=>n.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*t)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},rotateOut(e,t){return this.animate(e,(e,t,s)=>n.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*t*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},slideIn(e,s){return this.animate(e,(e,s,o)=>{if(1===s)return n.setStyle(e,"overflow",""),void(o.useGpu?n.setStyle(e,"transform",""):(n.setStyle(e,"margin-left",""),n.setStyle(e,"margin-top","")));const i=t.isFunction(o.direction)?o.direction():o.direction;let a,c,l;"top"===i||"bottom"===i?(a=o.useGpu?"Y":"margin-top",c=r._height(e),l="top"===i):(a=o.useGpu?"X":"margin-left",c=r._width(e),l="left"===i);const d=(c-c*s)*(l?-1:1);o.useGpu?n.setStyle(e,"transform",`translate${a}(${d}px)`):n.setStyle(e,a,`${d}px`)},{direction:"bottom",useGpu:!0,...s})},slideOut(e,s){return this.animate(e,(e,s,o)=>{if(1===s)return n.setStyle(e,"overflow",""),void(o.useGpu?n.setStyle(e,"transform",""):(n.setStyle(e,"margin-left",""),n.setStyle(e,"margin-top","")));const i=t.isFunction(o.direction)?o.direction():o.direction;let a,c,l;"top"===i||"bottom"===i?(a=o.useGpu?"Y":"margin-top",c=r._height(e),l="top"===i):(a=o.useGpu?"X":"margin-left",c=r._width(e),l="left"===i);const d=c*s*(l?-1:1);o.useGpu?n.setStyle(e,"transform",`translate${a}(${d}px)`):n.setStyle(e,a,`${d}px`)},{direction:"bottom",useGpu:!0,...s})},squeezeIn(e,s){e=this.parseNodes(e),s={...r.animationDefaults,direction:"bottom",useGpu:!0,...s};const o=e.map(e=>{const o=n.getStyle(e,"height"),i=n.getStyle(e,"width");return n.setStyle(e,"overflow","hidden"),r._animate(e,(e,s,a)=>{if(n.setStyle(e,"height",o),n.setStyle(e,"width",i),1===s)return n.setStyle(e,"overflow",""),void(a.useGpu?n.setStyle(e,"transform",""):(n.setStyle(e,"margin-left",""),n.setStyle(e,"margin-top","")));const c=t.isFunction(a.direction)?a.direction():a.direction;let l,d;"top"===c||"bottom"===c?(l="height","top"===c&&(d=a.useGpu?"Y":"margin-top")):"left"!==c&&"right"!==c||(l="width","left"===c&&(d=a.useGpu?"X":"margin-left"));const h=r[`_${l}`](e),p=h*s;if(n.setStyle(e,l,`${p}px`),d){const t=h-p;a.useGpu?n.setStyle(e,"transform",`translate${d}(${t}px)`):n.setStyle(e,d,`${t}px`)}},s)});return r._start(),Promise.all(o)},squeezeOut(e,s){e=this.parseNodes(e),s={...r.animationDefaults,direction:"bottom",useGpu:!0,...s};const o=e.map(e=>{const o=n.getStyle(e,"height"),i=n.getStyle(e,"width");return n.setStyle(e,"overflow","hidden"),r._animate(e,(e,s,a)=>{if(n.setStyle(e,"height",o),n.setStyle(e,"width",i),1===s)return n.setStyle(e,"overflow",""),void(a.useGpu?n.setStyle(e,"transform",""):(n.setStyle(e,"margin-left",""),n.setStyle(e,"margin-top","")));const c=t.isFunction(a.direction)?a.direction():a.direction;let l,d;"top"===c||"bottom"===c?(l="height","top"===c&&(d=a.useGpu?"Y":"margin-top")):"left"!==c&&"right"!==c||(l="width","left"===c&&(d=a.useGpu?"X":"margin-left"));const h=r[`_${l}`](e),p=h-h*s;if(n.setStyle(e,l,`${p}px`),d){const t=h-p;a.useGpu?n.setStyle(e,"transform",`translate${d}(${t}px)`):n.setStyle(e,d,`${t}px`)}},s)});return r._start(),Promise.all(o)}}),Object.assign(r.prototype,{clearQueue(e){e=this.parseNodes(e);for(const t of e)r._clearQueue(t)},queue(e,t){e=this.parseNodes(e);for(const s of e)r._queue(s,t)}}),Object.assign(r.prototype,{getAttribute(e,t){const s=this.parseNode(e);if(s)return r._getAttribute(s,t)},getDataset(e,t){const s=this.parseNode(e);if(s)return r._getDataset(s,t)},getHTML(e){return this.getProperty(e,"innerHTML")},getProperty(e,t){const s=this.parseNode(e);if(s)return n.getProperty(s,t)},getText(e){return this.getProperty(e,"innerText")},getValue(e){return this.getProperty(e,"value")},removeAttribute(e,t){e=this.parseNodes(e);for(const s of e)n.removeAttribute(s,t)},removeDataset(e,t){e=this.parseNodes(e);for(const s of e)r._removeDataset(s,t)},removeProperty(e,t){e=this.parseNodes(e);for(const s of e)n.removeProperty(s,t)},setAttribute(e,t,s){e=this.parseNodes(e);const n=r._parseData(t,s);for(const t of e)r._setAttribute(t,n)},setDataset(e,t,s){e=this.parseNodes(e);const n=r._parseData(t,s,!0);for(const t of e)r._setDataset(t,n)},setHTML(e,t){this.empty(e),this.setProperty(e,"innerHTML",t)},setProperty(e,t,s){e=this.parseNodes(e);const o=r._parseData(t,s);for(const t of e)for(const e in o)n.setProperty(t,e,o[e])},setText(e,t){this.empty(e),this.setProperty(e,"innerText",t)},setValue(e,t){this.setProperty(e,"value",t)}}),Object.assign(r.prototype,{cloneData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)r._cloneData(s,e)},getData(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return r._getData(s,t)},removeData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)r._removeData(s,t)},setData(e,t,s){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});const n=r._parseData(t,s);for(const t of e)r._setData(t,n)}}),Object.assign(r.prototype,{center(e,t){const s=this.rect(e,t);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(e,t){const s=this.rect(t);if(s){e=this.parseNodes(e);for(const t of e)r._constrain(t,s)}},distTo(e,s,r,n){const o=this.center(e,n);if(o)return t.dist(o.x,o.y,s,r)},distToNode(e,t){const s=this.center(t);if(s)return this.distTo(e,s.x,s.y)},nearestTo(e,t,s,r){let n=null,o=Number.MAX_VALUE;e=this.parseNodes(e);for(const i of e){const e=this.distTo(i,t,s,r);e&&e<o&&(o=e,n=i)}return n},nearestToNode(e,t){const s=this.center(t);if(s)return this.nearestTo(e,s.x,s.y)},percentX(e,s,r,n=!0){const o=this.rect(e,r);if(!o)return;const i=(s-o.left)/o.width*100;return n?t.clampPercent(i):i},percentY(e,s,r){const n=this.rect(e,r);if(!n)return;const o=(s-n.top)/n.height*100;return clamp?t.clampPercent(o):o},position(e,t){const s=this.parseNode(e);if(s)return r._position(s,t)},rect(e,t){const s=this.parseNode(e);if(s)return r._rect(s,t)}}),Object.assign(r.prototype,{getScrollX(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?n.getScrollXWindow(s):t.isDocument(s)?r._getScrollXDocument(s):n.getScrollX(s)},getScrollY(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?n.getScrollYWindow(s):t.isDocument(s)?r._getScrollYDocument(s):n.getScrollY(s)},setScroll(e,s,o){e=this.parseNodes(e,{document:!0,window:!0});for(const i of e)t.isWindow(i)?n.setScrollWindow(i,s,o):t.isDocument(i)?r._setScrollDocument(i,s,o):r._setScroll(i,s,o)},setScrollX(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?r._setScrollXWindow(o,s):t.isDocument(o)?r._setScrollXDocument(o,s):n.setScrollX(o,s)},setScrollY(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?r._setScrollYWindow(o,s):t.isDocument(o)?r._setScrollYDocument(o,s):n.setScrollY(o,s)}}),Object.assign(r.prototype,{height(e,s,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?n.heightWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?r._height(n.documentElement(a),!!t.isUndefined(s)||s,o,i):r._height(a,s,o,i)},width(e,s,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?n.widthWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?r._width(n.documentElement(a),!!t.isUndefined(s)||s,o,i):r._width(a,s,o,i)}}),Object.assign(r.prototype,{addClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)n.addClass(s,...t)},css(e,t){const s=this.parseNode(e);if(s)return r._css(s,t)},getStyle(e,t){const s=this.parseNode(e);if(s)return r._getStyle(s,t)},hide(e){this.setStyle(e,"display","none")},removeClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)n.removeClass(s,...t)},setStyle(e,t,s,n){e=this.parseNodes(e);const o=r._parseData(t,s);for(const t of e)r._setStyle(t,o,n)},show(e){this.setStyle(e,"display","")},toggle(e){e=this.parseNodes(e);for(const t of e)"none"===n.getStyle(t,"display")?n.setStyle(t,"display",""):n.setStyle(t,"display","none")},toggleClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)n.toggleClass(s,...t)}}),Object.assign(r.prototype,{mouseDragFactory:(s,n,o,i=!0)=>(n&&i&&(n=t.animation(n),o&&(o=t.animation(o))),t=>{if(s&&!1===s(t))return!1;n&&r._addEvent(e,"mousemove",n),(n||o)&&r._addEvent(e,"mouseup",t=>{n&&r._removeEvent(e,"mousemove",n),o&&o(t)},!1,!0)})}),Object.assign(r.prototype,{blur(e){const t=this.parseNode(e);t&&n.blur(t)},click(e){const t=this.parseNode(e);t&&n.click(t)},focus(e){const t=this.parseNode(e);t&&n.focus(t)},ready(t){"complete"!==this._context.readyState?r._addEvent(e,"DOMContentLoaded",t):t()}}),Object.assign(r.prototype,{addEvent(e,t,s,n,o){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const i of e)for(const e of r._parseEvents(t))r._addEvent(i,e,s,n,o)},addEventDelegate(e,t,s,r){this.addEvent(e,t,r,s)},addEventDelegateOnce(e,t,s,r){this.addEvent(e,t,r,s,!0)},addEventOnce(e,t,s){this.addEvent(e,t,s,null,!0)},cloneEvents(e,t){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)r._cloneEvents(s,e)},removeEvent(e,t,s,n){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=!!t&&r._parseEvents(t);for(const o of e)if(r._events.has(o))if(t)for(const e of t)r._removeEvent(o,e,s,n);else r._removeEvent(o,t,s,n)},removeEventDelegate(e,t,s,r){this.removeEvent(e,t,r,s)},triggerEvent(e,t,s,n){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=r._parseEvents(t);for(const o of e)for(const e of t)r._triggerEvent(o,e,s,n)}}),Object.assign(r.prototype,{attachShadow(e,t=!0){const s=this.parseNode(e);if(s)return n.attachShadow(s,t)},create(e="div",s){const o=n.create(this._context,e);return s?("html"in s?n.setProperty(o,"innerHTML",s.html):"text"in s&&n.setProperty(o,"innerText",s.text),"class"in s&&n.addClass(o,...r._parseClasses(t.wrap(s.class))),"style"in s&&r._setStyle(o,s.style),"value"in s&&n.setProperty(o,"value",s.value),"attributes"in s&&r._setAttribute(o,s.attributes),"properties"in s&&r._setProperty(o,s.properties),"dataset"in s&&r._setDataset(o,s.dataset),o):o},createComment(e){return n.createComment(this._context,e)},createFragment(){return n.createFragment(this._context)},createRange(){return n.createRange(this._context)},createText(e){return n.createText(this._context,e)},parseHTML(e){return t.wrap(n.children(this.createRange().createContextualFragment(e)))}}),Object.assign(r.prototype,{clone(e,t=!0,s=!1,n=!1){return(e=this.parseNodes(e,{node:!0,fragment:!0})).map(e=>r._clone(e,t,s,n))},detach(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=n.parent(t);e&&n.removeChild(e,t)}},empty(e){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});for(const t of e)r._empty(t)},remove(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=n.parent(t);e&&(r._remove(t),n.removeChild(e,t))}},replaceAll(e,t){this.replaceWith(t,e)},replaceWith(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const s of e)r._replaceWith(s,t)}}),Object.assign(r.prototype,{after(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const r=n.parent(s);if(r){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)n.insertBefore(r,e,n.next(s))}},append(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(s){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)n.insertBefore(s,e)}},appendTo(e,t){this.append(t,e)},before(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const r=n.parent(s);if(r){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)n.insertBefore(r,e,s)}},insertAfter(e,t){this.after(t,e)},insertBefore(e,t){this.before(t,e)},prepend(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(!s)return;const r=n.firstChild(s);t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)n.insertBefore(s,e,r)},prependTo(e,t){this.prepend(t,e)}}),Object.assign(r.prototype,{unwrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseFilter(t);for(const s of e)r._unwrap(s,t)},wrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)r._wrap(s,t)},wrapAll(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});const s=this.clone(t,!0);r._wrapAll(e,s)},wrapInner(e,t){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)r._wrapInner(s,t)}}),Object.assign(r.prototype,{connected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>n.isConnected(e))},equal(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>n.isEqual(e,t)))},filter(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>!t||t(e,s))},filterOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>!t||t(e,s))||null},fixed(e){return this.parseNodes(e,{node:!0}).filter(e=>t.isElement(e)&&"fixed"===r._css(e,"position")||r._parents(e,e=>t.isElement(e)&&"fixed"===r._css(e,"position"),!1,!0).length)},hidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>!r._isVisible(e))},not(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>t&&!t(e,s))},notOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>t&&!t(e,s))},same(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>n.isSame(e,t)))},visible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>r._isVisible(e))},withAnimation(e){return this.parseNodes(e).filter(e=>r._hasAnimation(e))},withAttribute(e,t){return this.parseNodes(e).filter(e=>n.hasAttribute(e,t))},withChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter(e=>n.hasChildren(e))},withClass(e,...t){return t=r._parseClasses(t),this.parseNodes(e).filter(e=>t.some(t=>n.hasClass(e,t)))},withCSSAnimation(e){return this.parseNodes(e).filter(e=>r._hasCSSAnimation(e))},withCSSTransition(e){return this.parseNodes(e).filter(e=>r._hasCSSTransition(e))},withData(e,t){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(e=>r._hasData(e,t))},withDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter((e,s)=>!t||t(e,s))},withProperty(e,t){return this.parseNodes(e).filter(e=>n.hasProperty(e,t))}}),Object.assign(r.prototype,{find(e,s=this._context){const o=e.match(r._fastRegExp);if(o)return"#"===o[1]?this.findById(o[2],s):"."===o[1]?this.findByClass(o[2],s):this.findByTag(o[2],s);if(e.match(r._complexRegExp)){const n=r._prefixSelectors(e,`#${r._tempId} `);return t.isElement(s)?r.__findByCustom(n,s):(s=this.parseNodes(s),r._findByCustom(n,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?t.wrap(n.findBySelector(e,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),r._findBySelector(e,s))},findByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(n.findByClass(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const r=[];for(const o of s)t.merge(r,n.findByClass(e,o));return s.length>1&&r.length>1?t.unique(r):r},findById(e,t=this._context){const s=this.findOneById(e,t);return s?[s]:[]},findByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(n.findByTag(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const r=[];for(const o of s)t.merge(r,n.findByTag(e,o));return s.length>1&&r.length>1?t.unique(r):r},findOne(e,s=this._context){const o=e.match(r._fastRegExp);if(o)return"#"===o[1]?this.findOneById(o[2],s):"."===o[1]?this.findOneByClass(o[2],s):this.findOneByTag(o[2],s);if(e.match(r._complexRegExp)){const n=r._prefixSelectors(e,`#${r._tempId} `);return t.isElement(s)?r.__findOneByCustom(n,s):(s=this.parseNodes(s),r._findOneByCustom(n,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?n.findOneBySelector(e,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),r._findOneBySelector(e,s))},findOneByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return n.findByClass(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=n.findByClass(e,t).item(0);if(s)return s}return null},findOneById(e,s=this._context){const r=n.findById(e,this._context);return r?t.isDocument(s)?r:t.isElement(s)?n.contains(s,r)?r:null:(s=this.parseNodes(s)).some(e=>n.contains(e,r))?r:null:null},findOneByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return n.findByTag(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=n.findByTag(e,t).item(0);if(s)return s}return null}}),Object.assign(r.prototype,{child(e,t){return this.children(e,t,!0)},children(e,s,n=!1,o=!0){if(s=this.parseFilter(s),t.isElement(e)||t.isDocument(e)||t.isFragment(e)||t.isShadow(e))return r._children(e,s,n,o);e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});const i=[];for(const a of e)t.merge(i,r._children(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},closest(e,t,s){return this.parents(e,t,s,!0)},commonAncestor(e){if(!(e=this.sort(e)).length)return;const t=this.createRange();return 1===e.length?n.select(t,e.shift()):(n.setStartBefore(t,e.shift()),n.setEndAfter(t,e.pop())),t.commonAncestorContainer},contents(e){return this.children(e,!1,!1,!1)},fragment(e){const t=this.parseNode(e);if(t)return n.fragment(t)},next(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._next(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._next(o,s));return e.length>1&&n.length>1?t.unique(n):n},nextAll(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._nextAll(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._nextAll(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},offsetParent(e){return this.forceShow(e,e=>n.offsetParent(e))},parent(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._parent(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._parent(o,s));return e.length>1&&n.length>1?t.unique(n):n},parents(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._parents(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._parents(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},prev(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._prev(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._prev(o,s));return e.length>1&&n.length>1?t.unique(n):n},prevAll(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._prevAll(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._prevAll(a,s,n,o));return e.length>1&&i.length?t.unique(i):i},shadow(e){const t=this.parseNode(e);if(t)return n.shadow(t)},siblings(e,s,n=!0){if(s=this.parseFilter(s),t.isNode(e))return r._siblings(e,s,n);e=this.parseNodes(e,{node:!0});const o=[];for(const i of e)t.merge(o,r._siblings(i,s,n));return e.length>1&&o.length>1?t.unique(o):o}}),Object.assign(r.prototype,{parseFilter(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>n.is(t,e):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>n.isSame(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.includes(t)))},parseFilterContains(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>!!this.findOne(e,t):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>n.contains(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.some(e=>n.contains(t,e))))},parseNode(e,s={}){if(t.isString(e)){if("html"in s&&s.html&&"<"===e.trim().charAt(0))return this.parseHTML(e).shift();const t=this.findOne(e,"context"in s?s.context:this._context);return t||null}const n=r.parseNodesFactory(s);if(n(e))return e;const o=t.wrap(e).slice().shift();return o&&n(o)?o:null},parseNodes(e,s={}){if(t.isString(e))return"html"in s&&s.html&&"<"===e.trim().charAt(0)?this.parseHTML(e):this.find(e,"context"in s?s.context:this._context);const n=r.parseNodesFactory(s);return n(e)?[e]:t.wrap(e).filter(n)}}),Object.assign(r.prototype,{afterSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=n.getSelection();if(!n.rangeCount(t))return;const s=n.getRange(t);n.removeRanges(t),n.collapse(s);for(const t of e)n.insert(s,t)},beforeSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=n.getSelection();if(!n.rangeCount(t))return;const s=n.getRange(t);n.removeRanges(t);for(const t of e)n.insert(s,t)},extractSelection(){const e=n.getSelection();if(!n.rangeCount(e))return[];const s=n.getRange(e);n.removeRanges(e);const r=n.extract(s);return t.wrap(n.childNodes(r))},getSelection(){const e=n.getSelection();if(!n.rangeCount(e))return[];const s=n.getRange(e),r=t.wrap(n.findBySelector("*",s.commonAncestorContainer));if(!r.length)return[s.commonAncestorContainer];if(1===r.length)return r;const o=n.startContainer(s),i=n.endContainer(s),a=t.isElement(o)?o:n.parent(o),c=t.isElement(i)?i:n.parent(i);return r.slice(r.indexOf(a),r.indexOf(c)+1)},select(e){const t=this.parseNode(e,{node:!0,fragment:!0,shadow:!0});if(t&&"select"in t)return t.select();const s=n.getSelection();if(n.rangeCount(s)>0&&n.removeRanges(s),!t)return;const r=this.createRange();n.select(r,t),n.addRange(s,r)},selectAll(e){e=this.sort(e);const t=n.getSelection();if(n.rangeCount(t)&&n.removeRanges(t),!e.length)return;const s=this.createRange();1==e.length?n.select(s,e.shift()):(n.setStartBefore(s,e.shift()),n.setEndAfter(s,e.pop())),n.addRange(t,s)},wrapSelection(e){e=this.parseNodes(e,{fragment:!0,html:!0});const s=n.getSelection();if(!n.rangeCount(s))return;const o=n.getRange(s);n.removeRanges(s);const i=n.extract(o),a=r._deepest(e.slice().shift()),c=t.wrap(n.childNodes(i));for(const e of c)n.insertBefore(a,e);for(const t of e)n.insert(o,t)}}),Object.assign(r.prototype,{hasAnimation(e){return this.parseNodes(e).some(e=>r._hasAnimation(e))},hasAttribute(e,t){return this.parseNodes(e).some(e=>n.hasAttribute(e,t))},hasChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>n.hasChildren(e))},hasClass(e,...t){return t=r._parseClasses(t),this.parseNodes(e).some(e=>t.some(t=>n.hasClass(e,t)))},hasCSSAnimation(e){return this.parseNodes(e).some(e=>r._hasCSSAnimation(e))},hasCSSTransition(e){return this.parseNodes(e).some(e=>r._hasCSSTransition(e))},hasData(e,t){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}).some(e=>r._hasData(e,t))},hasDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>!t||t(e))},hasFragment(e){return this.parseNodes(e).some(e=>r._hasFragment(e))},hasProperty(e,t){return this.parseNodes(e).some(e=>n.hasProperty(e,t))},hasShadow(e){return this.parseNodes(e).some(e=>r._hasShadow(e))},is(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>!t||t(e))},isConnected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>n.isConnected(e))},isEqual(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>n.isEqual(e,t)))},isFixed(e){return this.parseNodes(e,{node:!0}).some(e=>t.isElement(e)&&"fixed"===r._css(e,"position")||r._parents(e,e=>t.isElement(e)&&"fixed"===r._css(e,"position"),!1,!0).length)},isHidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>!r._isVisible(e))},isSame(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>n.isSame(e,t)))},isVisible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>r._isVisible(e))}}),Object.assign(r.prototype,{exec(e,t=null){return this._context.execCommand(e,!1,t)},forceShow(e,t){const s=this.parseNode(e,{node:!0,document:!0,window:!0});if(s)return r._forceShow(s,t)},index(e){const s=this.parseNode(e,{node:!0});if(s)return t.wrap(n.children(n.parent(s))).indexOf(s)},indexOf(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).findIndex(e=>!t||t(e))},normalize(e){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0});for(const t of e)n.normalize(t)},sanitize(e,t=r.allowedTags){const s=this.create("template",{html:e}),o=n.fragment(s),i=n.children(o);for(const e of i)r._sanitize(e,o,t);return this.getHTML(s)},serialize(e){return r._parseParams(this.serializeArray(e))},serializeArray(e){return this.parseNodes(e,{fragment:!0,shadow:!0}).reduce((e,s)=>{if(n.is(s,"form")||t.isFragment(s)||t.isShadow(s))return e.concat(this.serializeArray(n.findBySelector("input, select, textarea",s)));if(n.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return e;const r=n.getAttribute(s,"name");if(!r)return e;const o=n.getAttribute(s,"value")||"";return e.push({name:r,value:o}),e},[])},sort(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).sort((e,t)=>{if(n.isSame(e,t))return 0;const s=n.comparePosition(e,t);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})},tagName(e){const t=this.parseNode(e);if(t)return n.tagName(t)}}),Object.assign(r,{_animate(e,s,n){r._hasAnimation(e)||this._animations.set(e,[]);const o=performance.now();return new Promise((r,i)=>{this._animations.get(e).push((a=!1,c=!1)=>{if(a&&!c)return i(e),!0;let l;return c?l=1:(l=(performance.now()-o)/n.duration,n.infinite?l%=1:l=t.clamp(l),"ease-in"===n.type?l=Math.pow(l,2):"ease-out"===n.type?l=Math.sqrt(l):"ease-in-out"===n.type&&(l=l<=.5?2*Math.pow(l,2):1-(1-l)**2*2)),s(e,l,n),1===l?(r(e),!0):void 0})})},_animationFrame(){for(let[e,t]of this._animations)(t=t.filter(e=>!e())).length?this._animations.set(e,t):this._animations.delete(e);this._animations.size?e.requestAnimationFrame(e=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(e,t=!0){if(!r._hasAnimation(e))return;const s=this._animations.get(e);for(const e of s)e(!0,t);this._animations.delete(e)}}),Object.assign(r,{_clearQueue(e){this._queues.has(e)&&this._queues.delete(e)},_dequeueNode(e){if(!this._queues.has(e))return;const t=this._queues.get(e).shift();t?Promise.resolve(t(e)).finally(t=>this._dequeueNode(e)):this._queues.delete(e)},_queue(e,t){const s=!this._queues.has(e);s&&this._queues.set(e,[]),this._queues.get(e).push(t),s&&this._dequeueNode(e)}}),Object.assign(r,{_getAttribute(e,t){if(t)return n.getAttribute(e,t);const s=n.attributes(e),r={};for(const e of s)r[e.nodeName]=e.nodeValue;return r},_getDataset(e,s){if(s)return s=t.camelCase(s),r._parseDataset(n.getDataset(e,s));const o=n.dataset(e),i={};for(const e in o)i[e]=r._parseDataset(o[e]);return i},_removeDataset(e,s){s=t.camelCase(s),n.removeDataset(e,s)},_setAttribute(e,t){for(const s in t)n.setAttribute(e,s,t[s])},_setDataset(e,s){for(const r in s){const o=t.camelCase(r);n.setDataset(e,o,s[r])}}}),Object.assign(r,{_cloneData(e,t){this._data.has(e)&&this._setData(t,{...this._data.get(e)})},_getData(e,t){if(this._data.has(e))return t?this._data.get(e)[t]:this._data.get(e)},_removeData(e,t){if(this._data.has(e)){if(t){const s=this._data.get(e);if(delete s[t],Object.keys(s).length)return}this._data.delete(e)}},_setData(e,t){this._data.has(e)||this._data.set(e,{}),Object.assign(this._data.get(e),t)}}),Object.assign(r,{_constrain(e,t){const s=this._rect(e),r={};let n,o;s.height>t.height&&(r.height=t.height),s.width>t.width&&(r.width=t.width),s.left-t.left<0?n=s.left-t.left:s.right-t.right>0&&(n=s.right-t.right),n&&(r.left=`${parseFloat(this._css(e,"left"))-n}px`),s.top-t.top<0?o=s.top-t.top:s.bottom-t.bottom>0&&(o=s.bottom-t.bottom),o&&(r.top=`${parseFloat(this._css(e,"top"))-o}px`),this._setStyle(e,r)},_position(e,t){return this._forceShow(e,e=>{const s={x:n.offsetLeft(e),y:n.offsetTop(e)};if(t){let t=e;for(;t=n.offsetParent(t);)s.x+=n.offsetLeft(t),s.y+=n.offsetTop(t)}return s})},_rect(t,s){return this._forceShow(t,t=>{const r=n.rect(t);return s&&(r.x+=n.getScrollXWindow(e),r.y+=n.getScrollYWindow(e)),r})}}),Object.assign(r,{_getScrollXDocument:e=>n.getScrollX(n.scrollingElement(e)),_getScrollYDocument:e=>n.getScrollY(n.scrollingElement(e)),_setScroll(e,t,s){n.setScrollX(e,t),n.setScrollY(e,s)},_setScrollDocument(e,t,s){return this._setScroll(n.scrollingElement(e),t,s)},_setScrollXDocument:(e,t)=>n.setScrollX(n.scrollingElement(e),t),_setScrollXWindow:(e,t)=>n.setScrollWindow(e,t,n.getScrollYWindow(e)),_setScrollYDocument:(e,t)=>n.setScrollY(n.scrollingElement(e),t),_setScrollYWindow:(e,t)=>n.setScrollWindow(e,n.getScrollXWindow(e),t)}),Object.assign(r,{_height(e,t=!0,s,r){return this._forceShow(e,e=>{let o=n.height(e);return t||(o-=parseInt(this._css(e,"padding-top"))+parseInt(this._css(e,"padding-bottom"))),s&&(o+=parseInt(this._css(e,"border-top-width"))+parseInt(this._css(e,"border-bottom-width"))),r&&(o+=parseInt(this._css(e,"margin-top"))+parseInt(this._css(e,"margin-bottom"))),o})},_width(e,t=!0,s,r){return this._forceShow(e,e=>{let o=n.width(e);return t||(o-=parseInt(this._css(e,"padding-left"))+parseInt(this._css(e,"padding-right"))),s&&(o+=parseInt(this._css(e,"border-left-width"))+parseInt(this._css(e,"border-right-width"))),r&&(o+=parseInt(this._css(e,"margin-left"))+parseInt(this._css(e,"margin-right"))),o})}}),Object.assign(r,{_css(e,s){return this._styles.has(e)||this._styles.set(e,n.css(e)),s?(s=t.snakeCase(s),this._styles.get(e).getPropertyValue(s)):{...this._styles.get(e)}},_getStyle(e,s){if(s)return s=t.snakeCase(s),n.getStyle(e,s);const r=n.style(e),o={};for(const t of r)o[t]=n.getStyle(e,t);return o},_setStyle(e,s,r){for(let o in s){let i=s[o];o=t.snakeCase(o),i&&t.isNumeric(i)&&!this.cssNumberProperties.includes(o)&&(i+="px"),n.setStyle(e,o,i,r)}}}),Object.assign(r,{_delegateFactory(e,s,o){const i=s.match(r._complexRegExp)?this._getDelegateContainsFactory(e,s):this._getDelegateMatchFactory(e,s);return s=>{if(n.isSame(s.target,e))return;const r=i(s.target);if(!r)return;const a={};for(const e in s)a[e]=t.isFunction(s[e])?(...t)=>s[e](...t):s[e];return a.currentTarget=r,a.delegateTarget=e,a.originalEvent=s,Object.freeze(a),o(a)}},_getDelegateContainsFactory(e,t){return t=r._prefixSelectors(selectors,`#${r._tempId}`),s=>{const r=this.__findByCustom(t,e);return!!r.length&&(r.includes(s)?s:this._parents(s,e=>r.includes(e),t=>n.isSame(e,t),!0).shift())}},_getDelegateMatchFactory(e,t){return s=>n.is(s,t)?s:this._parents(s,e=>n.is(e,t),t=>n.isSame(e,t),!0).shift()},_namespaceFactory:(e,t)=>s=>{if(!("namespaceRegExp"in s)||s.namespaceRegExp.test(e))return t(s)},_selfDestructFactory(e,t,s,r){return n=>(s?this._removeEvent(e,t,r,s):this._removeEvent(e,t,r),r(n))}}),Object.assign(r,{_addEvent(e,t,s,r,o){this._events.has(e)||this._events.set(e,{});const i=this._events.get(e),a={delegate:r,callback:s,selfDestruct:o},c=this._parseEvent(t);let l=s;if(o&&(l=this._selfDestructFactory(e,t,r,l)),r&&(l=this._delegateFactory(e,r,l)),t!==c&&(l=this._namespaceFactory(t,l)),a.realCallback=l,a.event=t,a.realEvent=c,i[c]){if(i[c].includes(a))return}else i[c]=[];i[c].push(a),n.addEvent(e,c,l)},_cloneEvents(e,t){if(!this._events.has(e))return;const s=this._events.get(e);for(const e in s)for(const r of s[e])this._addEvent(t,r.event,r.callback,r.delegate,r.selfDestruct)},_removeEvent(e,t,s,o){if(!this._events.has(e))return;const i=this._events.get(e);if(!t){const t=Object.keys(i);for(const r of t)this._removeEvent(e,r,s,o);return}const a=this._parseEvent(t);i[a]&&(i[a]=i[a].filter(i=>{if(o&&o!==i.delegate||s&&s!==i.callback)return!0;if(a!==t){const e=r._eventNamespacedRegExp(t);if(!i.event.match(e))return!0}return n.removeEvent(e,i.realEvent,i.realCallback),!1}),i[a].length||delete i[a],Object.keys(i).length||this._events.delete(e))},_triggerEvent(e,t,s,o){const i=r._parseEvent(t),a={...s};return i!==t&&(a.namespace=t.substring(i.length+1),a.namespaceRegExp=r._eventNamespacedRegExp(t)),n.triggerEvent(e,i,a,o)}}),Object.assign(r,{_eventNamespacedRegExp:e=>new RegExp(`^${t.escapeRegExp(e)}(?:\\.|$)`,"i"),_parseClasses:e=>e.flat().flatMap(e=>e.split(" ")),_parseData(e,s,r=!1){const n=t.isObject(e)?e:{[e]:s},o={};for(const e in n){const s=n[e];o[e]=r&&(t.isObject(s)||t.isArray(s))?JSON.stringify(s):s}return o},_parseDataset(e){if(t.isUndefined(e))return e;const s=e.toLowerCase().trim();if(["true","on"].includes(s))return!0;if(["false","off"].includes(s))return!1;if("null"===s)return null;if(t.isNumeric(s))return parseFloat(s);if(["{","["].includes(s.charAt(0)))try{return JSON.parse(e)}catch(e){}return e},_parseEvent:e=>e.split(".").shift(),_parseEvents:e=>e.split(" "),_parseFormData(e){const s=new FormData;if(t.isArray(e)){const t={};for(const s of e)t[s.name]=s.value;e=t}return this._parseFormValues(e,s),s},_parseFormValues(e,s,r){let n;for(n in e){const o=e[n];if(r&&(n=`${r}[${n}]`),t.isPlainObject(o))this._parseFormValues(o,s,n);else if(t.isArray(o))for(const e of o)s.append(n,e);else s.set(n,o)}},_parseParam(e,s){return t.isArray(s)?s.map(t=>this._parseParam(e,t)).flat():t.isObject(s)?Object.keys(s).map(t=>this._parseParam(`${e}[${t}]`,s[t])).flat():`${e}=${s}`},_parseParams(e){let s=[];return t.isArray(e)?s=e.map(e=>this._parseParam(e.name,e.value)):t.isObject(e)&&(s=Object.keys(e).map(t=>this._parseParam(t,e[t]))),s.flatMap(encodeURI).join("&")},_prefixSelectors(e,t){return e.split(this._splitRegExp).filter(e=>!!e).map(e=>`${t} ${e}`)}}),Object.assign(r,{_clone(e,t=!0,s=!1,r=!1){const o=n.clone(e,t);return s||r?(s&&this._cloneEvents(e,o),r&&this._cloneData(e,o),t&&this._deepClone(e,o,s,r),o):o},_deepClone(e,s,r=!1,o=!1){const i=t.wrap(n.childNodes(e)),a=t.wrap(n.childNodes(s));for(let e=0;e<i.length;e++)r&&this._cloneEvents(i[e],a[e]),o&&this._cloneData(i[e],a[e]),this._deepClone(i[e],a[e])},_detach(e){const t=n.parent(e);t||n.removeChild(t,e)},_empty(e){const s=t.wrap(n.childNodes(e));for(const t of s)this._remove(t),n.removeChild(e,t);if(this._hasShadow(e)){const t=n.shadow(e);this._remove(t)}if(this._hasFragment(e)){const t=n.fragment(e);this._remove(t)}},_remove(e){n.triggerEvent(e,"remove"),this._empty(e),t.isElement(e)&&(this._clearQueue(e),this._stop(e),this._styles.has(e)&&this._styles.delete(e)),this._removeEvent(e),this._removeData(e)},_replaceWith(e,t){const s=n.parent(e);if(s){for(const r of t){const t=this._clone(r,!0);n.insertBefore(s,t,e)}this._remove(e),n.removeChild(s,e)}}}),Object.assign(r,{_unwrap(e,s){const r=n.parent(e,s);if(!r)return;const o=n.parent(r);if(!r)return;const i=t.wrap(n.childNodes(r));for(const e of i)n.insertBefore(o,e,r);this._remove(r),n.removeChild(o,r)},_wrap(e,t){const s=n.parent(e);if(!s)return;const r=t.map(e=>this._clone(e,!0));for(const t of r)n.insertBefore(s,t,e);const o=this._deepest(r.shift());n.insertBefore(o,e)},_wrapAll(e,t){const s=e.slice().shift();if(!s)return;const o=n.parent(s);if(!o)return;for(const e of t)n.insertBefore(o,e,s);const i=r._deepest(t.shift());for(const t of e)n.insertBefore(i,t)},_wrapInner(e,s){const r=t.wrap(n.childNodes(e)),o=s.map(e=>this._clone(e,!0));for(const t of o)n.insertBefore(e,t);const i=this._deepest(o.shift());for(const e of r)n.insertBefore(i,e)}}),Object.assign(r,{parseHTML:e=>(new DOMParser).parseFromString(e,"text/html"),parseXML:e=>(new DOMParser).parseFromString(e,"application/xml")}),Object.assign(r,{_findByCustom(e,s=this._context){const r=[];for(const n of s)t.merge(r,this.__findByCustom(e,n));return s.length>1&&r.length>1?t.unique(r):r},_findBySelector(e,s){const r=[];for(const o of s)t.merge(r,n.findBySelector(e,o));return s.length>1&&r.length>1?t.unique(r):r},_findOneByCustom(e,t){for(const s of t){const t=this.__findOneByCustom(e,s);if(t)return t}return null},_findOneBySelector(e,t){for(const s of t){const t=n.findOneBySelector(e,s);if(t)return t}return null},__findByCustom(e,s){const r=n.getAttribute(s,"id");n.setAttribute(s,"id",this._tempId);const o=n.parent(s),i=[];for(const s of e)t.merge(i,n.findBySelector(s,o));return r?n.setAttribute(s,"id",r):n.removeAttribute(s,"id"),e.length>1&&i.length>1?t.unique(i):i},__findOneByCustom(e,t){const s=n.getAttribute(t,"id");n.setAttribute(t,"id",this._tempId);const r=n.parent(t);if(!r)return null;let o=null;for(const t of e)if(o=n.findOneBySelector(t,r))break;return s?n.setAttribute(t,"id",s):n.removeAttribute(t,"id"),o}}),Object.assign(r,{_children(e,s,r=!1,o=!1){const i=t.wrap(o?n.children(e):n.childNodes(e)),a=[];let c;for(c of i)if((!s||s(c))&&(a.push(c),r))break;return a},_deepest:e=>t.wrap(n.findBySelector("*",e)).find(e=>!n.hasChildren(e))||e,_next(e,t){const s=[];return(e=n.next(e))?t&&!t(e)?s:(s.push(e),s):s},_nextAll(e,t,s,r=!1){const o=[];for(;(e=n.next(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!r)););return o},_parent(e,t){const s=[],r=n.parent(e);return r?t&&!t(r)?s:(s.push(r),s):s},_parents(e,s,r,o=!1){const i=[];for(;(e=n.parent(e))&&!t.isDocument(e)&&(!r||!r(e))&&(s&&!s(e)||(i.push(e),!o)););return i},_prev(e,t){const s=[];return(e=n.prev(e))?t&&!t(e)?s:(s.push(e),s):s},_prevAll(e,t,s,r=!1){const o=[];for(;(e=n.prev(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!r)););return o},_siblings(e,t,s=!0){const r=[],o=n.parent(e);if(!o)return r;const i=s?o.children:o.childNodes;let a;for(a of i)n.isSame(e,a)||t&&!t(a)||r.push(a);return r}}),Object.assign(r,{parseNodesFactory:e=>e?s=>(e.node?t.isNode(s):t.isElement(s))||e.fragment&&t.isFragment(s)||e.shadow&&t.isShadow(s)||e.document&&t.isDocument(s)||e.window&&t.isWindow(s):t.isElement}),Object.assign(r,{_hasAnimation(e){return this._animations.has(e)},_hasCSSAnimation(e){return!!parseFloat(this._css(e,"animation-duration"))},_hasCSSTransition(e){return!!parseFloat(this._css(e,"transition-duration"))},_hasData(e,t){return this._data.has(e)&&(!t||this._data.get(e).hasOwnProperty(t))},_hasFragment:e=>!!n.fragment(e),_hasShadow:e=>!!n.shadow(e),_isVisible:e=>t.isWindow(e)?n._isVisibleDocument(n.document(e)):t.isDocument(e)?n.isVisibleDocument(e):!!n.offsetParent(e)}),Object.assign(r,{_forceShow(e,s){if(t.isDocument(e)||t.isWindow(e)||this._isVisible(e))return s(e);const r=[];t.isElement(e)&&"none"===this._css(e,"display")&&r.push(e),t.merge(r,this._parents(e,e=>t.isElement(e)&&"none"===this._css(e,"display")));const o=new Map;for(const e of r)o.set(e,n.getAttribute(e,"style")),n.setStyle(e,"display","initial",!0);const i=s(e);for(const[e,t]of o)t?n.setAttribute(e,"style",t):n.removeAttribute(e,"style");return i},_sanitize(e,t,s=this.allowedTags){const r=this._tagName(e);if(!(r in s))return void n.removeChild(t,e);const o=[...s["*"],...s[r]],i=this._getAttribute(e);for(const t in i){!!o.find(e=>t.match(e))||n.removeAttribute(e,t)}const a=n.children(e);for(const t of a)this._sanitize(t,e,s)},_tagName:e=>n.tagName(e).toLowerCase()}),Object.assign(r,{_animating:!1,_animations:new Map,_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},allowedTags:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],_complexRegExp:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,_fastRegExp:/^([\#\.]?)([\w\-]+)$/,_localRegExp:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_splitRegExp:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,_tempId:`frost${Date.now().toString(16)}`});class n{}return Object.assign(n,{attributes:e=>e.attributes,dataset:e=>e.dataset,getAttribute:(e,t)=>e.getAttribute(t),getDataset(e,t){return this.dataset(e)[t]},getProperty:(e,t)=>e[t],removeAttribute(e,t){e.removeAttribute(t)},removeDataset(e,t){delete e.dataset[t]},removeProperty(e,t){delete e[t]},setAttribute(e,t,s){e.setAttribute(t,s)},setDataset(e,t,s){this.dataset(e)[t]=s},setProperty(e,t,s){e[t]=s}}),Object.assign(n,{offsetLeft:e=>e.offsetLeft,offsetTop:e=>e.offsetTop,rect:e=>e.getBoundingClientRect()}),Object.assign(n,{getScrollX:e=>e.scrollLeft,getScrollXWindow:e=>e.scrollX,getScrollY:e=>e.scrollTop,getScrollYWindow:e=>e.scrollY,setScrollWindow:(e,t,s)=>e.scroll(t,s),setScrollX(e,t){e.scrollLeft=t},setScrollY(e,t){e.scrollTop=t}}),Object.assign(n,{height:e=>e.clientHeight,heightWindow:(e,t)=>t?e.outerHeight:e.innerHeight,width:e=>e.clientWidth,widthWindow:(e,t)=>t?e.outerWidth:e.innerWidth}),Object.assign(n,{addClass(e,...t){e.classList.add(...t)},css:t=>e.getComputedStyle(t),getStyle(e,t){return this.style(e)[t]},removeClass(e,...t){e.classList.remove(...t)},setStyle(e,t,s,r){e.style.setProperty(t,s,r?"important":"")},style:e=>e.style,toggleClass(e,...t){e.classList.toggle(...t)}}),Object.assign(n,{blur(e){e.blur()},click(e){e.click()},focus(e){e.focus()}}),Object.assign(n,{addEvent(e,t,s){e.addEventListener(t,s)},removeEvent(e,t,s){e.removeEventListener(t,s)},triggerEvent(e,t,s,r){const n=new Event(t,{bubbles:!0,cancelable:!0,...r});return s&&Object.assign(n,s),e.dispatchEvent(n)}}),Object.assign(n,{attachShadow:(e,t=!0)=>e.attachShadow({mode:t?"open":"closed"}),clone:(e,t)=>e.cloneNode(t),create:(e,t)=>e.createElement(t),createComment:(e,t)=>e.createCommentNode(t),createFragment:e=>e.createDocumentFragment(),createRange:e=>e.createRange(),createText:(e,t)=>e.createTextNode(t)}),Object.assign(n,{removeChild(e,t){e.removeChild(t)}}),Object.assign(n,{insertBefore(e,t,s=null){e.insertBefore(t,s)}}),Object.assign(n,{findByClass:(e,t)=>t.getElementsByClassName(e),findById:(e,t)=>t.getElementById(e),findByTag:(e,t)=>t.getElementsByTagName(e),findBySelector:(e,t)=>t.querySelectorAll(e),findOneBySelector:(e,t)=>t.querySelector(e)}),Object.assign(n,{childNodes:e=>e.childNodes,children:e=>e.children,document:e=>e.document,documentElement:e=>e.documentElement,firstChild:e=>e.firstChild,fragment:e=>e.content,next:e=>e.nextSibling,offsetParent:e=>e.offsetParent,parent:e=>e.parentNode,prev:e=>e.previousSibling,scrollingElement:e=>e.scrollingElement,shadow:e=>e.shadowRoot}),Object.assign(n,{addRange(e,t){e.addRange(t)},collapse(e){e.collapse()},endContainer:e=>e.endContainer,extract:e=>e.extractContents(),getRange:(e,t=0)=>e.getRangeAt(t),getSelection:()=>e.getSelection(),insert(e,t){e.insertNode(t)},rangeCount:e=>e.rangeCount,removeRanges(e){e.removeAllRanges()},select(e,t){e.selectNode(t)},setEndAfter(e,t){e.setEndAfter(t)},setStartBefore(e,t){e.setStartBefore(t)},startContainer:e=>e.startContainer}),Object.assign(n,{contains:(e,t)=>e.contains(t),hasAttribute:(e,t)=>e.hasAttribute(t),hasChildren:e=>!!e.childElementCount,hasClass:(e,t)=>e.classList.contains(t),hasProperty:(e,t)=>e.hasOwnProperty(t),is:(e,s)=>t.isElement(e)&&e.matches(s),isConnected:e=>e.isConnected,isEqual:(e,t)=>e.isEqualNode(t),isSame:(e,t)=>e.isSameNode(t),isVisibleDocument:e=>"visible"===e.visibilityState}),Object.assign(n,{comparePosition:(e,t)=>e.compareDocumentPosition(t),normalize(e){e.normalize()},tagName:e=>e.tagName}),{DOM:r,DOMNode:n,dom:new r}});