!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t:Object.assign(e,t(e))}(this,(function(e){"use strict";if(!e)throw new Error("FrostDOM requires a Window.");if(!("Core"in e))throw new Error("FrostDOM requires FrostCore.");const t=e.Core,s=e.document;class n{constructor(s){if(this._settings=t.extend({},n.defaults,s),this._settings.url||(this._settings.url=e.location),!this._settings.cache){const e=new URL(this._settings.url);e.searchParams.append("_",Date.now()),this._settings.url=e.toString()}"Content-Type"in this._settings.headers||!this._settings.contentType||(this._settings.headers["Content-Type"]=this._settings.contentType),this._isLocal=n._localRegExp.test(location.protocol),this._isLocal||"X-Requested-With"in this._settings.headers||(this._settings.headers["X-Requested-With"]="XMLHttpRequest"),this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._promise=new Promise((e,t)=>{this._resolve=t=>{this._isResolved=!0,e(t)},this._reject=e=>{this._isRejected=!0,t(e)}}),this._build(),this._events(),this._send()}cancel(e="Request was cancelled"){this._isResolved||this._isRejected||this._isCancelled||(this._xhr.abort(),this._isCancelled=!0,this._settings.rejectOnCancel&&this._reject({status:this._xhr.status,xhr:this._xhr,reason:e}))}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}then(e,t){return this._promise.then(e,t)}}Object.assign(n.prototype,{_build(){this._xhr=new XMLHttpRequest,this._xhr.open(this._settings.method,this._settings.url,!0);for(const e in this._settings.headers)this._xhr.setRequestHeader(e,this._settings.headers[e]);this._settings.responseType&&(this._xhr.responseType=this._settings.responseType)},_events(){this._xhr.onload=e=>{this._xhr.status>400?this._reject({status:this._xhr.status,xhr:this._xhr,event:e}):this._resolve({response:this._xhr.response,xhr:this._xhr,event:e})},this._isLocal||(this._xhr.onerror=e=>this._reject({status:this._xhr.status,xhr:this._xhr,event:e})),this._settings.onProgress&&(this._xhr.onprogress=e=>this._settings.onProgress(e.loaded/e.total,this._xhr,e)),this._settings.onUploadProgress&&(this._xhr.upload.onprogress=e=>this._settings.onUploadProgress(e.loaded/e.total,this._xhr,e))},_send(){this._settings.beforeSend&&this._settings.beforeSend(this._xhr),this._settings.data&&this._settings.processData&&("application/json"===this._settings.contentType?this._settings.data=JSON.stringify(this._settings.data):"application/x-www-form-urlencoded"===this._settings.contentType?this._settings.data=n._parseParams(this._settings.data):this._settings.data=n._parseFormData(this._settings.data)),this._xhr.send(this._settings.data),this._settings.afterSend&&this._settings.afterSend(this._xhr)}}),Object.assign(n,{_parseFormData(e){const s=new FormData;if(t.isArray(e)){const t={};for(const s of e)t[s.name]=s.value;e=t}return this._parseFormValues(e,s),s},_parseFormValues(e,s,n){let r;for(r in e){const o=e[r];if(n&&(r=`${n}[${r}]`),t.isPlainObject(o))this._parseFormValues(o,s,r);else if(t.isArray(o))for(const e of o)s.append(r,e);else s.set(r,o)}},_parseParam(e,s){return t.isArray(s)?s.map(t=>this._parseParam(e,t)).flat():t.isObject(s)?Object.keys(s).map(t=>this._parseParam(`${e}[${t}]`,s[t])).flat():`${e}=${s}`},_parseParams(e){let s=[];return t.isArray(e)?s=e.map(e=>this._parseParam(e.name,e.value)):t.isObject(e)&&(s=Object.keys(e).map(t=>this._parseParam(t,e[t]))),s.flatMap(encodeURI).join("&")}}),Object.assign(n,{defaults:{afterSend:!1,beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,headers:{},method:"GET",onProgress:!1,onUploadProgress:!1,processData:!0,rejectOnCancel:!0,responseType:!1,url:!1},_localRegExp:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/}),Object.setPrototypeOf(n.prototype,Promise.prototype);class r{constructor(e=s){this._context=e}}Object.assign(r.prototype,{ajax:e=>new n(e),delete:(e,t)=>new n({url:e,method:"DELETE",...t}),get:(e,t)=>new n({url:e,...t}),patch:(e,t,s)=>new n({url:e,data:t,method:"PATCH",...s}),post:(e,t,s)=>new n({url:e,data:t,method:"POST",...s}),put:(e,t,s)=>new n({url:e,data:t,method:"PUT",...s}),upload:(e,t,s)=>new n({url:e,data:t,method:"POST",contentType:!1,...s})}),Object.assign(r.prototype,{loadScript:(t,s=!0)=>new n({url:t,cache:s}).then(t=>eval.call(e,t.response)),loadScripts:(t,s=!0)=>Promise.all(t.map(e=>new n({url:e,cache:s}))).then(t=>{for(const s of t)eval.call(e,s.response)})}),Object.assign(r.prototype,{loadStyle(e,t=!0){return new n({url:e,cache:t}).then(e=>o.insertBefore(this._context.head,this.create("style",{html:e.response})))},loadStyles(e,t=!0){return Promise.all(e.map(e=>new n({url:e,cache:t}))).then(e=>{for(const t of e)o.insertBefore(this._context.head,this.create("style",{html:t.response}))})}}),Object.assign(r.prototype,{getCookie(e,t=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(t=>t.trimStart().substring(0,e.length)===e);if(!s)return null;const n=s.trimStart().substring(e.length+1);return t?JSON.parse(n):n},removeCookie(e,t){this.setCookie(e,"",{expires:-1,...t})},setCookie(e,t,s,n=!1){if(!e)return;n&&(t=JSON.stringify(t));let r=`${e}=${t}`;if(s){if(s.expires){let e=new Date;e.setTime(e.getTime()+1e3*s.expires),r+=`;expires=${e.toUTCString()}`}s.path&&(r+=`;path=${s.path}`),s.secure&&(r+=";secure")}this._context.cookie=r}}),Object.assign(r.prototype,{animate(e,t,s){e=this.parseNodes(e),s={...r.animationDefaults,...s};const n=e.map(e=>r._animate(e,t,s));return r._start(),Promise.all(n)},stop(e,t=!0){e=this.parseNodes(e);for(const s of e)r._stop(s,t)}}),Object.assign(r.prototype,{dropIn(e,t){return this.slideIn(e,{direction:"top",...t})},dropOut(e,t){return this.slideOut(e,{direction:"top",...t})},fadeIn(e,t){return this.animate(e,(e,t)=>o.setStyle(e,"opacity",t<1?t:""),t)},fadeOut(e,t){return this.animate(e,(e,t)=>o.setStyle(e,"opacity",t<1?1-t:""),t)},rotateIn(e,t){return this.animate(e,(e,t,s)=>o.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*t)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},rotateOut(e,t){return this.animate(e,(e,t,s)=>o.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*t*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},slideIn(e,s){return this.animate(e,(e,s,n)=>{if(1===s)return o.setStyle(e,"overflow",""),void(n.useGpu?o.setStyle(e,"transform",""):(o.setStyle(e,"margin-left",""),o.setStyle(e,"margin-top","")));const i=t.isFunction(n.direction)?n.direction():n.direction;let a,c,h;"top"===i||"bottom"===i?(a=n.useGpu?"Y":"margin-top",c=r._height(e),h="top"===i):(a=n.useGpu?"X":"margin-left",c=r._width(e),h="left"===i);const l=(c-c*s)*(h?-1:1);n.useGpu?o.setStyle(e,"transform",`translate${a}(${l}px)`):o.setStyle(e,a,`${l}px`)},{direction:"bottom",useGpu:!0,...s})},slideOut(e,s){return this.animate(e,(e,s,n)=>{if(1===s)return o.setStyle(e,"overflow",""),void(n.useGpu?o.setStyle(e,"transform",""):(o.setStyle(e,"margin-left",""),o.setStyle(e,"margin-top","")));const i=t.isFunction(n.direction)?n.direction():n.direction;let a,c,h;"top"===i||"bottom"===i?(a=n.useGpu?"Y":"margin-top",c=r._height(e),h="top"===i):(a=n.useGpu?"X":"margin-left",c=r._width(e),h="left"===i);const l=c*s*(h?-1:1);n.useGpu?o.setStyle(e,"transform",`translate${a}(${l}px)`):o.setStyle(e,a,`${l}px`)},{direction:"bottom",useGpu:!0,...s})},squeezeIn(e,s){e=this.parseNodes(e),s={...r.animationDefaults,direction:"bottom",useGpu:!0,...s};const n=e.map(e=>{const n=o.getStyle(e,"height"),i=o.getStyle(e,"width");return o.setStyle(e,"overflow","hidden"),r._animate(e,(e,s,a)=>{if(o.setStyle(e,"height",n),o.setStyle(e,"width",i),1===s)return o.setStyle(e,"overflow",""),void(a.useGpu?o.setStyle(e,"transform",""):(o.setStyle(e,"margin-left",""),o.setStyle(e,"margin-top","")));const c=t.isFunction(a.direction)?a.direction():a.direction;let h,l;"top"===c||"bottom"===c?(h="height","top"===c&&(l=a.useGpu?"Y":"margin-top")):"left"!==c&&"right"!==c||(h="width","left"===c&&(l=a.useGpu?"X":"margin-left"));const d=r[`_${h}`](e),p=d*s;if(o.setStyle(e,h,`${p}px`),l){const t=d-p;a.useGpu?o.setStyle(e,"transform",`translate${l}(${t}px)`):o.setStyle(e,l,`${t}px`)}},s)});return r._start(),Promise.all(n)},squeezeOut(e,s){e=this.parseNodes(e),s={...r.animationDefaults,direction:"bottom",useGpu:!0,...s};const n=e.map(e=>{const n=o.getStyle(e,"height"),i=o.getStyle(e,"width");return o.setStyle(e,"overflow","hidden"),r._animate(e,(e,s,a)=>{if(o.setStyle(e,"height",n),o.setStyle(e,"width",i),1===s)return o.setStyle(e,"overflow",""),void(a.useGpu?o.setStyle(e,"transform",""):(o.setStyle(e,"margin-left",""),o.setStyle(e,"margin-top","")));const c=t.isFunction(a.direction)?a.direction():a.direction;let h,l;"top"===c||"bottom"===c?(h="height","top"===c&&(l=a.useGpu?"Y":"margin-top")):"left"!==c&&"right"!==c||(h="width","left"===c&&(l=a.useGpu?"X":"margin-left"));const d=r[`_${h}`](e),p=d-d*s;if(o.setStyle(e,h,`${p}px`),l){const t=d-p;a.useGpu?o.setStyle(e,"transform",`translate${l}(${t}px)`):o.setStyle(e,l,`${t}px`)}},s)});return r._start(),Promise.all(n)}}),Object.assign(r.prototype,{clearQueue(e){e=this.parseNodes(e);for(const t of e)r._clearQueue(t)},queue(e,t){e=this.parseNodes(e);for(const s of e)r._queue(s,t)}}),Object.assign(r.prototype,{getAttribute(e,t){const s=this.parseNode(e);if(s)return r._getAttribute(s,t)},getDataset(e,t){const s=this.parseNode(e);if(s)return r._getDataset(s,t)},getHTML(e){return this.getProperty(e,"innerHTML")},getProperty(e,t){const s=this.parseNode(e);if(s)return o.getProperty(s,t)},getText(e){return this.getProperty(e,"innerText")},getValue(e){return this.getProperty(e,"value")},removeAttribute(e,t){e=this.parseNodes(e);for(const s of e)o.removeAttribute(s,t)},removeDataset(e,t){e=this.parseNodes(e);for(const s of e)r._removeDataset(s,t)},removeProperty(e,t){e=this.parseNodes(e);for(const s of e)o.removeProperty(s,t)},setAttribute(e,t,s){e=this.parseNodes(e);const n=r._parseData(t,s);for(const t of e)r._setAttribute(t,n)},setDataset(e,t,s){e=this.parseNodes(e);const n=r._parseData(t,s,!0);for(const t of e)r._setDataset(t,n)},setHTML(e,t){this.empty(e),this.setProperty(e,"innerHTML",t)},setProperty(e,t,s){e=this.parseNodes(e);const n=r._parseData(t,s);for(const t of e)for(const e in n)o.setProperty(t,e,n[e])},setText(e,t){this.empty(e),this.setProperty(e,"innerText",t)},setValue(e,t){this.setProperty(e,"value",t)}}),Object.assign(r.prototype,{cloneData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)r._cloneData(s,e)},getData(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return r._getData(s,t)},removeData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)r._removeData(s,t)},setData(e,t,s){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});const n=r._parseData(t,s);for(const t of e)r._setData(t,n)}}),Object.assign(r.prototype,{center(e,t){const s=this.rect(e,t);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(e,t){const s=this.rect(t);if(s){e=this.parseNodes(e);for(const t of e)r._constrain(t,s)}},distTo(e,s,n,r){const o=this.center(e,r);if(o)return t.dist(o.x,o.y,s,n)},distToNode(e,t){const s=this.center(t);if(s)return this.distTo(e,s.x,s.y)},nearestTo(e,t,s,n){let r=null,o=Number.MAX_VALUE;e=this.parseNodes(e);for(const i of e){const e=this.distTo(i,t,s,n);e&&e<o&&(o=e,r=i)}return r},nearestToNode(e,t){const s=this.center(t);if(s)return this.nearestTo(e,s.x,s.y)},percentX(e,s,n,r=!0){const o=this.rect(e,n);if(!o)return;const i=(s-o.left)/o.width*100;return r?t.clampPercent(i):i},percentY(e,s,n){const r=this.rect(e,n);if(!r)return;const o=(s-r.top)/r.height*100;return clamp?t.clampPercent(o):o},position(e,t){const s=this.parseNode(e);if(s)return r._position(s,t)},rect(e,t){const s=this.parseNode(e);if(s)return r._rect(s,t)}}),Object.assign(r.prototype,{getScrollX(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?o.getScrollXWindow(s):t.isDocument(s)?r._getScrollXDocument(s):o.getScrollX(s)},getScrollY(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?o.getScrollYWindow(s):t.isDocument(s)?r._getScrollYDocument(s):o.getScrollY(s)},setScroll(e,s,n){e=this.parseNodes(e,{document:!0,window:!0});for(const i of e)t.isWindow(i)?o.setScrollWindow(i,s,n):t.isDocument(i)?r._setScrollDocument(i,s,n):r._setScroll(i,s,n)},setScrollX(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const n of e)t.isWindow(n)?r._setScrollXWindow(n,s):t.isDocument(n)?r._setScrollXDocument(n,s):o.setScrollX(n,s)},setScrollY(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const n of e)t.isWindow(n)?r._setScrollYWindow(n,s):t.isDocument(n)?r._setScrollYDocument(n,s):o.setScrollY(n,s)}}),Object.assign(r.prototype,{height(e,s,n,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?o.heightWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?r._height(o.documentElement(a),!!t.isUndefined(s)||s,n,i):r._height(a,s,n,i)},width(e,s,n,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?o.widthWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?r._width(o.documentElement(a),!!t.isUndefined(s)||s,n,i):r._width(a,s,n,i)}}),Object.assign(r.prototype,{addClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)o.addClass(s,...t)},css(e,t){const s=this.parseNode(e);if(s)return r._css(s,t)},getStyle(e,t){const s=this.parseNode(e);if(s)return r._getStyle(s,t)},hide(e){this.setStyle(e,"display","none")},removeClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)o.removeClass(s,...t)},setStyle(e,t,s,n){e=this.parseNodes(e);const o=r._parseData(t,s);for(const t of e)r._setStyle(t,o,n)},show(e){this.setStyle(e,"display","")},toggle(e){e=this.parseNodes(e);for(const t of e)"none"===o.getStyle(t,"display")?o.setStyle(t,"display",""):o.setStyle(t,"display","none")},toggleClass(e,...t){if(e=this.parseNodes(e),(t=r._parseClasses(t)).length)for(const s of e)o.toggleClass(s,...t)}}),Object.assign(r.prototype,{mouseDragFactory:(s,n,o,i=!0)=>(n&&i&&(n=t.animation(n),o&&(o=t.animation(o))),t=>{if(s&&!1===s(t))return!1;n&&r._addEvent(e,"mousemove",n),(n||o)&&r._addEvent(e,"mouseup",t=>{n&&r._removeEvent(e,"mousemove",n),o&&o(t)},!1,!0)})}),Object.assign(r.prototype,{blur(e){const t=this.parseNode(e);t&&o.blur(t)},click(e){const t=this.parseNode(e);t&&o.click(t)},focus(e){const t=this.parseNode(e);t&&o.focus(t)},ready(t){"complete"!==this._context.readyState?r._addEvent(e,"DOMContentLoaded",t):t()}}),Object.assign(r.prototype,{addEvent(e,t,s,n,o){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const i of e)for(const e of r._parseEvents(t))r._addEvent(i,e,s,n,o)},addEventDelegate(e,t,s,n){this.addEvent(e,t,n,s)},addEventDelegateOnce(e,t,s,n){this.addEvent(e,t,n,s,!0)},addEventOnce(e,t,s){this.addEvent(e,t,s,null,!0)},cloneEvents(e,t){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)r._cloneEvents(s,e)},removeEvent(e,t,s,n){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=!!t&&r._parseEvents(t);for(const o of e)if(r._events.has(o))if(t)for(const e of t)r._removeEvent(o,e,s,n);else r._removeEvent(o,t,s,n)},removeEventDelegate(e,t,s,n){this.removeEvent(e,t,n,s)},triggerEvent(e,t,s,n){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=r._parseEvents(t);for(const o of e)for(const e of t)r._triggerEvent(o,e,s,n)}}),Object.assign(r.prototype,{attachShadow(e,t=!0){const s=this.parseNode(e);if(s)return o.attachShadow(s,t)},create(e="div",s){const n=o.create(this._context,e);return s?("html"in s?o.setProperty(n,"innerHTML",s.html):"text"in s&&o.setProperty(n,"innerText",s.text),"class"in s&&o.addClass(n,...r._parseClasses(t.wrap(s.class))),"style"in s&&r._setStyle(n,s.style),"value"in s&&o.setProperty(n,"value",s.value),"attributes"in s&&r._setAttribute(n,s.attributes),"properties"in s&&r._setProperty(n,s.properties),"dataset"in s&&r._setDataset(n,s.dataset),n):n},createComment(e){return o.createComment(this._context,e)},createFragment(){return o.createFragment(this._context)},createRange(){return o.createRange(this._context)},createText(e){return o.createText(this._context,e)},parseHTML(e){return t.wrap(o.children(this.createRange().createContextualFragment(e)))}}),Object.assign(r.prototype,{clone(e,t=!0,s=!1,n=!1){return(e=this.parseNodes(e,{node:!0,fragment:!0})).map(e=>r._clone(e,t,s,n))},detach(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=o.parent(t);e&&o.removeChild(e,t)}},empty(e){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});for(const t of e)r._empty(t)},remove(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=o.parent(t);e&&(r._remove(t),o.removeChild(e,t))}},replaceAll(e,t){this.replaceWith(t,e)},replaceWith(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const s of e)r._replaceWith(s,t)}}),Object.assign(r.prototype,{after(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=o.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)o.insertBefore(n,e,o.next(s))}},append(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(s){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)o.insertBefore(s,e)}},appendTo(e,t){this.append(t,e)},before(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=o.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)o.insertBefore(n,e,s)}},insertAfter(e,t){this.after(t,e)},insertBefore(e,t){this.before(t,e)},prepend(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(!s)return;const n=o.firstChild(s);t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)o.insertBefore(s,e,n)},prependTo(e,t){this.prepend(t,e)}}),Object.assign(r.prototype,{unwrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseFilter(t);for(const s of e)r._unwrap(s,t)},wrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)r._wrap(s,t)},wrapAll(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});const s=this.clone(t,!0);r._wrapAll(e,s)},wrapInner(e,t){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)r._wrapInner(s,t)}}),Object.assign(r.prototype,{connected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>o.isConnected(e))},equal(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>o.isEqual(e,t)))},filter(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>!t||t(e,s))},filterOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>!t||t(e,s))||null},fixed(e){return this.parseNodes(e,{node:!0}).filter(e=>t.isElement(e)&&"fixed"===r._css(e,"position")||r._parents(e,e=>t.isElement(e)&&"fixed"===r._css(e,"position"),!1,!0).length)},hidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>!r._isVisible(e))},not(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>t&&!t(e,s))},notOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>t&&!t(e,s))},same(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>o.isSame(e,t)))},visible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>r._isVisible(e))},withAnimation(e){return this.parseNodes(e).filter(e=>r._hasAnimation(e))},withAttribute(e,t){return this.parseNodes(e).filter(e=>o.hasAttribute(e,t))},withChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter(e=>o.hasChildren(e))},withClass(e,...t){return t=r._parseClasses(t),this.parseNodes(e).filter(e=>t.some(t=>o.hasClass(e,t)))},withCSSAnimation(e){return this.parseNodes(e).filter(e=>r._hasCSSAnimation(e))},withCSSTransition(e){return this.parseNodes(e).filter(e=>r._hasCSSTransition(e))},withData(e,t){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(e=>r._hasData(e,t))},withDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter((e,s)=>!t||t(e,s))},withProperty(e,t){return this.parseNodes(e).filter(e=>o.hasProperty(e,t))}}),Object.assign(r.prototype,{find(e,s=this._context){const n=e.match(r._fastRegExp);if(n)return"#"===n[1]?this.findById(n[2],s):"."===n[1]?this.findByClass(n[2],s):this.findByTag(n[2],s);if(e.match(r._complexRegExp)){const n=r._prefixSelectors(e,`#${r._tempId} `);return t.isElement(s)?r.__findByCustom(n,s):(s=this.parseNodes(s),r._findByCustom(n,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?t.wrap(o.findBySelector(e,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),r._findBySelector(e,s))},findByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(o.findByClass(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const r of s)t.merge(n,o.findByClass(e,r));return s.length>1&&n.length>1?t.unique(n):n},findById(e,t=this._context){const s=this.findOneById(e,t);return s?[s]:[]},findByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(o.findByTag(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const r of s)t.merge(n,o.findByTag(e,r));return s.length>1&&n.length>1?t.unique(n):n},findOne(e,s=this._context){const n=e.match(r._fastRegExp);if(n)return"#"===n[1]?this.findOneById(n[2],s):"."===n[1]?this.findOneByClass(n[2],s):this.findOneByTag(n[2],s);if(e.match(r._complexRegExp)){const n=r._prefixSelectors(e,`#${r._tempId} `);return t.isElement(s)?r.__findOneByCustom(n,s):(s=this.parseNodes(s),r._findOneByCustom(n,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?o.findOneBySelector(e,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),r._findOneBySelector(e,s))},findOneByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return o.findByClass(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=o.findByClass(e,t).item(0);if(s)return s}return null},findOneById(e,s=this._context){const n=o.findById(e,this._context);return n?t.isDocument(s)?n:t.isElement(s)?o.contains(s,n)?n:null:(s=this.parseNodes(s)).some(e=>o.contains(e,n))?n:null:null},findOneByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return o.findByTag(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=o.findByTag(e,t).item(0);if(s)return s}return null}}),Object.assign(r.prototype,{child(e,t){return this.children(e,t,!0)},children(e,s,n=!1,o=!0){if(s=this.parseFilter(s),t.isElement(e)||t.isDocument(e)||t.isFragment(e)||t.isShadow(e))return r._children(e,s,n,o);e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});const i=[];for(const a of e)t.merge(i,r._children(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},closest(e,t,s){return this.parents(e,t,s,!0)},commonAncestor(e){if(!(e=this.sort(e)).length)return;const t=this.createRange();return 1===e.length?o.select(t,e.shift()):(o.setStartBefore(t,e.shift()),o.setEndAfter(t,e.pop())),t.commonAncestorContainer},contents(e){return this.children(e,!1,!1,!1)},fragment(e){const t=this.parseNode(e);if(t)return o.fragment(t)},next(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._next(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._next(o,s));return e.length>1&&n.length>1?t.unique(n):n},nextAll(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._nextAll(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._nextAll(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},offsetParent(e){return this.forceShow(e,e=>o.offsetParent(e))},parent(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._parent(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._parent(o,s));return e.length>1&&n.length>1?t.unique(n):n},parents(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._parents(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._parents(a,s,n,o));return e.length>1&&i.length>1?t.unique(i):i},prev(e,s){if(s=this.parseFilter(s),t.isNode(e))return r._prev(e,s);e=this.parseNodes(e,{node:!0});const n=[];for(const o of e)t.merge(n,r._prev(o,s));return e.length>1&&n.length>1?t.unique(n):n},prevAll(e,s,n,o=!1){if(s=this.parseFilter(s),n=this.parseFilter(n),t.isNode(e))return r._prevAll(e,s,n,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,r._prevAll(a,s,n,o));return e.length>1&&i.length?t.unique(i):i},shadow(e){const t=this.parseNode(e);if(t)return o.shadow(t)},siblings(e,s,n=!0){if(s=this.parseFilter(s),t.isNode(e))return r._siblings(e,s,n);e=this.parseNodes(e,{node:!0});const o=[];for(const i of e)t.merge(o,r._siblings(i,s,n));return e.length>1&&o.length>1?t.unique(o):o}}),Object.assign(r.prototype,{parseFilter(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>o.is(t,e):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>o.isSame(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.includes(t)))},parseFilterContains(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>!!this.findOne(e,t):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>o.contains(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.some(e=>o.contains(t,e))))},parseNode(e,s={}){if(t.isString(e)){if("html"in s&&s.html&&"<"===e.trim().charAt(0))return this.parseHTML(e).shift();const t=this.findOne(e,"context"in s?s.context:this._context);return t||null}const n=r.parseNodesFactory(s);if(n(e))return e;const o=t.wrap(e).slice().shift();return o&&n(o)?o:null},parseNodes(e,s={}){if(t.isString(e))return"html"in s&&s.html&&"<"===e.trim().charAt(0)?this.parseHTML(e):this.find(e,"context"in s?s.context:this._context);const n=r.parseNodesFactory(s);return n(e)?[e]:t.wrap(e).filter(n)}}),Object.assign(r.prototype,{afterSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=o.getSelection();if(!o.rangeCount(t))return;const s=o.getRange(t);o.removeRanges(t),o.collapse(s);for(const t of e)o.insert(s,t)},beforeSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=o.getSelection();if(!o.rangeCount(t))return;const s=o.getRange(t);o.removeRanges(t);for(const t of e)o.insert(s,t)},extractSelection(){const e=o.getSelection();if(!o.rangeCount(e))return[];const s=o.getRange(e);o.removeRanges(e);const n=o.extract(s);return t.wrap(o.childNodes(n))},getSelection(){const e=o.getSelection();if(!o.rangeCount(e))return[];const s=o.getRange(e),n=t.wrap(o.findBySelector("*",s.commonAncestorContainer));if(!n.length)return[s.commonAncestorContainer];if(1===n.length)return n;const r=o.startContainer(s),i=o.endContainer(s),a=t.isElement(r)?r:o.parent(r),c=t.isElement(i)?i:o.parent(i);return n.slice(n.indexOf(a),n.indexOf(c)+1)},select(e){const t=this.parseNode(e,{node:!0,fragment:!0,shadow:!0});if(t&&"select"in t)return t.select();const s=o.getSelection();if(o.rangeCount(s)>0&&o.removeRanges(s),!t)return;const n=this.createRange();o.select(n,t),o.addRange(s,n)},selectAll(e){e=this.sort(e);const t=o.getSelection();if(o.rangeCount(t)&&o.removeRanges(t),!e.length)return;const s=this.createRange();1==e.length?o.select(s,e.shift()):(o.setStartBefore(s,e.shift()),o.setEndAfter(s,e.pop())),o.addRange(t,s)},wrapSelection(e){e=this.parseNodes(e,{fragment:!0,html:!0});const s=o.getSelection();if(!o.rangeCount(s))return;const n=o.getRange(s);o.removeRanges(s);const i=o.extract(n),a=r._deepest(e.slice().shift()),c=t.wrap(o.childNodes(i));for(const e of c)o.insertBefore(a,e);for(const t of e)o.insert(n,t)}}),Object.assign(r.prototype,{hasAnimation(e){return this.parseNodes(e).some(e=>r._hasAnimation(e))},hasAttribute(e,t){return this.parseNodes(e).some(e=>o.hasAttribute(e,t))},hasChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>o.hasChildren(e))},hasClass(e,...t){return t=r._parseClasses(t),this.parseNodes(e).some(e=>t.some(t=>o.hasClass(e,t)))},hasCSSAnimation(e){return this.parseNodes(e).some(e=>r._hasCSSAnimation(e))},hasCSSTransition(e){return this.parseNodes(e).some(e=>r._hasCSSTransition(e))},hasData(e,t){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}).some(e=>r._hasData(e,t))},hasDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>!t||t(e))},hasFragment(e){return this.parseNodes(e).some(e=>r._hasFragment(e))},hasProperty(e,t){return this.parseNodes(e).some(e=>o.hasProperty(e,t))},hasShadow(e){return this.parseNodes(e).some(e=>r._hasShadow(e))},is(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>!t||t(e))},isConnected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>o.isConnected(e))},isEqual(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>o.isEqual(e,t)))},isFixed(e){return this.parseNodes(e,{node:!0}).some(e=>t.isElement(e)&&"fixed"===r._css(e,"position")||r._parents(e,e=>t.isElement(e)&&"fixed"===r._css(e,"position"),!1,!0).length)},isHidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>!r._isVisible(e))},isSame(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>o.isSame(e,t)))},isVisible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>r._isVisible(e))}}),Object.assign(r.prototype,{exec(e,t=null){return this._context.execCommand(e,!1,t)},forceShow(e,t){const s=this.parseNode(e,{node:!0,document:!0,window:!0});if(s)return r._forceShow(s,t)},index(e){const s=this.parseNode(e,{node:!0});if(s)return t.wrap(o.children(o.parent(s))).indexOf(s)},indexOf(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).findIndex(e=>!t||t(e))},normalize(e){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0});for(const t of e)o.normalize(t)},sanitize(e,t=r.allowedTags){const s=this.create("template",{html:e}),n=o.fragment(s),i=o.children(n);for(const e of i)r._sanitize(e,n,t);return this.getHTML(s)},serialize(e){return n._parseParams(this.serializeArray(e))},serializeArray(e){return this.parseNodes(e,{fragment:!0,shadow:!0}).reduce((e,s)=>{if(o.is(s,"form")||t.isFragment(s)||t.isShadow(s))return e.concat(this.serializeArray(o.findBySelector("input, select, textarea",s)));if(o.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return e;const n=o.getAttribute(s,"name");if(!n)return e;const r=o.getAttribute(s,"value")||"";return e.push({name:n,value:r}),e},[])},sort(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).sort((e,t)=>{if(o.isSame(e,t))return 0;const s=o.comparePosition(e,t);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})},tagName(e){const t=this.parseNode(e);if(t)return o.tagName(t)}}),Object.assign(r,{_animate(e,s,n){r._hasAnimation(e)||this._animations.set(e,[]);const o=performance.now();return new Promise((r,i)=>{this._animations.get(e).push((a=!1,c=!1)=>{if(a&&!c)return i(e),!0;let h;return c?h=1:(h=(performance.now()-o)/n.duration,n.infinite?h%=1:h=t.clamp(h),"ease-in"===n.type?h=Math.pow(h,2):"ease-out"===n.type?h=Math.sqrt(h):"ease-in-out"===n.type&&(h=h<=.5?2*Math.pow(h,2):1-(1-h)**2*2)),s(e,h,n),1===h?(r(e),!0):void 0})})},_animationFrame(){for(let[e,t]of this._animations)(t=t.filter(e=>!e())).length?this._animations.set(e,t):this._animations.delete(e);this._animations.size?e.requestAnimationFrame(e=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(e,t=!0){if(!r._hasAnimation(e))return;const s=this._animations.get(e);for(const e of s)e(!0,t);this._animations.delete(e)}}),Object.assign(r,{_clearQueue(e){this._queues.has(e)&&this._queues.delete(e)},_dequeueNode(e){if(!this._queues.has(e))return;const t=this._queues.get(e).shift();t?Promise.resolve(t(e)).finally(t=>this._dequeueNode(e)):this._queues.delete(e)},_queue(e,t){const s=!this._queues.has(e);s&&this._queues.set(e,[]),this._queues.get(e).push(t),s&&this._dequeueNode(e)}}),Object.assign(r,{_getAttribute(e,t){if(t)return o.getAttribute(e,t);const s=o.attributes(e),n={};for(const e of s)n[e.nodeName]=e.nodeValue;return n},_getDataset(e,s){if(s)return s=t.camelCase(s),r._parseDataset(o.getDataset(e,s));const n=o.dataset(e),i={};for(const e in n)i[e]=r._parseDataset(n[e]);return i},_removeDataset(e,s){s=t.camelCase(s),o.removeDataset(e,s)},_setAttribute(e,t){for(const s in t)o.setAttribute(e,s,t[s])},_setDataset(e,s){for(const n in s){const r=t.camelCase(n);o.setDataset(e,r,s[n])}}}),Object.assign(r,{_cloneData(e,t){this._data.has(e)&&this._setData(t,{...this._data.get(e)})},_getData(e,t){if(this._data.has(e))return t?this._data.get(e)[t]:this._data.get(e)},_removeData(e,t){if(this._data.has(e)){if(t){const s=this._data.get(e);if(delete s[t],Object.keys(s).length)return}this._data.delete(e)}},_setData(e,t){this._data.has(e)||this._data.set(e,{}),Object.assign(this._data.get(e),t)}}),Object.assign(r,{_constrain(e,t){const s=this._rect(e),n={};let r,o;s.height>t.height&&(n.height=t.height),s.width>t.width&&(n.width=t.width),s.left-t.left<0?r=s.left-t.left:s.right-t.right>0&&(r=s.right-t.right),r&&(n.left=`${parseFloat(this._css(e,"left"))-r}px`),s.top-t.top<0?o=s.top-t.top:s.bottom-t.bottom>0&&(o=s.bottom-t.bottom),o&&(n.top=`${parseFloat(this._css(e,"top"))-o}px`),this._setStyle(e,n)},_position(e,t){return this._forceShow(e,e=>{const s={x:o.offsetLeft(e),y:o.offsetTop(e)};if(t){let t=e;for(;t=o.offsetParent(t);)s.x+=o.offsetLeft(t),s.y+=o.offsetTop(t)}return s})},_rect(t,s){return this._forceShow(t,t=>{const n=o.rect(t);return s&&(n.x+=o.getScrollXWindow(e),n.y+=o.getScrollYWindow(e)),n})}}),Object.assign(r,{_getScrollXDocument:e=>o.getScrollX(o.scrollingElement(e)),_getScrollYDocument:e=>o.getScrollY(o.scrollingElement(e)),_setScroll(e,t,s){o.setScrollX(e,t),o.setScrollY(e,s)},_setScrollDocument(e,t,s){return this._setScroll(o.scrollingElement(e),t,s)},_setScrollXDocument:(e,t)=>o.setScrollX(o.scrollingElement(e),t),_setScrollXWindow:(e,t)=>o.setScrollWindow(e,t,o.getScrollYWindow(e)),_setScrollYDocument:(e,t)=>o.setScrollY(o.scrollingElement(e),t),_setScrollYWindow:(e,t)=>o.setScrollWindow(e,o.getScrollXWindow(e),t)}),Object.assign(r,{_height(e,t=!0,s,n){return this._forceShow(e,e=>{let r=o.height(e);return t||(r-=parseInt(this._css(e,"padding-top"))+parseInt(this._css(e,"padding-bottom"))),s&&(r+=parseInt(this._css(e,"border-top-width"))+parseInt(this._css(e,"border-bottom-width"))),n&&(r+=parseInt(this._css(e,"margin-top"))+parseInt(this._css(e,"margin-bottom"))),r})},_width(e,t=!0,s,n){return this._forceShow(e,e=>{let r=o.width(e);return t||(r-=parseInt(this._css(e,"padding-left"))+parseInt(this._css(e,"padding-right"))),s&&(r+=parseInt(this._css(e,"border-left-width"))+parseInt(this._css(e,"border-right-width"))),n&&(r+=parseInt(this._css(e,"margin-left"))+parseInt(this._css(e,"margin-right"))),r})}}),Object.assign(r,{_css(e,s){return this._styles.has(e)||this._styles.set(e,o.css(e)),s?(s=t.snakeCase(s),this._styles.get(e).getPropertyValue(s)):{...this._styles.get(e)}},_getStyle(e,s){if(s)return s=t.snakeCase(s),o.getStyle(e,s);const n=o.style(e),r={};for(const t of n)r[t]=o.getStyle(e,t);return r},_setStyle(e,s,n){for(let r in s){let i=s[r];r=t.snakeCase(r),i&&t.isNumeric(i)&&!this.cssNumberProperties.includes(r)&&(i+="px"),o.setStyle(e,r,i,n)}}}),Object.assign(r,{_delegateFactory(e,s,n){const i=s.match(r._complexRegExp)?this._getDelegateContainsFactory(e,s):this._getDelegateMatchFactory(e,s);return s=>{if(o.isSame(s.target,e))return;const r=i(s.target);if(!r)return;const a={};for(const e in s)a[e]=t.isFunction(s[e])?(...t)=>s[e](...t):s[e];return a.currentTarget=r,a.delegateTarget=e,a.originalEvent=s,Object.freeze(a),n(a)}},_getDelegateContainsFactory(e,t){return t=r._prefixSelectors(selectors,`#${r._tempId}`),s=>{const n=this.__findByCustom(t,e);return!!n.length&&(n.includes(s)?s:this._parents(s,e=>n.includes(e),t=>o.isSame(e,t),!0).shift())}},_getDelegateMatchFactory(e,t){return s=>o.is(s,t)?s:this._parents(s,e=>o.is(e,t),t=>o.isSame(e,t),!0).shift()},_namespaceFactory:(e,t)=>s=>{if(!("namespaceRegExp"in s)||s.namespaceRegExp.test(e))return t(s)},_selfDestructFactory(e,t,s,n){return r=>(s?this._removeEvent(e,t,n,s):this._removeEvent(e,t,n),n(r))}}),Object.assign(r,{_addEvent(e,t,s,n,r){this._events.has(e)||this._events.set(e,{});const i=this._events.get(e),a={delegate:n,callback:s,selfDestruct:r},c=this._parseEvent(t);let h=s;if(r&&(h=this._selfDestructFactory(e,t,n,h)),n&&(h=this._delegateFactory(e,n,h)),t!==c&&(h=this._namespaceFactory(t,h)),a.realCallback=h,a.event=t,a.realEvent=c,i[c]){if(i[c].includes(a))return}else i[c]=[];i[c].push(a),o.addEvent(e,c,h)},_cloneEvents(e,t){if(!this._events.has(e))return;const s=this._events.get(e);for(const e in s)for(const n of s[e])this._addEvent(t,n.event,n.callback,n.delegate,n.selfDestruct)},_removeEvent(e,t,s,n){if(!this._events.has(e))return;const i=this._events.get(e);if(!t){const t=Object.keys(i);for(const r of t)this._removeEvent(e,r,s,n);return}const a=this._parseEvent(t);i[a]&&(i[a]=i[a].filter(i=>{if(n&&n!==i.delegate||s&&s!==i.callback)return!0;if(a!==t){const e=r._eventNamespacedRegExp(t);if(!i.event.match(e))return!0}return o.removeEvent(e,i.realEvent,i.realCallback),!1}),i[a].length||delete i[a],Object.keys(i).length||this._events.delete(e))},_triggerEvent(e,t,s,n){const i=r._parseEvent(t),a={...s};return i!==t&&(a.namespace=t.substring(i.length+1),a.namespaceRegExp=r._eventNamespacedRegExp(t)),o.triggerEvent(e,i,a,n)}}),Object.assign(r,{_eventNamespacedRegExp:e=>new RegExp(`^${t.escapeRegExp(e)}(?:\\.|$)`,"i"),_parseClasses:e=>e.flat().flatMap(e=>e.split(" ")),_parseData(e,s,n=!1){const r=t.isObject(e)?e:{[e]:s},o={};for(const e in r){const s=r[e];o[e]=n&&(t.isObject(s)||t.isArray(s))?JSON.stringify(s):s}return o},_parseDataset(e){if(t.isUndefined(e))return e;const s=e.toLowerCase().trim();if(["true","on"].includes(s))return!0;if(["false","off"].includes(s))return!1;if("null"===s)return null;if(t.isNumeric(s))return parseFloat(s);if(["{","["].includes(s.charAt(0)))try{return JSON.parse(e)}catch(e){}return e},_parseEvent:e=>e.split(".").shift(),_parseEvents:e=>e.split(" "),_prefixSelectors(e,t){return e.split(this._splitRegExp).filter(e=>!!e).map(e=>`${t} ${e}`)}}),Object.assign(r,{_clone(e,t=!0,s=!1,n=!1){const r=o.clone(e,t);return s||n?(s&&this._cloneEvents(e,r),n&&this._cloneData(e,r),t&&this._deepClone(e,r,s,n),r):r},_deepClone(e,s,n=!1,r=!1){const i=t.wrap(o.childNodes(e)),a=t.wrap(o.childNodes(s));for(let e=0;e<i.length;e++)n&&this._cloneEvents(i[e],a[e]),r&&this._cloneData(i[e],a[e]),this._deepClone(i[e],a[e])},_detach(e){const t=o.parent(e);t||o.removeChild(t,e)},_empty(e){const s=t.wrap(o.childNodes(e));for(const t of s)this._remove(t),o.removeChild(e,t);if(this._hasShadow(e)){const t=o.shadow(e);this._remove(t)}if(this._hasFragment(e)){const t=o.fragment(e);this._remove(t)}},_remove(e){o.triggerEvent(e,"remove"),this._empty(e),t.isElement(e)&&(this._clearQueue(e),this._stop(e),this._styles.has(e)&&this._styles.delete(e)),this._removeEvent(e),this._removeData(e)},_replaceWith(e,t){const s=o.parent(e);if(s){for(const n of t){const t=this._clone(n,!0);o.insertBefore(s,t,e)}this._remove(e),o.removeChild(s,e)}}}),Object.assign(r,{_unwrap(e,s){const n=o.parent(e,s);if(!n)return;const r=o.parent(n);if(!n)return;const i=t.wrap(o.childNodes(n));for(const e of i)o.insertBefore(r,e,n);this._remove(n),o.removeChild(r,n)},_wrap(e,t){const s=o.parent(e);if(!s)return;const n=t.map(e=>this._clone(e,!0));for(const t of n)o.insertBefore(s,t,e);const r=this._deepest(n.shift());o.insertBefore(r,e)},_wrapAll(e,t){const s=e.slice().shift();if(!s)return;const n=o.parent(s);if(!n)return;for(const e of t)o.insertBefore(n,e,s);const i=r._deepest(t.shift());for(const t of e)o.insertBefore(i,t)},_wrapInner(e,s){const n=t.wrap(o.childNodes(e)),r=s.map(e=>this._clone(e,!0));for(const t of r)o.insertBefore(e,t);const i=this._deepest(r.shift());for(const e of n)o.insertBefore(i,e)}}),Object.assign(r,{parseHTML:e=>(new DOMParser).parseFromString(e,"text/html"),parseXML:e=>(new DOMParser).parseFromString(e,"application/xml")}),Object.assign(r,{_findByCustom(e,s=this._context){const n=[];for(const r of s)t.merge(n,this.__findByCustom(e,r));return s.length>1&&n.length>1?t.unique(n):n},_findBySelector(e,s){const n=[];for(const r of s)t.merge(n,o.findBySelector(e,r));return s.length>1&&n.length>1?t.unique(n):n},_findOneByCustom(e,t){for(const s of t){const t=this.__findOneByCustom(e,s);if(t)return t}return null},_findOneBySelector(e,t){for(const s of t){const t=o.findOneBySelector(e,s);if(t)return t}return null},__findByCustom(e,s){const n=o.getAttribute(s,"id");o.setAttribute(s,"id",this._tempId);const r=o.parent(s),i=[];for(const s of e)t.merge(i,o.findBySelector(s,r));return n?o.setAttribute(s,"id",n):o.removeAttribute(s,"id"),e.length>1&&i.length>1?t.unique(i):i},__findOneByCustom(e,t){const s=o.getAttribute(t,"id");o.setAttribute(t,"id",this._tempId);const n=o.parent(t);if(!n)return null;let r=null;for(const t of e)if(r=o.findOneBySelector(t,n))break;return s?o.setAttribute(t,"id",s):o.removeAttribute(t,"id"),r}}),Object.assign(r,{_children(e,s,n=!1,r=!1){const i=t.wrap(r?o.children(e):o.childNodes(e)),a=[];let c;for(c of i)if((!s||s(c))&&(a.push(c),n))break;return a},_deepest:e=>t.wrap(o.findBySelector("*",e)).find(e=>!o.hasChildren(e))||e,_next(e,t){const s=[];return(e=o.next(e))?t&&!t(e)?s:(s.push(e),s):s},_nextAll(e,t,s,n=!1){const r=[];for(;(e=o.next(e))&&(!s||!s(e))&&(t&&!t(e)||(r.push(e),!n)););return r},_parent(e,t){const s=[],n=o.parent(e);return n?t&&!t(n)?s:(s.push(n),s):s},_parents(e,s,n,r=!1){const i=[];for(;(e=o.parent(e))&&!t.isDocument(e)&&(!n||!n(e))&&(s&&!s(e)||(i.push(e),!r)););return i},_prev(e,t){const s=[];return(e=o.prev(e))?t&&!t(e)?s:(s.push(e),s):s},_prevAll(e,t,s,n=!1){const r=[];for(;(e=o.prev(e))&&(!s||!s(e))&&(t&&!t(e)||(r.push(e),!n)););return r},_siblings(e,t,s=!0){const n=[],r=o.parent(e);if(!r)return n;const i=s?r.children:r.childNodes;let a;for(a of i)o.isSame(e,a)||t&&!t(a)||n.push(a);return n}}),Object.assign(r,{parseNodesFactory:e=>e?s=>(e.node?t.isNode(s):t.isElement(s))||e.fragment&&t.isFragment(s)||e.shadow&&t.isShadow(s)||e.document&&t.isDocument(s)||e.window&&t.isWindow(s):t.isElement}),Object.assign(r,{_hasAnimation(e){return this._animations.has(e)},_hasCSSAnimation(e){return!!parseFloat(this._css(e,"animation-duration"))},_hasCSSTransition(e){return!!parseFloat(this._css(e,"transition-duration"))},_hasData(e,t){return this._data.has(e)&&(!t||this._data.get(e).hasOwnProperty(t))},_hasFragment:e=>!!o.fragment(e),_hasShadow:e=>!!o.shadow(e),_isVisible:e=>t.isWindow(e)?o._isVisibleDocument(o.document(e)):t.isDocument(e)?o.isVisibleDocument(e):!!o.offsetParent(e)}),Object.assign(r,{_forceShow(e,s){if(t.isDocument(e)||t.isWindow(e)||this._isVisible(e))return s(e);const n=[];t.isElement(e)&&"none"===this._css(e,"display")&&n.push(e),t.merge(n,this._parents(e,e=>t.isElement(e)&&"none"===this._css(e,"display")));const r=new Map;for(const e of n)r.set(e,o.getAttribute(e,"style")),o.setStyle(e,"display","initial",!0);const i=s(e);for(const[e,t]of r)t?o.setAttribute(e,"style",t):o.removeAttribute(e,"style");return i},_sanitize(e,t,s=this.allowedTags){const n=this._tagName(e);if(!(n in s))return void o.removeChild(t,e);const r=[...s["*"],...s[n]],i=this._getAttribute(e);for(const t in i){!!r.find(e=>t.match(e))||o.removeAttribute(e,t)}const a=o.children(e);for(const t of a)this._sanitize(t,e,s)},_tagName:e=>o.tagName(e).toLowerCase()}),Object.assign(r,{_animating:!1,_animations:new Map,_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,allowedTags:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],_complexRegExp:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,_fastRegExp:/^([\#\.]?)([\w\-]+)$/,_splitRegExp:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,_tempId:`frost${Date.now().toString(16)}`});class o{}return Object.assign(o,{attributes:e=>e.attributes,dataset:e=>e.dataset,getAttribute:(e,t)=>e.getAttribute(t),getDataset(e,t){return this.dataset(e)[t]},getProperty:(e,t)=>e[t],removeAttribute(e,t){e.removeAttribute(t)},removeDataset(e,t){delete e.dataset[t]},removeProperty(e,t){delete e[t]},setAttribute(e,t,s){e.setAttribute(t,s)},setDataset(e,t,s){this.dataset(e)[t]=s},setProperty(e,t,s){e[t]=s}}),Object.assign(o,{offsetLeft:e=>e.offsetLeft,offsetTop:e=>e.offsetTop,rect:e=>e.getBoundingClientRect()}),Object.assign(o,{getScrollX:e=>e.scrollLeft,getScrollXWindow:e=>e.scrollX,getScrollY:e=>e.scrollTop,getScrollYWindow:e=>e.scrollY,setScrollWindow:(e,t,s)=>e.scroll(t,s),setScrollX(e,t){e.scrollLeft=t},setScrollY(e,t){e.scrollTop=t}}),Object.assign(o,{height:e=>e.clientHeight,heightWindow:(e,t)=>t?e.outerHeight:e.innerHeight,width:e=>e.clientWidth,widthWindow:(e,t)=>t?e.outerWidth:e.innerWidth}),Object.assign(o,{addClass(e,...t){e.classList.add(...t)},css:t=>e.getComputedStyle(t),getStyle(e,t){return this.style(e)[t]},removeClass(e,...t){e.classList.remove(...t)},setStyle(e,t,s,n){e.style.setProperty(t,s,n?"important":"")},style:e=>e.style,toggleClass(e,...t){e.classList.toggle(...t)}}),Object.assign(o,{blur(e){e.blur()},click(e){e.click()},focus(e){e.focus()}}),Object.assign(o,{addEvent(e,t,s){e.addEventListener(t,s)},removeEvent(e,t,s){e.removeEventListener(t,s)},triggerEvent(e,t,s,n){const r=new Event(t,{bubbles:!0,cancelable:!0,...n});return s&&Object.assign(r,s),e.dispatchEvent(r)}}),Object.assign(o,{attachShadow:(e,t=!0)=>e.attachShadow({mode:t?"open":"closed"}),clone:(e,t)=>e.cloneNode(t),create:(e,t)=>e.createElement(t),createComment:(e,t)=>e.createCommentNode(t),createFragment:e=>e.createDocumentFragment(),createRange:e=>e.createRange(),createText:(e,t)=>e.createTextNode(t)}),Object.assign(o,{removeChild(e,t){e.removeChild(t)}}),Object.assign(o,{insertBefore(e,t,s=null){e.insertBefore(t,s)}}),Object.assign(o,{findByClass:(e,t)=>t.getElementsByClassName(e),findById:(e,t)=>t.getElementById(e),findByTag:(e,t)=>t.getElementsByTagName(e),findBySelector:(e,t)=>t.querySelectorAll(e),findOneBySelector:(e,t)=>t.querySelector(e)}),Object.assign(o,{childNodes:e=>e.childNodes,children:e=>e.children,document:e=>e.document,documentElement:e=>e.documentElement,firstChild:e=>e.firstChild,fragment:e=>e.content,next:e=>e.nextSibling,offsetParent:e=>e.offsetParent,parent:e=>e.parentNode,prev:e=>e.previousSibling,scrollingElement:e=>e.scrollingElement,shadow:e=>e.shadowRoot}),Object.assign(o,{addRange(e,t){e.addRange(t)},collapse(e){e.collapse()},endContainer:e=>e.endContainer,extract:e=>e.extractContents(),getRange:(e,t=0)=>e.getRangeAt(t),getSelection:()=>e.getSelection(),insert(e,t){e.insertNode(t)},rangeCount:e=>e.rangeCount,removeRanges(e){e.removeAllRanges()},select(e,t){e.selectNode(t)},setEndAfter(e,t){e.setEndAfter(t)},setStartBefore(e,t){e.setStartBefore(t)},startContainer:e=>e.startContainer}),Object.assign(o,{contains:(e,t)=>e.contains(t),hasAttribute:(e,t)=>e.hasAttribute(t),hasChildren:e=>!!e.childElementCount,hasClass:(e,t)=>e.classList.contains(t),hasProperty:(e,t)=>e.hasOwnProperty(t),is:(e,s)=>t.isElement(e)&&e.matches(s),isConnected:e=>e.isConnected,isEqual:(e,t)=>e.isEqualNode(t),isSame:(e,t)=>e.isSameNode(t),isVisibleDocument:e=>"visible"===e.visibilityState}),Object.assign(o,{comparePosition:(e,t)=>e.compareDocumentPosition(t),normalize(e){e.normalize()},tagName:e=>e.tagName}),{AjaxRequest:n,DOM:r,DOMNode:o,dom:new r}}));