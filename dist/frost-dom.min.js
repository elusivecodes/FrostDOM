!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:Object.assign(t,e(t))}(this,function(t){"use strict";if(!t)throw new Error("FrostDOM requires a Window.");if(!("Core"in t))throw new Error("FrostDOM requires FrostCore.");const e=t.Core,s=t.document;class n{constructor(t=s){this._context=t,this._animating=!1,this._animations=new Map,this._queues=new WeakMap,this._data=new WeakMap,this._events=new WeakMap,this._styles=new WeakMap}}return Object.assign(n.prototype,{ajax(e){e={url:t.location,headers:{},...n.ajaxDefaults,...e};const s=n.localRegex.test(location.protocol);if(!e.cache){const t=new URL(e.url);t.searchParams.append("_",Date.now()),e.url=t.toString()}return"Content-Type"in e.headers&&!e.headers["Content-Type"]&&(e.headers["Content-Type"]=e.contentType),s||"X-Requested-With"in e.headers||(e.headers["X-Requested-With"]="XMLHttpRequest"),new Promise((t,i)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0);for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);e.responseType&&(r.responseType=e.responseType),r.onload=(e=>{r.status>400?i({status:r.status,xhr:r,event:e}):t({response:r.response,xhr:r,event:e})}),s||(r.onerror=(t=>i({status:r.status,xhr:r,event:t}))),e.uploadProgress&&(r.upload.onprogress=(t=>e.uploadProgress(t.loaded/t.total,r,t))),e.beforeSend&&e.beforeSend(r),e.data&&e.processData&&("application/json"===e.contentType?e.data=JSON.stringify(e.data):"application/x-www-form-urlencoded"===e.contentType?e.data=n._parseParams(e.data):e.data=n._parseFormData(e.data)),r.send(e.data)})},get(t,e){return this.ajax({url:t,...e})},post(t,e,s){return this.ajax({url:t,data:e,method:"POST",...s})},upload(t,e,s){return this.ajax({url:t,data:e,method:"POST",contentType:!1,...s})}}),Object.assign(n.prototype,{loadScript(e,s=!0){return this.ajax({url:e,cache:s}).then(e=>eval.call(t,e.response))},loadScripts(e,s=!0){return Promise.all(e.map(t=>this.ajax({url:t,cache:s}))).then(e=>{for(const s of e)eval.call(t,s.response)})}}),Object.assign(n.prototype,{loadStyle(t,e=!0){return this.ajax({url:t,cache:e}).then(t=>n._insertBefore(this._context.head,this.create("style",{html:t.response})))},loadStyles(t,e=!0){return Promise.all(t.map(t=>this.ajax({url:t,cache:e}))).then(t=>{for(const e of t)n._insertBefore(this._context.head,this.create("style",{html:e.response}))})}}),Object.assign(n.prototype,{getCookie(t,e=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(e=>e.trimStart().substring(0,t.length)===t);if(!s)return null;const n=s.trimStart().substring(t.length+1);return e?JSON.parse(n):n},removeCookie(t,e){this.setCookie(t,"",{expires:-1,...e})},setCookie(t,e,s,n=!1){if(!t)return;n&&(e=JSON.stringify(e));let i=`${t}=${e}`;if(s){if(s.expires){let t=new Date;t.setTime(t.getTime()+1e3*s.expires),i+=`;expires=${t.toUTCString()}`}s.path&&(i+=`;path=${s.path}`),s.secure&&(i+=";secure")}this._context.cookie=i}}),Object.assign(n.prototype,{animate(t,e,s){t=this._nodeFilter(t),s={...n.animationDefaults,...s};const i=t.map(t=>this._animate(t,e,s));return this._start(),Promise.all(i)},stop(t,e=!0){t=this._nodeFilter(t);for(const s of t)this._stop(s,e)},_animate(t,s,n){this._animations.has(t)||this._animations.set(t,[]);const i=performance.now();return new Promise((r,o)=>{this._animations.get(t).push((a=!1,l=!1)=>{if(a&&!l)return o(t),!0;let h;return l?h=1:(h=(performance.now()-i)/n.duration,n.infinite?h%=1:h=e.clamp(h),"ease-in"===n.type?h=Math.pow(h,2):"ease-out"===n.type?h=Math.sqrt(h):"ease-in-out"===n.type&&(h=h<=.5?2*Math.pow(h,2):1-(1-h)**2*2)),s(t,h,n),1===h?(r(t),!0):void 0})})},_animationFrame(){for(let[t,e]of this._animations)(e=e.filter(t=>!t())).length?this._animations.set(t,e):this._animations.delete(t);this._animations.size?t.requestAnimationFrame(t=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(t,e=!0){if(!this._animations.has(t))return;const s=this._animations.get(t);for(const t of s)t(!0,e);this._animations.delete(t)}}),Object.assign(n.prototype,{dropIn(t,e){return this.slideIn(t,{direction:"top",...e})},dropOut(t,e){return this.slideOut(t,{direction:"top",...e})},fadeIn(t,e){return this.animate(t,(t,e)=>n._setStyle(t,"opacity",e<1?e:""),e)},fadeOut(t,e){return this.animate(t,(t,e)=>n._setStyle(t,"opacity",e<1?1-e:""),e)},rotateIn(t,e){return this.animate(t,(t,e,s)=>n._setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*e)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...e})},rotateOut(t,e){return this.animate(t,(t,e,s)=>n._setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*e*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...e})},slideIn(t,s){return this.animate(t,(t,s,i)=>{let r;if(s<1){const n=e.isFunction(i.direction)?i.direction():i.direction;let o,a,l;"top"===n||"bottom"===n?(o="Y",a=this._height(t),l="top"===n):(o="X",a=this._width(t),l="left"===n),r=`translate${o}(${Math.round(a-a*s)*(l?-1:1)}px)`}else r="";n._setStyle(t,"transform",r)},{direction:"bottom",...s})},slideOut(t,s){return this.animate(t,(t,s,i)=>{let r;if(s<1){const n=e.isFunction(i.direction)?i.direction():i.direction;let o,a,l;"top"===n||"bottom"===n?(o="Y",a=this._height(t),l="top"===n):(o="X",a=this._width(t),l="left"===n),r=`translate${o}(${Math.round(a*s)*(l?-1:1)}px)`}else r="";n._setStyle(t,"transform",r)},{direction:"bottom",...s})},squeezeIn(t,e){t=this._nodeFilter(t),e={...n.animationDefaults,direction:"bottom",...e};const s=t.map(t=>this._squeezeIn(t,e));return this._start(),Promise.all(s)},squeezeOut(t,e){t=this._nodeFilter(t),e={...n.animationDefaults,direction:"bottom",...e};const s=t.map(t=>this._squeezeOut(t,e));return this._start(),Promise.all(s)},_squeezeIn(t,s){const i=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(t,i);const r=n._parent(t);return this._animate(t,(t,s,i)=>{if(1===s){const t=n._childNodes(r),s=e.wrap(t).shift();return void this._unwrap(s)}const o=e.isFunction(i.direction)?i.direction():i.direction;let a,l;"top"===o||"bottom"===o?(a="height","top"===o&&(l="Y")):"left"!==o&&"right"!==o||(a="width","left"===o&&(l="X"));const h=Math.round(this[`_${a}`](t)),d=Math.round(h*s);n._setStyle(r,a,d),l&&n._setStyle(r,"transform",`translate${l}(${h-d}px)`)},s)},_squeezeOut(t,s){const i=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(t,i);const r=n._parent(t);return this._animate(t,(t,s,i)=>{if(1===s){const t=n._childNodes(r),s=e.wrap(t).shift();return void this._unwrap(s)}const o=e.isFunction(i.direction)?i.direction():i.direction;let a,l;"top"===o||"bottom"===o?(a="height","top"===o&&(l="Y")):"left"!==o&&"right"!==o||(a="width","left"===o&&(l="X"));const h=Math.round(this[`_${a}`](t)),d=Math.round(h-h*s);n._setStyle(r,a,d),l&&n._setStyle(r,"transform",`translate${l}(${h-d}px)`)},s)}}),Object.assign(n.prototype,{clearQueue(t){t=this._nodeFilter(t);for(const e of t)this._clearQueue(e)},queue(t,e){t=this._nodeFilter(t);for(const s of t)this._queue(s,e)},_clearQueue(t){this._queues.has(t)&&this._queues.delete(t)},_dequeueNode(t){if(!this._queues.has(t))return;const e=this._queues.get(t).shift();e?Promise.resolve(e(t)).finally(e=>this._dequeueNode(t)):this._queues.delete(t)},_queue(t,e){const s=!this._queues.has(t);s&&this._queues.set(t,[]),this._queues.get(t).push(e),s&&this._dequeueNode(t)}}),Object.assign(n.prototype,{getAttribute(t,e){const s=this._nodeFind(t);if(s)return n._getAttribute(s,e)},getDataset(t,e){const s=this._nodeFind(t);if(s)return n._getDataset(s,e)},getHTML(t){return this.getProperty(t,"innerHTML")},getProperty(t,e){const s=this._nodeFind(t);if(s)return n._getProperty(s,e)},getText(t){return this.getProperty(t,"innerText")},getValue(t){return this.getProperty(t,"value")},removeAttribute(t,e){t=this._nodeFilter(t);for(const s of t)n._removeAttribute(s,e)},removeProperty(t,e){t=this._nodeFilter(t);for(const s of t)n._removeProperty(s,e)},setAttribute(t,e,s){t=this._nodeFilter(t);const i=n._parseData(e,s);for(const e of t)this._setAttribute(e,i)},setDataset(t,e,s){t=this._nodeFilter(t);const i=n._parseData(e,s);for(const e of t)n._setDataset(e,i)},setHTML(t,e){this.empty(t),this.setProperty(t,"innerHTML",e)},setProperty(t,e,s){t=this._nodeFilter(t);const i=n._parseData(e,s);for(const e of t)n._setProperty(e,i)},setText(t,e){this.empty(t),this.setProperty(t,"innerText",e)},setValue(t,e){this.setProperty(t,"value",e)},_setAttribute(t,e){for(const s in e)n._setAttribute(t,s,e[s])}}),Object.assign(n.prototype,{cloneData(t,e){t=this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)this._cloneData(s,e)},getData(t,e){const s=this._nodeFind(t,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return this._getData(s,e)},removeData(t,e){t=this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)this._removeData(s,e)},setData(t,e,s){t=this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0});const i=n._parseData(e,s);for(const e of t)this._setData(e,i)},_cloneData(t,e){this._data.has(t)&&this.setData(e,{...this._data.get(t)})},_getData(t,e){if(this._data.has(t))return e?this._data.get(t)[e]:this._data.get(t)},_removeData(t,e){if(this._data.has(t)){if(e){const s=this._data.get(t);if(delete s[e],Object.keys(s).length)return}this._data.delete(t)}},_setData(t,e){this._data.has(t)||this._data.set(t,{}),Object.assign(this._data.get(t),e)}}),Object.assign(n.prototype,{center(t,e){const s=this.rect(t,e);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(t,e){const s=this.rect(e);if(s){t=this._nodeFilter(t);for(const e of t)this._constrain(e,s)}},distTo(t,s,n,i){const r=this.center(t,i);if(r)return e.dist(r.x,r.y,s,n)},distToNode(t,e){const s=this.center(e);if(s)return this.distTo(t,s.x,s.y)},nearestTo(t,e,s,n){let i=null,r=Number.MAX_VALUE;t=this._nodeFilter(t);for(const o of t){const t=this.distTo(o,e,s,n);t&&t<r&&(r=t,i=o)}return i},nearestToNode(t,e){const s=this.center(e);if(s)return this.nearestTo(t,s.x,s.y)},percentX(t,s,n){const i=this.rect(t,n);if(i)return e.clampPercent((s-i.left)/i.width*100)},percentY(t,s,n){const i=this.rect(t,n);if(i)return e.clampPercent((s-i.top)/i.height*100)},position(t,e){const s=this._nodeFind(t);if(s)return this._position(s,e)},rect(t,e){const s=this._nodeFind(t);if(s)return this._rect(s,e)},_constrain(t,e){const s=this._rect(t),n={};let i,r;s.height>e.height&&(n.height=e.height),s.width>e.width&&(n.width=e.width),s.left-e.left<0?i=s.left-e.left:s.right-e.right>0&&(i=s.right-e.right),i&&(n.left=`${parseFloat(this._css(t,"left"))-i}px`),s.top-e.top<0?r=s.top-e.top:s.bottom-e.bottom>0&&(r=s.bottom-e.bottom),r&&(n.top=`${parseFloat(this._css(t,"top"))-r}px`),this._setStyle(t,n)},_position(t,e){return this.forceShow(t,t=>{const s={x:t.offsetLeft,y:t.offsetTop};if(e){let e=t;for(;e=e.offsetParent;)s.x+=e.offsetLeft,s.y+=e.offsetTop}return s})},_rect(e,s){return this.forceShow(e,e=>{const i=e.getBoundingClientRect();return s&&(i.x+=n._getScrollX(t),i.y+=n._getScrollY(t)),i})}}),Object.assign(n.prototype,{getScrollX(t){const s=this._nodeFind(t,{document:!0,window:!0});if(s)return e.isWindow(s)?n._getScrollXWindow(s):e.isDocument(s)?this._getScrollXDocument(s):n._getScrollX(s)},getScrollY(t){const s=this._nodeFind(t,{document:!0,window:!0});if(s)return e.isWindow(s)?n._getScrollYWindow(s):e.isDocument(s)?this._getScrollYDocument(s):n._getScrollY(s)},setScroll(t,s,i){t=this._nodeFilter(t,{document:!0,window:!0});for(const r of t)e.isWindow(r)?n._setScrollWindow(r,s,i):e.isDocument(r)?this._setScrollDocument(r,s,i):this._setScroll(r,s,i)},setScrollX(t,s){t=this._nodeFilter(t,{document:!0,window:!0});for(const i of t)e.isWindow(i)?this._setScrollXWindow(i,s):e.isDocument(i)?this._setScrollXDocument(i,s):n._setScrollX(i,s)},setScrollY(t,s){t=this._nodeFilter(t,{document:!0,window:!0});for(const i of t)e.isWindow(i)?this._setScrollYWindow(i,s):e.isDocument(i)?this._setScrollYDocument(i,s):n._setScrollY(i,s)},_getScrollXDocument:t=>n._getScrollX(n._scrollingElement(t)),_getScrollYDocument:t=>n._getScrollY(n._scrollingElement(t)),_setScroll(t,e,s){n._setScrollX(t,e),n._setScrollY(t,s)},_setScrollDocument(t,e,s){return this._setScroll(n._scrollingElement(t),e,s)},_setScrollXDocument:(t,e)=>n._setScrollX(n._scrollingElement(t),e),_setScrollXWindow:(t,e)=>n._setScrollWindow(t,e,n._getScrollYWindow(t)),_setScrollYDocument:(t,e)=>n._setScrollY(n._scrollingElement(t),e),_setScrollYWindow:(t,e)=>n._setScrollWindow(t,n._getScrollXWindow(t),e)}),Object.assign(n.prototype,{height(t,s=!0,i,r){const o=this._nodeFind(t,{document:!0,window:!0});if(o)return e.isWindow(o)?n._heightWindow(o,s):e.isDocument(o)?this._height(n._documentElement(o),s,i,r):this._height(o,s,i,r)},width(t,s=!0,i,r){const o=this._nodeFind(t,{document:!0,window:!0});if(o)return e.isWindow(o)?n._widthWindow(o,s):e.isDocument(o)?this._width(n._documentElement(o),s,i,r):this._width(o,s,i,r)},_height(t,e=!0,s,n){return this.forceShow(t,t=>{let i=t.clientHeight;return e||(i-=parseInt(this._css(t,"padding-top"))+parseInt(this._css(t,"padding-bottom"))),s&&(i+=parseInt(this._css(t,"border-top-width"))+parseInt(this._css(t,"border-bottom-width"))),n&&(i+=parseInt(this._css(t,"margin-top"))+parseInt(this._css(t,"margin-bottom"))),i})},_width(t,e=!0,s,n){return this.forceShow(t,t=>{let i=t.clientWidth;return e||(i-=parseInt(this._css(t,"padding-left"))+parseInt(this._css(t,"padding-right"))),s&&(i+=parseInt(this._css(t,"border-left-width"))+parseInt(this._css(t,"border-right-width"))),n&&(i+=parseInt(this._css(t,"margin-left"))+parseInt(this._css(t,"margin-right"))),i})}}),Object.assign(n.prototype,{addClass(t,...e){if(t=this._nodeFilter(t),(e=n._parseClasses(e)).length)for(const s of t)n._addClass(s,...e)},css(t,e){const s=this._nodeFind(t);if(s)return this._css(s,e)},getStyle(t,s){const i=this._nodeFind(t);if(i)return s=e.snakeCase(s),n._getStyle(i,s)},hide(t){this.setStyle(t,"display","none")},removeClass(t,...e){if(t=this._nodeFilter(t),(e=n._parseClasses(e)).length)for(const s of t)n._removeClass(s,...e)},setStyle(t,e,s,i){t=this._nodeFilter(t);const r=n._parseData(e,s);for(const e of t)this._setStyle(e,r,i)},show(t){this.setStyle(t,"display","")},toggle(t){t=this._nodeFilter(t);for(const e of t)"none"===n._getStyle(e,"display")?n._setStyle(e,"display",""):n._setStyle(e,"display","none")},toggleClass(t,...e){if(t=this._nodeFilter(t),(e=n._parseClasses(e)).length)for(const s of t)n._toggleClass(s,...e)},_css(e,s){return this._styles.has(e)||this._styles.set(e,t.getComputedStyle(e)),s?this._styles.get(e).getPropertyValue(s):this._styles.get(e)},_setStyle(t,s,i){for(let r in s){let o=s[r];r=e.snakeCase(r),n._setStyle(t,r,o,i)}}}),Object.assign(n.prototype,{mouseDragFactory(s,n,i,r=!0){return n&&r&&(n=e.animation(n),i&&(i=e.animation(i))),e=>{if(s&&!1===s(e))return!1;n&&this._addEvent(t,"mousemove",n),(n||i)&&this._addEvent(t,"mouseup",e=>{n&&this._removeEvent(t,"mousemove",n),i&&i(e)},!1,!0)}},_delegateFactory(t,e,s){const i=e.match(n.complexRegex)?this._getDelegateContainsFactory(t,e):this._getDelegateMatchFactory(t,e);return e=>{if(n._isSame(e.target,t))return;const r=i(e.target);return r?(e.delegateTarget=r,s(e)):void 0}},_getDelegateContainsFactory(t,s){return s=n._prefixSelectors(selectors,`#${n._tempId}`),i=>{const r=e.merge([],this.__findByCustom(s,t));return!!r.length&&(r.includes(i)?i:this._parents(i,t=>r.contains(t),e=>n._isSame(t,e),!0).shift())}},_getDelegateMatchFactory(t,e){return s=>n._is(s,e)?s:this._parents(s,t=>n._is(t,e),e=>n._isSame(t,e),!0).shift()},_selfDestructFactory(t,e,s,n){const i=r=>(s?this._removeEvent(t,e,n,s):this._removeEvent(t,e,i),n(r));return i}}),Object.assign(n.prototype,{blur(t){const e=this._nodeFind(t);e&&n._blur(e)},click(t){const e=this._nodeFind(t);e&&n._click(e)},focus(t){const e=this._nodeFind(t);e&&n._focus(e)},ready(e){"complete"!==this._context.readyState?this._addEvent(t,"DOMContentLoaded",e):e()}}),Object.assign(n.prototype,{addEvent(t,e,s){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const n of t)this._addEvent(n,e,s)},addEventDelegate(t,e,s,n){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const i of t)this._addEvent(i,e,n,s)},addEventDelegateOnce(t,e,s,n){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const i of t)this._addEvent(i,e,n,s,!0)},addEventOnce(t,e,s){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const n of t)this._addEvent(n,e,s,null,!0)},cloneEvents(t,e){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const s of t)this._cloneEvents(s,e)},removeEvent(t,e,s){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const n of t)this._removeEvent(n,e,s)},removeEventDelegate(t,e,s,n){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0});for(const i of t)this._removeEvent(i,e,n,s)},triggerEvent(t,e,s){t=this._nodeFilter(t,{shadow:!0,document:!0,window:!0}),e=n._parseEvents(e).map(t=>n._parseEvent(t));for(const i of t)for(const t of e)n._triggerEvent(i,t,s)},_addEvent(t,e,s,i,r){let o=s;r&&(o=this._selfDestructFactory(t,e,i,o)),i&&(o=this._delegateFactory(t,i,o)),this._events.has(t)||this._events.set(t,{});const a=this._events.get(t),l={delegate:i,callback:s,realCallback:o,selfDestruct:r};for(const s of n._parseEvents(e)){const e=n._parseEvent(s);if(l.event=s,l.realEvent=e,a[e]){if(a[e].includes(l))return}else a[e]=[];n._addEvent(t,e,o),a[e].push(l)}},_cloneEvents(t,e){if(!this._events.has(t))return;const s=this._events.get(t);for(const t in s)for(const n of s[t])this.addEvent(e,n.event,n.callback,n.delegate,n.selfDestruct)},_removeEvent(t,e,s,i){if(!this._events.has(t))return;const r=this._events.get(t),o=e?n._parseEvents(e):Object.keys(r);for(const e of o){const o=n._parseEvent(e);if(!r[o])return;r[o]=r[o].filter(r=>!!(o===e&&o!==r.realEvent||o!==e&&e!==r.event||i&&(i!==r.delegate||s&&s!==r.callback)||!i&&s&&s!==r.realCallback)||(n._removeEvent(t,r.realEvent,r.realCallback),!1)),r[o].length||delete r[o]}Object.keys(r).length||this._events.delete(t)}}),Object.assign(n.prototype,{attachShadow(t,e=!0){const s=this._nodeFind(t);if(s)return n._attachShadow(s,e)},create(t="div",s=null){const i=n._create(this._context,t);return s?("html"in s?n._setProperty(i,{innerHTML:s.html}):"text"in s&&n._setProperty(i,{innerText:s.text}),"class"in s&&n._addClass(i,...n._parseClasses(e.wrap(s.class))),"style"in s&&this._setStyle(i,s.style),"value"in s&&n._setProperty(i,{value:s.value}),"attributes"in s&&this._setAttribute(i,s.attributes),"properties"in s&&n._setProperty(i,s.properties),"dataset"in s&&n._setDataset(i,s.dataset),i):i},createComment(t){return n._createComment(this._context,t)},createFragment(){return n._createFragment(this._context)},createRange(){return n._createRange(this._context)},createText(t){return n._createText(this._context,t)},parseHTML(t){return e.wrap(n._children(this.createRange().createContextualFragment(t)))}}),Object.assign(n.prototype,{clone(t,s=!0,i=!1,r=!1){return(t=this._nodeFilter(t,{node:!0,fragment:!0})).flatMap(t=>e.isShadow(t)?n._childNodes(t):t).map(t=>this._clone(t,s,i,r))},detach(t){t=this._nodeFilter(t,{node:!0});for(const e of t){const t=n._parent(e);t&&n._removeChild(t,e)}},empty(t){t=this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0});for(const e of t)this._empty(e)},remove(t){t=this._nodeFilter(t,{node:!0});for(const e of t){this._empty(e),this._remove(e);const t=n._parent(e);t&&n._removeChild(t,e)}},replaceAll(t,e){this.replaceWith(e,t)},replaceWith(t,e){t=this._nodeFilter(t,{node:!0,shadow:!0}),e=this._nodeFilter(e,{node:!0,fragment:!0,html:!0});for(const s of t)this._replaceWith(s,e)},_clone(t,e=!0,s=!1,i=!1){const r=n._clone(t,e);return s||i?(s&&this._cloneEvents(t,r),i&&this._cloneData(t,r),e&&this._deepClone(t,r,s,i),r):r},_deepClone(t,e,s=!1,i=!1){const r=n._childNodes(t),o=n._childNodes(e);for(let t=0;t<r.length;t++)s&&this._cloneEvents(r[t],o[t]),i&&this._cloneData(r[t],o[t]),this._deepClone(r[t],o[t])},_empty(t){const e=n._childNodes(t);for(const t of e)this._empty(t),this._remove(t);if(n._hasShadow(t)){const e=n._shadow(t);this._empty(e),this._remove(e)}if(n._hasFragment(t)){const e=n._fragment(t);this._empty(e),this._remove(e)}},_remove(t){n._triggerEvent(t,"remove"),e.isElement(t)&&(this._clearQueue(t),this._stop(t),this._styles.has(t)&&this._styles.delete(t)),this._removeEvent(t),this._removeData(t)},_replaceWith(t,e){const s=n._parent(t);if(!s)return;const i=this.clone(e,!0);for(const e of i)n._insertBefore(s,e,t);this._remove(t)}}),Object.assign(n.prototype,{after(t,e){const s=this._nodeFind(t,{node:!0,shadow:!0});if(!s)return;const i=n._parent(s);if(i){e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0,html:!0});for(const t of e.reverse())n._insertBefore(i,t,s.nextSibling)}},append(t,e){const s=this._nodeFind(t,{fragment:!0,shadow:!0,document:!0});if(s){e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0,html:!0});for(const t of e)n._insertBefore(s,t)}},appendTo(t,e){this.append(e,t)},before(t,e){const s=this._nodeFind(t,{node:!0,shadow:!0});if(!s)return;const i=n._parent(s);if(i){e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0,html:!0});for(const t of e)n._insertBefore(i,t,s)}},insertAfter(t,e){this.after(e,t)},insertBefore(t,e){this.before(e,t)},prepend(t,e){const s=this._nodeFind(t,{fragment:!0,shadow:!0,document:!0});if(s){e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0,html:!0});for(const t of e.reverse())n._insertBefore(s,t,s.firstChild)}},prependTo(t,e){this.prepend(e,t)}}),Object.assign(n.prototype,{unwrap(t,e){t=this._nodeFilter(t,{node:!0}),e=this._parseFilter(e);for(const s of t)this._unwrap(s,e)},wrap(t,e){t=this._nodeFilter(t,{node:!0}),e=this._nodeFilter(e,{fragment:!0,html:!0});for(const s of t)this._wrap(s,e)},wrapAll(t,e){const s=(t=this._nodeFilter(t,{node:!0})).slice().shift();if(!s)return;const i=n._parent(s);if(!i)return;e=this._nodeFilter(e,{fragment:!0,html:!0});const r=this.clone(e,!0);for(const t of r)n._insertBefore(i,t,s);const o=this._deepest(r.shift());for(const e of t)n._insertBefore(o,e)},wrapInner(t,e){t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}),e=this._nodeFilter(e,{fragment:!0,html:!0});for(const s of t)this._wrapInner(s,e)},_unwrap(t,e){const s=n._parent(t,e);if(!s)return;const i=n._parent(s);if(!s)return;const r=n._childNodes(s);for(const t of r)n._insertBefore(i,t,s);this._remove(s)},_wrap(t,e){const s=n._parent(t);if(!s)return;const i=this.clone(e,!0);for(const e of i)n._insertBefore(s,e,t);const r=this._deepest(i.shift());n._insertBefore(r,t)},_wrapInner(t,e){const s=n._childNodes(t),i=this.clone(e,!0);for(const e of i)n._insertBefore(t,e);const r=this._deepest(i.shift());for(const t of s)n._insertBefore(r,t)}}),Object.assign(n.prototype,{connected(t){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>n._isConnected(t))},equal(t,e){return e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0}),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>n._isEqual(t,e)))},filter(t,e){return e=this._parseFilter(e),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>!e||e(t,s))},filterOne(t,e){return e=this._parseFilter(e),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).find((t,s)=>!e||e(t,s))||null},fixed(t){return this._nodeFilter(t,{node:!0}).filter(t=>e.isElement(t)&&"fixed"===this._css(t,"position")||this._parents(t,t=>e.isElement(t)&&"fixed"===this._css(t,"position"),!1,!0).length)},hidden(t){return this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0}).filter(t=>!this._isVisible(t))},not(t,e){return(e=this._parseFilter(e))?this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>!e(t,s)):[]},same(t,e){return e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0}),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>n._isSame(t,e)))},visible(t){return this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0}).filter(t=>this._isVisible(t))},withAnimation(t){return this._nodeFilter(t).filter(t=>this._hasAnimation(t))},withAttribute(t,e){return this._nodeFilter(t).filter(t=>n._hasAttribute(t,e))},withChildren(t){return this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0}).filter(t=>n._hasChildren(t))},withClass(t,...e){return e=n._parseClasses(e),this._nodeFilter(t).filter(t=>e.some(e=>n._hasClass(t,e)))},withData(t,e){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(t=>this._hasData(t,e))},withDescendent(t,e){return e=this._parseFilterContains(e),this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0}).filter((t,s)=>!e||e(t,s))},withProperty(t,e){return this._nodeFilter(t).filter(t=>n._hasProperty(t,e))},withTransition(t){return this._nodeFilter(t).filter(t=>this._hasTransition(t))}}),Object.assign(n.prototype,{find(t,e=this._context){const s=t.match(n.fastRegex);return s?"#"===s[1]?this.findById(s[2],e):"."===s[1]?this.findByClass(s[2],e):this.findByTag(s[2],e):t.match(n.complexRegex)?this._findByCustom(t,e):this._findBySelector(t,e)},findByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return e.merge([],n._findByClass(t,s));s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});const i=[];for(const r of s)e.merge(i,n._findByClass(t,r));return s.length>1&&i.length>1?e.unique(i):i},findById(t,e=this._context){const s=this.findOneById(t,e);return s?[s]:[]},findByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return e.merge([],n._findByTag(t,s));s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});const i=[];for(const r of s)e.merge(i,n._findByTag(t,r));return s.length>1&&i.length>1?e.unique(i):i},findOne(t,e=this._context){const s=t.match(n.fastRegex);return s?"#"===s[1]?this.findOneById(s[2],e):"."===s[1]?this.findOneByClass(s[2],e):this.findOneByTag(s[2],e):t.match(n.complexRegex)?this._findOneByCustom(t,e):this._findOneBySelector(t,e)},findOneByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return n._findByClass(t,s).item(0);s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});for(const e of s){const s=n._findByClass(t,e).item(0);if(s)return s}return null},findOneById(t,s=this._context){const i=n._findById(t,this._context);return i?e.isDocument(s)?i:e.isElement(s)?n._contains(s,i)?i:null:(s=n._nodeFilter(s)).some(t=>n._contains(t,i))?i:null:null},findOneByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return n._findByTag(t,s).item(0);s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});for(const e of s){const s=n._findByTag(t,e).item(0);if(s)return s}return null},_findByCustom(t,s=this._context){const i=n._prefixSelectors(t,`#${n.tempId} `),r=[];if(e.isElement(s))this.__findByCustom(i,s,r);else{s=this._nodeFilter(s);for(const t of s)this.__findByCustom(i,t,r)}return(s.length>1||i.length>1)&&r.length>1?e.unique(r):r},_findBySelector(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return e.merge([],n._findBySelector(t,s));s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});const i=[];for(const r of s)e.merge(i,n._findBySelector(t,r));return s.length>1&&i.length>1?e.unique(i):i},_findOneByCustom(t,s=this._context){const i=n._prefixSelectors(t,`#${n.tempId} `);if(e.isElement(s))return this.__findOneByCustom(i,s);s=this._nodeFilter(s);for(const t of s){const e=this.__findOneByCustom(i,t);if(e)return e}return null},_findOneBySelector(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return n._findBySelector(t,s).item(0);s=this._nodeFilter(s,{fragment:!0,shadow:!0,document:!0});for(const e of s){const s=n._findOneBySelector(t,e);if(s)return s}return null},__findByCustom(t,s,i=[]){const r=n._getAttribute(s,"id");n._setAttribute(s,"id",n.tempId);const o=n._parent(s);for(const s of t)e.merge(i,n._findBySelector(s,o));return r?n._setAttribute(s,"id",r):n._removeAttribute(s,"id"),i},__findOneByCustom(t,e){const s=n._getAttribute(e,"id");n._setAttribute(e,"id",n.tempId);const i=n._parent(e);if(!i)return null;let r=null;for(const e of t)if(r=n._findOneBySelector(e,i))break;return s?n._setAttribute(e,"id",s):n._removeAttribute(e,"id"),r}}),Object.assign(n.prototype,{child(t,e){return this.children(t,e,!0)},children(t,s,n=!1,i=!0){if(s=this._parseFilter(s),e.isElement(t)||e.isDocument(t)||e.isFragment(t)||e.isShadow(t))return this._children(t,s,n,i);t=this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0});const r=[];for(const o of t)e.merge(r,this._children(o,s,n,i));return t.length>1&&r.length>1?e.unique(r):r},closest(t,e,s){return this.parents(t,e,s,!0)},commonAncestor(t){if(!(t=this.sort(t)).length)return;const e=this.createRange();return 1===t.length?n._select(e,t.shift()):(n._setStartBefore(e,t.shift()),n._setEndAfter(e,t.pop())),e.commonAncestorContainer},contents(t){return this.children(t,!1,!1,!1)},fragment(t){const e=this._nodeFind(t);if(e)return n._fragment(e)},next(t,s){if(s=this._parseFilter(s),e.isNode(t)||e.isFragment(t)||e.isShadow(t))return this._next(t,s);t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0});const n=[];for(const i of t)e.merge(n,this._next(i,s));return t.length>1&&n.length>1?e.unique(n):n},nextAll(t,s,n,i=!1){if(s=this._parseFilter(s),n=this._parseFilter(n),e.isNode(t)||e.isFragment(t)||e.isShadow(t))return this._nextAll(t,s,n,i);t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0});const r=[];for(const o of t)e.merge(r,this._nextAll(o,s,n,i));return t.length>1&&r.length>1?e.unique(r):r},offsetParent(t){return this.forceShow(t,t=>t.offsetParent)},parent(t,s){if(s=this._parseFilter(s),e.isNode(t))return this._parent(t,s);t=this._nodeFilter(t,{node:!0});const n=[];for(const i of t)e.merge(n,this._parent(i,s));return t.length>1&&n.length>1?e.unique(n):n},parents(t,s,n,i=!1){if(s=this._parseFilter(s),n=this._parseFilter(n),e.isNode(t))return this._parents(t,s,n,i);t=this._nodeFilter(t,{node:!0});const r=[];for(const o of t)e.merge(r,this._parents(o,s,n,i));return t.length>1&&r.length>1?e.unique(r):r},prev(t,s){if(s=this._parseFilter(s),e.isNode(t)||e.isFragment(t)||e.isShadow(t))return this._prev(t,s);t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0});const n=[];for(const i of t)e.merge(n,this._prev(i,s));return t.length>1&&n.length>1?e.unique(n):n},prevAll(t,s,n,i=!1){if(s=this._parseFilter(s),n=this._parseFilter(n),e.isNode(t)||e.isFragment(t)||e.isShadow(t))return this._prevAll(t,s,n,i);t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0});const r=[];for(const o of t)e.merge(r,this._prevAll(o,s,n,i));return t.length>1&&r.length?e.unique(r):r},shadow(t){const e=this._nodeFind(t);if(e)return n._shadow(e)},siblings(t,s,n=!0){if(s=this._parseFilter(s),e.isNode(t)||e.isFragment(t)||e.isShadow(t))return this._siblings(t,s,n);t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0});const i=[];for(const r of t)e.merge(i,this._siblings(r,s,n));return t.length>1&&i.length>1?e.unique(i):i},_children(t,e,s=!1,i=!1){const r=i?n._children(t):n._childNodes(t),o=[];let a;for(a of r)if((!e||e(a))&&(o.push(a),s))break;return o},_deepest:t=>e.merge([],n._findBySelector("*",t)).find(t=>!n._hasChildren(t))||t,_next(t,e){const s=[];return(t=n._next(t))?e&&!e(t)?s:(s.push(t),s):s},_nextAll(t,e,s,i=!1){const r=[];for(;(t=n._next(t))&&(!s||!s(t))&&(e&&!e(t)||(r.push(t),!i)););return r},_parent(t,e){const s=[],i=n._parent(t);return i?e&&!e(i)?s:(s.push(i),s):s},_parents(t,s,i,r=!1){const o=[];for(;(t=n._parent(t))&&!e.isDocument(t)&&(!i||!i(t))&&(s&&!s(t)||(o.push(t),!r)););return o},_prev(t,e){const s=[];return(t=n._prev(t))?e&&!e(t)?s:(s.push(t),s):s},_prevAll(t,e,s,i=!1){const r=[];for(;(t=n._prev(t))&&(!s||!s(t))&&(e&&!e(t)||(r.push(t),!i)););return r},_siblings(t,e,s=!0){const i=[],r=n._parent(t);if(!r)return i;const o=s?r.children:r.childNodes;let a;for(a of o)n._isSame(t,a)||e&&!e(a)||i.push(a);return i}}),Object.assign(n.prototype,{_nodeFilter(t,s={}){if(e.isString(t))return"html"in s&&s.html&&"<"===t.trim().charAt(0)?this.parseHTML(t):this.find(t,"context"in s?s.context:this._context);const n=this._nodeFilterFactory(s);return n(t)?[t]:e.wrap(t).filter(n)},_nodeFilterFactory:t=>t?s=>(t.node?e.isNode(s):e.isElement(s))||t.fragment&&e.isFragment(s)||t.shadow&&e.isShadow(s)||t.document&&e.isDocument(s)||t.window&&e.isWindow(s):e.isElement,_nodeFind(t,s={}){if(e.isString(t)){if("html"in s&&s.html&&"<"===t.trim().charAt(0))return this.parseHTML(t).shift();const e=this.findOne(t,"context"in s?s.context:this._context);return e||null}const n=this._nodeFilterFactory(s);if(n(t))return t;const i=e.wrap(t).slice().shift();return i&&n(i)?i:null},_parseFilter(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?e=>n._is(e,t):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>n._isSame(e,t):!!(t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.includes(e)))},_parseFilterContains(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?e=>!!this.findOne(t,e):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>n._contains(e,t):!!(t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.some(t=>n._contains(e,t))))}}),Object.assign(n.prototype,{afterSelection(t){t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0,html:!0});const e=n._getSelection();if(!e.rangeCount)return;const s=n._getRange(e);n._removeRanges(e),n._collapse(s);for(const e of t)n._insert(s,e)},beforeSelection(t){t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0,html:!0});const e=n._getSelection();if(!e.rangeCount)return;const s=n._getRange(e);n._removeRanges(e);for(const e of t)n._insert(s,e)},extractSelection(){const t=n._getSelection();if(!t.rangeCount)return[];const s=n._getRange(t);n._removeRanges(t);const i=n._extract(s);return e.merge([],n._childNodes(i))},getSelection(){const t=n._getSelection();if(!t.rangeCount)return[];const s=n._getRange(t),i=e.merge([],n._findBySelector("*",s.commonAncestorContainer));if(!i.length)return[s.commonAncestorContainer];if(1===i.length)return i;const r=e.isElement(s.startContainer)?s.startContainer:n._parent(s.startContainer).shift(),o=e.isElement(s.endContainer)?s.endContainer:n._parent(s.endContainer).shift();return i.slice(i.indexOf(r),i.indexOf(o)+1)},select(t){const e=this._nodeFind(t,{node:!0,fragment:!0,shadow:!0});if(e&&"select"in e)return e.select();const s=n._getSelection();if(s.rangeCount>0&&n._removeRanges(s),!e)return;const i=this.createRange();n._select(i,e),n._addRange(s,i)},selectAll(t){t=this.sort(t);const e=n._getSelection();if(e.rangeCount&&n._removeRanges(e),!t.length)return;const s=this.createRange();1==t.length?n._select(s,t.shift()):(n._setStartBefore(s,t.shift()),n._setEndAfter(s,t.pop())),n._addRange(e,s)},wrapSelection(s){s=this._nodeFilter(s,{fragment:!0,html:!0});const i=t.getSelection();if(!i.rangeCount)return;const r=i.getRangeAt(0);i.removeAllRanges();const o=n._extract(r),a=this._deepest(s.slice().shift()),l=e.merge([],n._childNodes(o));for(const t of l)n._insertBefore(a,t);for(const t of s)n._insert(r,t)}}),Object.assign(n.prototype,{hasAnimation(t){return this._nodeFilter(t).some(t=>this._hasAnimation(t))},hasAttribute(t,e){return this._nodeFilter(t).some(t=>n._hasAttribute(t,e))},hasChildren(t){return this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0}).some(t=>n._hasChildren(t))},hasClass(t,...e){return e=n._parseClasses(e),this._nodeFilter(t).some(t=>e.some(e=>n._hasClass(t,e)))},hasData(t,e){return this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0,window:!0}).some(t=>this._hasData(t,e))},hasDescendent(t,e){return e=this._parseFilterContains(e),this._nodeFilter(t,{fragment:!0,shadow:!0,document:!0}).some(t=>!e||e(t))},hasFragment(t){return this._nodeFilter(t).some(t=>n._hasFragment(t))},hasProperty(t,e){return this._nodeFilter(t).some(t=>n._hasProperty(t,e))},hasShadow(t){return this._nodeFilter(t).some(t=>n._hasFragment(t))},hasTransition(t){return this._nodeFilter(t).some(t=>this._hasTransition(t))},is(t,e){return e=this._parseFilter(e),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).some(t=>!e||e(t))},isConnected(t){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).some(t=>n._isConnected(t))},isEqual(t,e){return e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0}),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>n._isEqual(t,e)))},isFixed(t){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.isElement(t)&&"fixed"===this._css(t,"position")||this._parents(t,t=>"fixed"===this._css(t,"position"),!1,!0).length)},isHidden(t){return this._nodeFilter(t,{node:!0,document:!0,window:!0}).some(t=>!this._isVisible(t))},isSame(t,e){return e=this._nodeFilter(e,{node:!0,fragment:!0,shadow:!0}),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>n._isSame(t,e)))},isVisible(t){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).some(t=>this._isVisible(t))},_hasAnimation(t){return!!parseFloat(this._css(t,"animation-duration"))},_hasData(t,e){return this._data.has(t)&&(!e||this._data.get(t).hasOwnProperty(e))},_hasTransiton(t){return!!parseFloat(this._css(t,"transition-duration"))},_isVisible:t=>e.isWindow(t)?n._isVisibleWindow(t):e.isDocument(t)?n._isVisibleDocument(t):n._isVisible(t)}),Object.assign(n.prototype,{exec(t,e=null){return this._context.execCommand(t,!1,e)},forceShow(t,s){const i=this._nodeFind(t,{node:!0,document:!0,window:!0});if(!i)return;if(e.isDocument(i)||e.isWindow(i)||n._isVisible(i))return s(i);const r=[];e.isElement(i)&&"none"===this._css(i,"display")&&r.push(i),e.merge(r,this._parents(i,t=>e.isElement(t)&&"none"===this._css(t,"display")));const o=new Map;for(const t of r)o.set(t,n._getAttribute(t,"style")),n._setStyle(t,"display","initial",!0);const a=s(i);for(const[t,e]of o)e?n._setAttribute(t,"style",e):n._removeAttribute(t,"style");return a},index(t,e){return e=this._parseFilter(e),this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).findIndex(t=>!e||e(t))},indexOf(t){const e=this._nodeFind(t,{node:!0});if(e)return n._children(n._parent(e).shift()).indexOf(e)},normalize(t){t=this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0,document:!0});for(const e of t)n._normalize(e)},serialize(t){return n._parseParams(this.serializeArray(t))},serializeArray(t){return this._nodeFilter(t,{fragment:!0,shadow:!0}).reduce((t,s)=>{if(n._is(s,"form")||e.isFragment(s)||e.isShadow(s))return t.concat(this.serializeArray(n._findBySelector("input, select, textarea",s)));if(n._is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return t;const i=n._getAttribute(s,"name");if(!i)return t;const r=n._getAttribute(s,"value")||"";return t.push({name:i,value:r}),t},[])},sort(t){return this._nodeFilter(t,{node:!0,fragment:!0,shadow:!0}).sort((t,e)=>{if(n._isSame(t,e))return 0;const s=n._comparePosition(t,e);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})}}),Object.assign(n,{_getAttribute:(t,e)=>t.getAttribute(e),_getDataset:(t,e)=>e?t.dataset[e]:t.dataset,_getProperty:(t,e)=>t[e],_removeAttribute(t,e){t.removeAttribute(e)},_removeProperty(t,e){delete t[e]},_setAttribute(t,e,s){t.setAttribute(e,s)},_setDataset(t,e){Object.assign(t.dataset,e)},_setProperty(t,e){Object.assign(t,e)}}),Object.assign(n,{_getScrollX:t=>t.scrollLeft,_getScrollXWindow:t=>t.scrollX,_getScrollY:t=>t.scrollTop,_getScrollYWindow:t=>t.scrollY,_setScrollWindow:(t,e,s)=>t.scroll(e,s),_setScrollX(t,e){t.scrollLeft=e},_setScrollY(t,e){t.scrollTop=e}}),Object.assign(n,{_height:t=>t.clientHeight,_heightWindow:(t,e)=>e?t.outerHeight:t.innerHeight,_width:t=>t.clientWidth,_widthWindow:(t,e)=>e?t.outerWeight:t.innerWidth}),Object.assign(n,{_addClass(t,...e){t.classList.add(...e)},_removeClass(t,...e){t.classList.remove(...e)},_toggleClass(t,...e){t.classList.toggle(...e)},_getStyle:(t,e)=>e?t.style[e]:t.style,_setStyle(t,s,n,i){n&&e.isNumeric(n)&&!this.cssNumberProperties.includes(s)&&(n+="px"),t.style.setProperty(s,n,i?"important":"")}}),Object.assign(n,{_blur(t){t.blur()},_click(t){t.click()},_focus(t){t.focus()}}),Object.assign(n,{_addEvent(t,e,s){t.addEventListener(e,s)},_removeEvent(t,e,s){t.removeEventListener(e,s)},_triggerEvent(t,e,s){const n=new Event(e);s&&Object.assign(n,s),t.dispatchEvent(n)}}),Object.assign(n,{_parseClasses:t=>t.flat().flatMap(t=>t.split(" ")),_parseData:(t,s)=>e.isObject(t)?t:{[t]:s},_parseEvent:t=>t.split(".").shift(),_parseEvents:t=>t.split(" "),_parseFormData(t){const s=new FormData;if(e.isArray(t)){const e={};for(const s of t)e[s.name]=s.value;t=e}return this._parseFormValues(t,s),s},_parseFormValues(t,s,n){let i;for(i in t){const r=t[i];if(n&&(i=`${n}[${i}]`),e.isPlainObject(r))this._parseFormValues(r,s,i);else if(e.isArray(r))for(const t of r)s.append(i,t);else s.set(i,r)}},_parseParams(t){let s=[];return e.isArray(t)?s=t.map(t=>this._parseParam(t.name,t.value)):e.isObject(t)&&(s=Object.keys(t).map(e=>this._parseParam(e,t[e]))),s.flatMap(encodeURI).join("&")},_parseParam(t,s){return e.isArray(s)?s.map(e=>this._parseParam(t,e)).flat():e.isObject(s)?Object.keys(s).map(e=>this._parseParam(t+"["+e+"]",s[e])).flat():t+"="+s},_prefixSelectors(t,e){return t.split(this.splitRegex).filter(t=>!!t).map(t=>`${e} ${t}`)}}),Object.assign(n,{_attachShadow:(t,e=!0)=>t.attachShadow({mode:e?"open":"closed"}),_clone:(t,e)=>t.cloneNode(e),_create:(t,e)=>t.createElement(e),_createComment:(t,e)=>t.createCommentNode(e),_createFragment:t=>t.createDocumentFragment(),_createRange:t=>t.createRange(),_createText:(t,e)=>t.createTextNode(e)}),Object.assign(n,{_detach(t){const e=n._parent(t);e||this._removeChild(e,t)},_removeChild(t,e){t.removeChild(e)}}),Object.assign(n,{_insertBefore(t,e,s=null){t.insertBefore(e,s)}}),Object.assign(n,{parseHTML:t=>(new DOMParser).parseFromString(t,"text/html"),parseXML:t=>(new DOMParser).parseFromString(t,"application/xml")}),Object.assign(n,{_findByClass:(t,e)=>e.getElementsByClassName(t),_findById:(t,e)=>e.getElementById(t),_findByTag:(t,e)=>e.getElementsByTagName(t),_findBySelector:(t,e)=>e.querySelectorAll(t),_findOneBySelector:(t,e)=>e.querySelector(t)}),Object.assign(n,{_childNodes:t=>t.childNodes,_children:t=>t.children,_documentElement:t=>t.documentElement,_fragment:t=>t.content,_next:t=>t.nextSibling,_parent:t=>t.parentNode,_prev:t=>t.previousSibling,_scrollingElement:t=>t.scrollingElement,_shadow:t=>t.shadowRoot}),Object.assign(n,{_addRange(t,e){t.addRange(e)},_collapse(t){t.collapse()},_extract:t=>t.extractContents(),_getRange:(t,e=0)=>t.getRangeAt(e),_getSelection:()=>t.getSelection(),_insert(t,e){t.insertNode(e)},_removeRanges(t){t.removeAllRanges()},_select(t,e){t.selectNode(e)},_setEndAfter(t,e){t.setEndAfter(e)},_setStartBefore(t,e){t.setStartBefore(e)}}),Object.assign(n,{_contains:(t,e)=>t.contains(e),_hasAttribute:(t,e)=>t.hasAttribute(e),_hasChildren:t=>!!t.childElementCount,_hasClass:(t,e)=>t.classList.contains(e),_hasFragment:t=>!!t.content,_hasProperty:(t,e)=>t.hasOwnProperty(e),_hasShadow:t=>!!t.shadowRoot,_is:(t,s)=>e.isElement(t)&&t.matches(s),_isConnected:t=>t.isConnected,_isEqual:(t,e)=>t.isEqualNode(e),_isSame:(t,e)=>t.isSameNode(e),_isVisible:t=>!!t.offsetParent,_isVisibleDocument:t=>"visible"===t.visibilityState,_isVisibleWindow(t){return this._isVisibleDocument(t.document)}}),Object.assign(n,{_comparePosition:(t,e)=>t.compareDocumentPosition(e),_normalize(t){t.normalize()}}),Object.assign(n,{ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],complexRegex:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,fastRegex:/^([\#\.]?)([\w\-]+)$/,localRegex:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,splitRegex:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,tempId:"frost"+Date.now().toString(16)}),{DOM:n,dom:new n}});