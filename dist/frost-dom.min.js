!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t:Object.assign(e,t(e))}(this,function(e){"use strict";if(!e)throw new Error("FrostDOM requires a Window.");if(!("Core"in e))throw new Error("FrostDOM requires FrostCore.");const t=e.Core,s=e.document;class n{constructor(e=s){this._context=e,this._animating=!1,this._animations=new Map,this._queues=new WeakMap,this._data=new WeakMap,this._events=new WeakMap,this._styles=new WeakMap}}return Object.assign(n.prototype,{ajax(t){t={url:e.location,headers:{},...n.ajaxDefaults,...t};const s=n.localRegex.test(location.protocol);if(!t.cache){const e=new URL(t.url);e.searchParams.append("_",Date.now()),t.url=e.toString()}return"Content-Type"in t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=t.contentType),s||"X-Requested-With"in t.headers||(t.headers["X-Requested-With"]="XMLHttpRequest"),new Promise((e,i)=>{const o=new XMLHttpRequest;o.open(t.method,t.url,!0);for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);t.responseType&&(o.responseType=t.responseType),o.onload=(t=>{o.status>400?i({status:o.status,xhr:o,event:t}):e({response:o.response,xhr:o,event:t})}),s||(o.onerror=(e=>i({status:o.status,xhr:o,event:e}))),t.uploadProgress&&(o.upload.onprogress=(e=>t.uploadProgress(e.loaded/e.total,o,e))),t.beforeSend&&t.beforeSend(o),t.data&&t.processData&&("application/json"===t.contentType?t.data=JSON.stringify(t.data):"application/x-www-form-urlencoded"===t.contentType?t.data=n._parseParams(t.data):t.data=n._parseFormData(t.data)),o.send(t.data)})},get(e,t){return this.ajax({url:e,...t})},post(e,t,s){return this.ajax({url:e,data:t,method:"POST",...s})},upload(e,t,s){return this.ajax({url:e,data:t,method:"POST",contentType:!1,...s})}}),Object.assign(n.prototype,{loadScript(t,s=!0){return this.ajax({url:t,cache:s}).then(t=>eval.call(e,t.response))},loadScripts(t,s=!0){return Promise.all(t.map(e=>this.ajax({url:e,cache:s}))).then(t=>{for(const s of t)eval.call(e,s.response)})}}),Object.assign(n.prototype,{loadStyle(e,t=!0){return this.ajax({url:e,cache:t}).then(e=>n._append(this._context.head,[this.create("style",{html:e.response})]))},loadStyles(e,t=!0){return Promise.all(e.map(e=>this.ajax({url:e,cache:t}))).then(e=>{const t=[];for(const s of e)t.push(this.create("style",{html:s.response}));n._append(this._context.head,t)})}}),Object.assign(n.prototype,{getCookie(e,t=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(t=>t.trimStart().substring(0,e.length)===e);if(!s)return null;const n=s.trimStart().substring(e.length+1);return t?JSON.parse(n):n},removeCookie(e,t){this.setCookie(e,"",{expires:-1,...t})},setCookie(e,t,s,n=!1){if(!e)return;n&&(t=JSON.stringify(t));let i=`${e}=${t}`;if(s){if(s.expires){let e=new Date;e.setTime(e.getTime()+1e3*s.expires),i+=`;expires=${e.toUTCString()}`}s.path&&(i+=`;path=${s.path}`),s.secure&&(i+=";secure")}this._context.cookie=i}}),Object.assign(n.prototype,{animate(e,t,s){e=this._nodeFilter(e),s={...n.animationDefaults,...s};const i=e.map(e=>this._animate(e,t,s));return this._start(),Promise.all(i)},stop(e,t=!0){e=this._nodeFilter(e);for(const s of e)this._stop(s,t)},_animate(e,s,n){this._animations.has(e)||this._animations.set(e,[]);const i=performance.now();return new Promise((o,r)=>{this._animations.get(e).push((a=!1,d=!1)=>{if(a&&!d)return r(e),!0;let l;return d?l=1:(l=(performance.now()-i)/n.duration,n.infinite?l%=1:l=t.clamp(l),"ease-in"===n.type?l=Math.pow(l,2):"ease-out"===n.type?l=Math.sqrt(l):"ease-in-out"===n.type&&(l=l<=.5?2*Math.pow(l,2):1-(1-l)**2*2)),s(e,l,n),1===l?(o(e),!0):void 0})})},_animationFrame(){for(let[e,t]of this._animations)(t=t.filter(e=>!e())).length?this._animations.set(e,t):this._animations.delete(e);this._animations.size?e.requestAnimationFrame(e=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(e,t=!0){if(this._animations.has(e)){for(const s of this._animations.get(e))s(!0,t);this._animations.delete(e)}}}),Object.assign(n.prototype,{dropIn(e,t){return this.slideIn(e,{direction:"top",...t})},dropOut(e,t){return this.slideOut(e,{direction:"top",...t})},fadeIn(e,t){return this.animate(e,(e,t)=>n._setStyle(e,{opacity:t<1?t:""}),t)},fadeOut(e,t){return this.animate(e,(e,t)=>n._setStyle(e,{opacity:t<1?1-t:""}),t)},rotateIn(e,t){return this.animate(e,(e,t,s)=>n._setStyle(e,{transform:t<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*t)*(s.inverse?-1:1)}deg)`:""}),{x:0,y:1,...t})},rotateOut(e,t){return this.animate(e,(e,t,s)=>n._setStyle(e,{transform:t<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*t*(s.inverse?-1:1)}deg)`:""}),{x:0,y:1,...t})},slideIn(e,s){return this.animate(e,(e,s,i)=>{let o;if(s<1){const n=t.isFunction(i.direction)?i.direction():i.direction;let r,a,d;"top"===n||"bottom"===n?(r="Y",a=this._height(e),d="top"===n):(r="X",a=this._width(e),d="left"===n),o=`translate${r}(${Math.round(a-a*s)*(d?-1:1)}px)`}else o="";n._setStyle(e,{transform:o})},{direction:"bottom",...s})},slideOut(e,s){return this.animate(e,(e,s,i)=>{let o;if(s<1){const n=t.isFunction(i.direction)?i.direction():i.direction;let r,a,d;"top"===n||"bottom"===n?(r="Y",a=this._height(e),d="top"===n):(r="X",a=this._width(e),d="left"===n),o=`translate${r}(${Math.round(a*s)*(d?-1:1)}px)`}else o="";n._setStyle(e,{transform:o})},{direction:"bottom",...s})},squeezeIn(e,t){e=this._nodeFilter(e),t={...n.animationDefaults,direction:"bottom",...t};const s=e.map(e=>this._squeezeIn(e,t));return this._start(),Promise.all(s)},squeezeOut(e,t){e=this._nodeFilter(e),t={...n.animationDefaults,direction:"bottom",...t};const s=e.map(e=>this._squeezeOut(e,t));return this._start(),Promise.all(s)},_squeezeIn(e,s){const i=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(e,i);const o=n._parent(e).shift();return this._animate(e,(e,s,i)=>{if(1===s)return n._before(o,n._children(o,!1,!1,!1)),void this._remove(o);const r=t.isFunction(i.direction)?i.direction():i.direction;let a,d;"top"===r||"bottom"===r?(a="height","top"===r&&(d="Y")):"left"!==r&&"right"!==r||(a="width","left"===r&&(d="X"));const l=Math.round(this[`_${a}`](e)),h=Math.round(l*s),c={[a]:h+"px"};d&&(c.transform=`translate${d}(${l-h}px)`),n._setStyle(o,c)},s)},_squeezeOut(e,s){const i=this.create("div",{style:{overflow:"hidden",position:"relative"}});this._wrap(e,i);const o=n._parent(e).shift();return this._animate(e,(e,s,i)=>{if(1===s)return n._before(o,n._children(o,!1,!1,!1)),void this._remove(o);const r=t.isFunction(i.direction)?i.direction():i.direction;let a,d;"top"===r||"bottom"===r?(a="height","top"===r&&(d="Y")):"left"!==r&&"right"!==r||(a="width","left"===r&&(d="X"));const l=Math.round(this[`_${a}`](e)),h=Math.round(l-l*s),c={[a]:h+"px"};d&&(c.transform=`translate${d}(${l-h}px)`),n._setStyle(o,c)},s)}}),Object.assign(n.prototype,{clearQueue(e){e=this._nodeFilter(e);for(const t of e)this._clearQueue(t)},queue(e,t){e=this._nodeFilter(e);for(const s of e)this._queue(s,t)},_clearQueue(e){this._queues.has(e)&&this._queues.delete(e)},_dequeueNode(e){if(!this._queues.has(e))return;const t=this._queues.get(e).shift();t?Promise.resolve(t(e)).finally(t=>this._dequeueNode(e)):this._queues.delete(e)},_queue(e,t){const s=!this._queues.has(e);s&&this._queues.set(e,[]),this._queues.get(e).push(t),s&&this._dequeueNode(e)}}),Object.assign(n.prototype,{getAttribute(e,t){const s=this._nodeFind(e);if(s)return n._getAttribute(s,t)},getDataset(e,t){const s=this._nodeFind(e);if(s)return n._getDataset(s,t)},getHTML(e){return this.getProperty(e,"innerHTML")},getProperty(e,t){const s=this._nodeFind(e);if(s)return n._getProperty(s,t)},getText(e){return this.getProperty(e,"innerText")},getValue(e){return this.getProperty(e,"value")},removeAttribute(e,t){e=this._nodeFilter(e);for(const s of e)n._removeAttribute(s,t)},removeProperty(e,t){e=this._nodeFilter(e);for(const s of e)n._removeProperty(s,t)},setAttribute(e,t,s){e=this._nodeFilter(e);const i=n._parseData(t,s);for(const t of e)n._setAttribute(t,i)},setDataset(e,t,s){e=this._nodeFilter(e);const i=n._parseData(t,s);for(const t of e)n._setDataset(t,i)},setHTML(e,t){this.empty(e),this.setProperty(e,"innerHTML",t)},setProperty(e,t,s){e=this._nodeFilter(e);const i=n._parseData(t,s);for(const t of e)n._setProperty(t,i)},setText(e,t){this.empty(e),this.setProperty(e,"innerText",t)},setValue(e,t){this.setProperty(e,"value",t)}}),Object.assign(n.prototype,{cloneData(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0,document:!0,window:!0});for(const s of e)this._cloneData(s,t)},getData(e,t){const s=this._nodeFind(e,{node:!0,shadow:!0,document:!0,window:!0});if(s)return this._getData(s,t)},removeData(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0,document:!0,window:!0});for(const s of e)this._removeData(s,t)},setData(e,t,s){e=this._nodeFilter(e,{node:!0,shadow:!0,document:!0,window:!0});const i=n._parseData(t,s);for(const t of e)this._setData(t,i)},_cloneData(e,t){this._data.has(e)&&this.setData(t,{...this._data.get(e)})},_getData(e,t){if(this._data.has(e))return t?this._data.get(e)[t]:this._data.get(e)},_removeData(e,t){if(this._data.has(e)){if(t){const s=this._data.get(e);if(delete s[t],Object.keys(s).length)return}this._data.delete(e)}},_setData(e,t){this._data.has(e)||this._data.set(e,{}),Object.assign(this._data.get(e),t)}}),Object.assign(n.prototype,{center(e,t){const s=this.rect(e,t);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(e,t){const s=this.rect(t);if(s){e=this._nodeFilter(e);for(const t of e)this._constrain(t,s)}},distTo(e,s,n,i){const o=this.center(e,i);if(o)return t.dist(o.x,o.y,s,n)},distToNode(e,t){const s=this.center(t);if(s)return this.distTo(e,s.x,s.y)},nearestTo(e,t,s,n){let i=null,o=Number.MAX_VALUE;e=this._nodeFilter(e);for(const r of e){const e=this.distTo(r,t,s,n);e&&e<o&&(o=e,i=r)}return i},nearestToNode(e,t){const s=this.center(t);if(s)return this.nearestTo(e,s.x,s.y)},percentX(e,s,n){const i=this.rect(e,n);if(i)return t.clampPercent((s-i.left)/i.width*100)},percentY(e,s,n){const i=this.rect(e,n);if(i)return t.clampPercent((s-i.top)/i.height*100)},position(e,t){const s=this._nodeFind(e);if(s)return this._position(s,t)},rect(e,t){const s=this._nodeFind(e);if(s)return this._rect(s,t)},_constrain(e,t){const s=this._rect(e),i={};let o,r;s.height>t.height&&(i.height=t.height),s.width>t.width&&(i.width=t.width),s.left-t.left<0?o=s.left-t.left:s.right-t.right>0&&(o=s.right-t.right),o&&(i.left=`${parseFloat(this._css(e,"left"))-o}px`),s.top-t.top<0?r=s.top-t.top:s.bottom-t.bottom>0&&(r=s.bottom-t.bottom),r&&(i.top=`${parseFloat(this._css(e,"top"))-r}px`),n._setStyle(e,i)},_position(e,t){return this.forceShow(e,e=>{const s={x:e.offsetLeft,y:e.offsetTop};if(t){let t=e;for(;t=t.offsetParent;)s.x+=t.offsetLeft,s.y+=t.offsetTop}return s})},_rect(t,s){return this.forceShow(t,t=>{const i=t.getBoundingClientRect();return s&&(i.x+=n._getScrollX(e),i.y+=n._getScrollY(e)),i})}}),Object.assign(n.prototype,{getScrollX(e){const t=this._nodeFind(e,{document:!0,window:!0});if(t)return n._getScrollX(t)},getScrollY(e){const t=this._nodeFind(e,{document:!0,window:!0});if(t)return n._getScrollY(t)},setScroll(e,t,s){e=this._nodeFilter(e,{document:!0,window:!0});for(const i of e)n._setScroll(i,t,s)},setScrollX(e,t){e=this._nodeFilter(e,{document:!0,window:!0});for(const s of e)n._setScrollX(s,t)},setScrollY(e,t){e=this._nodeFilter(e,{document:!0,window:!0});for(const s of e)n._setScrollY(s,t)}}),Object.assign(n.prototype,{height(e,t=!0,s,n){const i=this._nodeFind(e,{document:!0,window:!0});if(i)return this._height(i,t,s,n)},width(e,t=!0,s,n){const i=this._nodeFind(e,{document:!0,window:!0});if(i)return this._width(i,t,s,n)},_height(e,s=!0,n,i){return t.isWindow(e)?s?e.outerHeight:e.innerHeight:(t.isDocument(e)&&(e=e.documentElement),this.forceShow(e,e=>{let t=e.clientHeight;return s||(t-=parseInt(this._css(e,"padding-top"))+parseInt(this._css(e,"padding-bottom"))),n&&(t+=parseInt(this._css(e,"border-top-width"))+parseInt(this._css(e,"border-bottom-width"))),i&&(t+=parseInt(this._css(e,"margin-top"))+parseInt(this._css(e,"margin-bottom"))),t}))},_width(e,s=!0,n,i){return t.isWindow(e)?s?e.outerWidth:e.innerWidth:(t.isDocument(e)&&(e=e.documentElement),this.forceShow(e,e=>{let t=e.clientWidth;return s||(t-=parseInt(this._css(e,"padding-left"))+parseInt(this._css(e,"padding-right"))),n&&(t+=parseInt(this._css(e,"border-left-width"))+parseInt(this._css(e,"border-right-width"))),i&&(t+=parseInt(this._css(e,"margin-left"))+parseInt(this._css(e,"margin-right"))),t}))}}),Object.assign(n.prototype,{addClass(e,...t){if(e=this._nodeFilter(e),(t=n._parseClasses(t)).length)for(const s of e)n._addClass(s,t)},css(e,t){const s=this._nodeFind(e);if(s)return this._css(s,t)},getStyle(e,t){const s=this._nodeFind(e);if(s)return n._getStyle(s,t)},hide(e){this.setStyle(e,"display","none")},removeClass(e,...t){if(e=this._nodeFilter(e),(t=n._parseClasses(t)).length)for(const s of e)n._removeClass(s,t)},setStyle(e,t,s,i){e=this._nodeFilter(e);const o=n._parseData(t,s);for(const t of e)n._setStyle(t,o,i)},show(e){this.setStyle(e,"display","")},toggle(e){e=this._nodeFilter(e);for(const t of e)n._toggle(t)},toggleClass(e,...t){if(e=this._nodeFilter(e),(t=n._parseClasses(t)).length)for(const s of e)n._toggleClass(s,t)},_css(t,s){return this._styles.has(t)||this._styles.set(t,e.getComputedStyle(t)),this._styles.get(t).getPropertyValue(s)}}),Object.assign(n.prototype,{mouseDragFactory(s,n,i,o=!0){return n&&o&&(n=t.animation(n),i&&(i=t.animation(i))),t=>{if(s&&!1===s(t))return!1;n&&this._addEvent(e,"mousemove",n),(n||i)&&this._addEventOnce(e,"mouseup",t=>{n&&this._removeEvent(e,"mousemove",n),i&&i(t)})}},_delegateFactory(e,t,s){const i=t.match(n.complexRegex)?this._getDelegateContainsFactory(e,t):this._getDelegateMatchFactory(e,t);return t=>{if(n._isSame(t.target,e))return;const o=i(t.target);return o?(t.delegateTarget=o,s(t)):void 0}},_getDelegateContainsFactory:(e,s)=>(s=n._prefixSelectors(selectors,`#${n._tempId}`),i=>{const o=t.merge([],n._findByCustom(s,e));return!!o.length&&(o.includes(i)?i:n._parents(i,e=>o.contains(e),t=>n._isSame(e,t),!0).shift())}),_getDelegateMatchFactory:(e,s)=>i=>t.isElement(i)&&n._is(i,s)?i:n._parents(i,e=>t.isElement(i)&&n._is(e,s),t=>n._isSame(e,t),!0).shift(),_selfDestructFactory(e,t,s,n){const i=o=>(s?this._removeEvent(e,t,n,s):this._removeEvent(e,t,i),n(o));return i}}),Object.assign(n.prototype,{blur(e){const t=this._nodeFind(e);t&&n._blur(t)},click(e){const t=this._nodeFind(e);t&&n._click(t)},focus(e){const t=this._nodeFind(e);t&&n._focus(t)},ready(t){"complete"!==this._context.readyState?this._addEvent(e,"DOMContentLoaded",t):t()},triggerEvent(e,t,s){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const i of e)n._triggerEvent(i,t,s)}}),Object.assign(n.prototype,{addEvent(e,t,s){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const n of e)this._addEvent(n,t,s)},addEventDelegate(e,t,s,n){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const i of e)this._addEvent(i,t,n,s)},addEventDelegateOnce(e,t,s,n){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const i of e)this._addEvent(i,t,n,s,!0)},addEventOnce(e,t,s){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const n of e)this._addEvent(n,t,s,null,!0)},cloneEvents(e,t){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const s of e)this._cloneEvents(s,t)},removeEvent(e,t,s){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const n of e)this._removeEvent(n,t,s)},removeEventDelegate(e,t,s,n){e=this._nodeFilter(e,{shadow:!0,document:!0,window:!0});for(const i of e)this._removeEvent(i,t,n,s)},_addEvent(e,t,s,i,o){let r=s;o&&(r=this._selfDestructFactory(e,t,i,r)),i&&(r=this._delegateFactory(e,i,r)),this._events.has(e)||this._events.set(e,{});const a=this._events.get(e),d={delegate:i,callback:s,realCallback:r,selfDestruct:o};for(const s of n._parseEvents(t)){const t=n._parseEvent(s);if(d.event=s,d.realEvent=t,a[t]){if(a[t].includes(d))return}else a[t]=[];n._addEvent(e,t,r),a[t].push(d)}},_cloneEvents(e,t){if(!this._events.has(e))return;const s=this._events.get(e);for(const e in s)for(const n of s[e])this.addEvent(t,n.event,n.callback,n.delegate,n.selfDestruct)},_removeEvent(e,t,s,i){if(!this._events.has(e))return;const o=this._events.get(e),r=t?n._parseEvents(t):Object.keys(o);for(const t of r){const r=n._parseEvent(t);if(!o[r])return;o[r]=o[r].filter(o=>!!(r===t&&r!==o.realEvent||r!==t&&t!==o.event||i&&(i!==o.delegate||s&&s!==o.callback)||!i&&s&&s!==o.realCallback)||(n._removeEvent(e,o.realEvent,o.realCallback),!1)),o[r].length||delete o[r]}Object.keys(o).length||this._events.delete(e)}}),Object.assign(n.prototype,{attachShadow(e,t=!0){const s=this._nodeFind(e);if(s)return n._attachShadow(s,t)},create(e="div",s=null){const i=n._create(this._context,e);return s?("html"in s?n._setProperty(i,{innerHTML:s.html}):"text"in s&&n._setProperty(i,{innerText:s.text}),"class"in s&&n._addClass(i,n._parseClasses(t.wrap(s.class))),"style"in s&&n._setStyle(i,s.style),"value"in s&&n._setProperty(i,{value:s.value}),"attributes"in s&&n._setAttribute(i,s.attributes),"properties"in s&&n._setProperty(i,s.properties),"dataset"in s&&n._setDataset(i,s.dataset),i):i},createComment(e){return n._createComment(this._context,e)},createFragment(){return n._createFragment(this._context)},createRange(){return n._createRange(this._context)},createText(e){return n._createText(this._context,e)},parseHTML(e){return n._children(this.createRange().createContextualFragment(e))}}),Object.assign(n.prototype,{clone(e,t=!0,s=!1,n=!1){return(e=this._nodeFilter(e,{node:!0,shadow:!0})).map(e=>this._clone(e,t,s,n))},detach(e){e=this._nodeFilter(e,{node:!0,shadow:!0});for(const t of e)n._detach(t)},empty(e){e=this._nodeFilter(e,{shadow:!0,document:!0});for(const t of e)this._empty(t)},remove(e){e=this._nodeFilter(e,{node:!0,shadow:!0});for(const t of e)this._remove(t)},replaceAll(e,t){this.replaceWith(t,e)},replaceWith(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0}),t=this._nodeFilter(t,{node:!0,shadow:!0,html:!0});for(const s of e)this._replaceWith(s,t)},_clone(e,t=!0,s=!1,i=!1){const o=n._clone(e,t);return s||i?(s&&this._cloneEvents(e,o),i&&this._cloneData(e,o),t&&this._deepClone(e,o,s,i),o):o},_deepClone(e,t,s=!1,i=!1){const o=n._children(e,!1,!1,!1),r=n._children(t,!1,!1,!1);for(let e=0;e<o.length;e++)s&&this._cloneEvents(o[e],r[e]),i&&this._cloneData(o[e],r[e]),this._deepClone(o[e],r[e])},_empty(e){const t=n._children(e,!1,!1,!1);for(const e of t)this._remove(e)},_remove(e){t.isElement(e)&&this._empty(e),this._clearQueue(e),this._stop(e),this._styles.has(e)&&this._styles.delete(e),n._detach(e),n._triggerEvent(e,"remove"),this._removeEvent(e),this._removeData(e)},_replaceWith(e,t){n._before(e,this.clone(t,!0)),this._remove(e)}}),Object.assign(n.prototype,{after(e,t){const s=this._nodeFind(e,{node:!0,shadow:!0});s&&(t=this._nodeFilter(t,{node:!0,shadow:!0,html:!0}),n._after(s,t))},append(e,t){const s=this._nodeFind(e,{shadow:!0,document:!0});s&&(t=this._nodeFilter(t,{node:!0,shadow:!0,html:!0}),n._append(s,t))},appendTo(e,t){this.append(t,e)},before(e,t){const s=this._nodeFind(e,{node:!0,shadow:!0});s&&(t=this._nodeFilter(t,{node:!0,shadow:!0,html:!0}),n._before(s,t))},insertAfter(e,t){this.after(t,e)},insertBefore(e,t){this.before(t,e)},prepend(e,t){const s=this._nodeFind(e,{shadow:!0,document:!0});s&&(t=this._nodeFilter(t,{node:!0,shadow:!0,html:!0}),n._prepend(s,t))},prependTo(e,t){this.prepend(t,e)}}),Object.assign(n.prototype,{unwrap(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0});for(const s of e)this._unwrap(s,t)},wrap(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0}),t=this._nodeFilter(t,{shadow:!0,html:!0});for(const s of e)this._wrap(s,t)},wrapAll(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0}),t=this._nodeFilter(t,{shadow:!0,html:!0});const s=this.clone(t,!0);n._before(e,s);const i=n._deepest(s.shift());n._append(i,e)},wrapInner(e,t){e=this._nodeFilter(e,{node:!0,shadow:!0}),t=this._nodeFilter(t,{shadow:!0,html:!0});for(const s of e)this._wrapInner(s,t)},_unwrap(e,t){const s=n._parent(e,t).shift();if(!s)return;const i=n._children(s,!1,!1,!1);n._before(s,i),this._remove(s)},_wrap(e,t){const s=this.clone(t,!0);n._before(e,s);const i=n._deepest(s.shift());n._append(i,[e])},_wrapInner(e,t){const s=n._children(e,!1,!1,!1),i=this.clone(t,!0);n._append(e,i);const o=n._deepest(i.shift());n._append(o,s)}}),Object.assign(n.prototype,{filter(e,t){return t=this._parseFilter(t),this._nodeFilter(e,{node:!0,shadow:!0}).filter((e,s)=>!t||t(e,s))},filterOne(e,t){return t=this._parseFilter(t),this._nodeFilter(e,{node:!0,shadow:!0}).find((e,s)=>!t||t(e,s))||null},has(e,t){return t=this._parseFilterContains(t),this._nodeFilter(e,{shadow:!0,document:!0}).filter((e,s)=>!t||t(e,s))},hasOne(e,t){return t=this._parseFilterContains(t),this._nodeFilter(e,{shadow:!0,document:!0}).find((e,s)=>!t||t(e,s))||null},hidden(e){return this._nodeFilter(e,{shadow:!0,document:!0,window:!0}).filter(e=>n._isHidden(e))},hiddenOne(e){return this._nodeFilter(e,{shadow:!0,document:!0,window:!0}).find(e=>n._isHidden(e))||null},not(e,t){return(t=this._parseFilter(t))?this._nodeFilter(e,{node:!0,shadow:!0}).filter((e,s)=>!t(e,s)):[]},notOne(e,t){return(t=this._parseFilter(t))&&this._nodeFilter(e,{node:!0,shadow:!0}).find((e,s)=>!t(e,s))||null},visible(e){return this._nodeFilter(e,{shadow:!0,document:!0,window:!0}).filter(e=>n._isVisible(e))},visibleOne(e){return this._nodeFilter(e,{shadow:!0,document:!0,window:!0}).find(e=>n._isVisible(e))||null}}),Object.assign(n.prototype,{find(e,t=this._context){const s=e.match(n.fastRegex);return s?"#"===s[1]?this.findById(s[2],t):"."===s[1]?this.findByClass(s[2],t):this.findByTag(s[2],t):e.match(n.complexRegex)?this._findByCustom(e,t):this._findBySelector(e,t)},findByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return t.merge([],n._findByClass(e,s));s=this._nodeFilter(s,{shadow:!0,document:!0});const i=[];for(const o of s)t.merge(i,n._findByClass(e,o));return s.length>1&&i.length>1?t.unique(i):i},findById(e,s=this._context){const i=n._findById(e,this._context);return i?t.isDocument(s)?[i]:t.isElement(s)||t.isShadow(s)?n._has(s,i)?[i]:[]:this.contains(s,i)?[i]:[]:[]},findByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return t.merge([],n._findByTag(e,s));s=this._nodeFilter(s,{shadow:!0,document:!0});const i=[];for(const o of s)t.merge(i,n._findByTag(e,o));return s.length>1&&i.length>1?t.unique(i):i},findOne(e,t=this._context){const s=e.match(n.fastRegex);return s?"#"===s[1]?this.findOneById(s[2],t):"."===s[1]?this.findOneByClass(s[2],t):this.findOneByTag(s[2],t):e.match(n.complexRegex)?this._findOneByCustom(e,t):this._findOneBySelector(e,t)},findOneByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return n._findByClass(e,s).item(0);s=this._nodeFilter(s,{shadow:!0,document:!0});for(const t of s){const s=n._findByClass(e,t).item(0);if(s)return s}return null},findOneById(e,s=this._context){const i=n._findById(e,this._context);return i?t.isDocument(s)?i:t.isElement(s)||t.isShadow(s)?n._has(s,i)?i:null:this.contains(s,i)?i:null:null},findOneByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return n._findByTag(e,s).item(0);s=this._nodeFilter(s,{shadow:!0,document:!0});for(const t of s){const s=n._findByTag(e,t).item(0);if(s)return s}return null},_findByCustom(e,s=this._context){if(t.isString(s))return n._findBySelector(n._prefixSelectors(e,`${s} `),this._context);const i=n._prefixSelectors(e,`#${n.tempId} `);if(t.isElement(s))return t.merge([],n._findByCustom(i,s));s=this._nodeFilter(s);const o=[];for(const e of s)t.merge(o,n._findByCustom(i,e));return s.length>1&&o.length>1?t.unique(o):o},_findBySelector(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return t.merge([],n._findBySelector(e,s));s=this._nodeFilter(s,{shadow:!0,document:!0});const i=[];for(const o of s)t.merge(i,n._findBySelector(e,o));return s.length>1&&i.length>1?t.unique(i):i},_findOneByCustom(e,s=this._context){if(t.isString(s))return n._findOneBySelector(n._prefixSelectors(e,`${s} `),this._context);const i=n._prefixSelectors(e,`#${n.tempId} `);if(t.isElement(s))return n._findOneByCustom(i,s);s=this._nodeFilter(s);for(const e of s){const t=n._findOneByCustom(i,e);if(t)return t}return null},_findOneBySelector(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isShadow(s))return n._findBySelector(e,s).item(0);s=this._nodeFilter(s,{shadow:!0,document:!0});for(const t of s){const s=n._findOneBySelector(e,t);if(s)return s}return null}}),Object.assign(n.prototype,{child(e,t){return this.children(e,t,!0)},children(e,s,i=!1,o=!0){if(s=this._parseFilter(s),t.isElement(e)||t.isDocument(e)||t.isShadow(e))return n._children(e,s,i,o);e=this._nodeFilter(e,{shadow:!0,document:!0});const r=[];for(const a of e)t.merge(r,n._children(a,s,i,o));return e.length>1&&r.length>1?t.unique(r):r},closest(e,t,s){return this.parents(e,t,s,!0)},commonAncestor(e){if(!(e=this.sort(e)).length)return;const t=this.createRange();return 1===e.length?n._select(t,e.shift()):(n._setStartBefore(t,e.shift()),n._setEndAfter(t,e.pop())),t.commonAncestorContainer},contents(e){return this.children(e,!1,!1,!1)},next(e,s){if(s=this._parseFilter(s),t.isNode(e)||t.isShadow(e))return n._next(e,s);e=this._nodeFilter(e,{node:!0,shadow:!0});const i=[];for(const o of e)t.merge(i,n._next(o,s));return e.length>1&&i.length>1?t.unique(i):i},nextAll(e,s,i,o=!1){if(s=this._parseFilter(s),i=this._parseFilter(i),t.isNode(e)||t.isShadow(e))return n._nextAll(e,s,i,o);e=this._nodeFilter(e,{node:!0,shadow:!0});const r=[];for(const a of e)t.merge(r,n._nextAll(a,s,i,o));return e.length>1&&r.length>1?t.unique(r):r},offsetParent(e){return this.forceShow(e,e=>e.offsetParent)},parent(e,s){if(s=this._parseFilter(s),t.isNode(e)||t.isShadow(e))return n._parent(e,s);e=this._nodeFilter(e,{node:!0,shadow:!0});const i=[];for(const o of e)t.merge(i,n._parent(o,s));return e.length>1&&i.length>1?t.unique(i):i},parents(e,s,i,o=!1){if(s=this._parseFilter(s),i=this._parseFilter(i),t.isNode(e)||t.isShadow(e))return n._parents(e,s,i,o);e=this._nodeFilter(e,{node:!0,shadow:!0});const r=[];for(const a of e)t.merge(r,n._parents(a,s,i,o));return e.length>1&&r.length>1?t.unique(r):r},prev(e,s){if(s=this._parseFilter(s),t.isNode(e)||t.isShadow(e))return n._prev(e,s);e=this._nodeFilter(e,{node:!0,shadow:!0});const i=[];for(const o of e)t.merge(i,n._prev(o,s));return e.length>1&&i.length>1?t.unique(i):i},prevAll(e,s,i,o=!1){if(s=this._parseFilter(s),i=this._parseFilter(i),t.isNode(e)||t.isShadow(e))return n._prevAll(e,s,i,o);e=this._nodeFilter(e,{node:!0,shadow:!0});const r=[];for(const a of e)t.merge(r,n._prevAll(a,s,i,o));return e.length>1&&r.length?t.unique(r):r},siblings(e,s,i=!0){if(s=this._parseFilter(s),t.isNode(e)||t.isShadow(e))return n._siblings(e,s,i);e=this._nodeFilter(e,{node:!0,shadow:!0});const o=[];for(const r of e)t.merge(o,n._siblings(r,s,i));return e.length>1&&o.length>1?t.unique(o):o}}),Object.assign(n.prototype,{_nodeFilter(e,s={}){if(t.isString(e))return"html"in s&&s.html&&"<"===e.trim().charAt(0)?this.parseHTML(e):this.find(e,"context"in s?s.context:this._context);const n=this._nodeFilterFactory(s);return n(e)?[e]:t.wrap(e).filter(n)},_nodeFilterFactory:e=>e?s=>(e.node?t.isNode(s):t.isElement(s))||e.fragment&&t.isFragment(s)||e.shadow&&t.isShadow(s)||e.document&&t.isDocument(s)||e.window&&t.isWindow(s):t.isElement,_nodeFind(e,s={}){if(t.isString(e)){if("html"in s&&s.html&&"<"===e.trim().charAt(0))return this.parseHTML(e).shift();const t=this.findOne(e,"context"in s?s.context:this._context);return t||null}const n=this._nodeFilterFactory(s);if(n(e))return e;const i=t.wrap(e).slice().shift();return i&&n(i)?i:null},_parseFilter(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?s=>t.isElement(s)&&n._is(s,e):t.isNode(e)||t.isShadow(e)?t=>n._isSame(t,e):!!(e=this._nodeFilter(e,{node:!0,shadow:!0})).length&&(t=>e.includes(t)))},_parseFilterContains(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>!!this.findOne(e,t):t.isNode(e)||t.isShadow(e)?t=>n._has(t,e):!!(e=this._nodeFilter(e,{node:!0,shadow:!0})).length&&(t=>e.some(e=>n._has(t,e))))}}),Object.assign(n.prototype,{afterSelection(e){e=this._nodeFilter(e,{node:!0,shadow:!0,html:!0});const t=n._getSelection();if(!t.rangeCount)return;const s=n._getRange(t);n._removeRanges(t),n._collapse(s);for(const t of e)n._insert(s,t)},beforeSelection(e){e=this._nodeFilter(e,{node:!0,shadow:!0,html:!0});const t=n._getSelection();if(!t.rangeCount)return;const s=n._getRange(t);n._removeRanges(t);for(const t of e)n._insert(s,t)},extractSelection(){const e=n._getSelection();if(!e.rangeCount)return[];const s=n._getRange(e);return n._removeRanges(e),t.merge([],n._extract(s))},getSelection(){const e=n._getSelection();if(!e.rangeCount)return[];const s=n._getRange(e),i=t.merge([],n._findBySelector("*",s.commonAncestorContainer));if(!i.length)return[s.commonAncestorContainer];if(1===i.length)return i;const o=t.isElement(s.startContainer)?s.startContainer:n._parent(s.startContainer).shift(),r=t.isElement(s.endContainer)?s.endContainer:n._parent(s.endContainer).shift();return i.slice(i.indexOf(o),i.indexOf(r)+1)},select(e){const t=this._nodeFind(e,{node:!0,shadow:!0});if(t&&"select"in t)return t.select();const s=n._getSelection();if(s.rangeCount>0&&n._removeRanges(s),!t)return;const i=this.createRange();n._select(i,t),n._addRange(s,i)},selectAll(e){e=this.sort(e);const t=n._getSelection();if(t.rangeCount&&n._removeRanges(t),!e.length)return;const s=this.createRange();1==e.length?n._select(s,e.shift()):(n._setStartBefore(s,e.shift()),n._setEndAfter(s,e.pop())),n._addRange(t,s)},wrapSelection(s){s=this._nodeFilter(s,{shadow:!0,html:!0});const i=e.getSelection();if(!i.rangeCount)return;const o=i.getRangeAt(0);i.removeAllRanges();const r=n._deepest(s.slice().shift()),a=t.merge([],n._extract(o));n._append(r,a);for(const e of s)n._insert(o,e)}}),Object.assign(n.prototype,{contains(e,t){return t=this._parseFilterContains(t),this._nodeFilter(e,{shadow:!0,document:!0}).some(e=>!t||t(e))},hasAnimation(e){return this._nodeFilter(e).some(e=>!!parseFloat(this._css(e,"animation-duration")))},hasAttribute(e,t){return this._nodeFilter(e).some(e=>e.hasAttribute(t))},hasClass(e,...t){return t=n._parseClasses(t),this._nodeFilter(e).some(e=>t.some(t=>e.classList.contains(t)))},hasData(e,t){return this._nodeFilter(e,{node:!0,shadow:!0,document:!0,window:!0}).some(e=>this._data.has(e)&&(!t||this._data.get(e).hasOwnProperty(t)))},hasProperty(e,t){return this._nodeFilter(e).some(e=>e.hasOwnProperty(t))},hasTransition(e){return this._nodeFilter(e).some(e=>!!parseFloat(this._css(e,"transition-duration")))},is(e,t){return t=this._parseFilter(t),this._nodeFilter(e).some(e=>!t||t(e))},isConnected(e){return this._nodeFilter(e,{node:!0,shadow:!0}).some(e=>n._isConnected(e))},isEqual(e,t){return t=this._nodeFilter(t,{node:!0,shadow:!0}),this._nodeFilter(e,{node:!0,shadow:!0}).some(e=>t.some(t=>n._isEqual(e,t)))},isFixed(e){return this._nodeFilter(e,{node:!0,shadow:!0}).some(e=>t.isElement(e)&&"fixed"===this._css(e,"position")||n._parents(e,e=>"fixed"===this._css(e,"position"),!1,!0).length)},isHidden(e){return this._nodeFilter(e,{node:!0,document:!0,window:!0}).some(e=>!n._isVisible(e))},isSame(e,t){return t=this._nodeFilter(t,{node:!0,shadow:!0}),this._nodeFilter(e,{node:!0,shadow:!0}).some(e=>t.find(t=>n._isSame(e,t)))},isVisible(e){return this._nodeFilter(e,{node:!0,shadow:!0,document:!0,window:!0}).some(e=>n._isVisible(e))}}),Object.assign(n.prototype,{exec(e,t=null){return this._context.execCommand(e,!1,t)},forceShow(e,s){const i=this._nodeFind(e,{node:!0,shadow:!0,document:!0,window:!0});if(!i)return;if(t.isDocument(i)||t.isWindow(i)||n._isVisible(i))return s(i);const o=[];t.isElement(i)&&"none"===this._css(i,"display")&&o.push(i),t.merge(o,n._parents(i,e=>t.isElement(e)&&"none"===this._css(e,"display")));const r=new Map;for(const e of o)r.set(e,n._getAttribute(e,"style")),n._setStyle(e,{display:"initial"},!0);const a=s(i);for(const[e,t]of r)t?n._setAttribute(e,{style:t}):n._removeAttribute(e,"style");return a},index(e,t){return t=this._parseFilter(t),this._nodeFilter(e,{node:!0,shadow:!0}).findIndex(e=>!t||t(e))},indexOf(e){const t=this._nodeFind(e,{node:!0,shadow:!0});if(t)return n._children(n._parent(t).shift()).indexOf(t)},normalize(e){e=this._nodeFilter(e,{node:!0,shadow:!0,document:!0});for(const t of e)n._normalize(t)},serialize(e){return n._parseParams(this.serializeArray(e))},serializeArray(e){return this._nodeFilter(e,{shadow:!0}).reduce((e,s)=>{if(t.isShadow(s)||n._is(s,"form"))return e.concat(this.serializeArray(n._findBySelector("input, select, textarea",s)));if(n._is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return e;const i=n._getAttribute(s,"name");if(!i)return e;const o=n._getAttribute(s,"value")||"";return e.push({name:i,value:o}),e},[])},sort(e){return this._nodeFilter(e,{node:!0,shadow:!0}).sort((e,t)=>n._compareNodes(e,t))}}),Object.assign(n,{_getAttribute:(e,t)=>e.getAttribute(t),_getDataset:(e,t)=>t?e.dataset[t]:e.dataset,_getProperty:(e,t)=>e[t],_removeAttribute(e,t){e.removeAttribute(t)},_removeProperty(e,t){delete e[t]},_setAttribute(e,t){for(const s in t)e.setAttribute(s,t[s])},_setDataset(e,t){Object.assign(e.dataset,t)},_setProperty(e,t){Object.assign(e,t)}}),Object.assign(n,{_getScrollX:e=>t.isWindow(e)?e.scrollX:t.isDocument(e)?e.scrollingElement.scrollLeft:e.scrollLeft,_getScrollY:e=>t.isWindow(e)?e.scrollY:t.isDocument(e)?e.scrollingElement.scrollTop:e.scrollTop,_setScroll:(e,s,n)=>t.isWindow(e)?e.scroll(s,n):t.isDocument(e)?(e.scrollingElement.scrollLeft=s,void(e.scrollingElement.scrollTop=n)):(e.scrollLeft=s,void(e.scrollTop=n)),_setScrollX(e,s){if(t.isWindow(e))return e.scroll(s,e.scrollY);t.isDocument(e)?e.scrollingElement.scrollLeft=s:e.scrollLeft=s},_setScrollY(e,s){if(t.isWindow(e))return e.scroll(e.scrollX,s);t.isDocument(e)?e.scrollingElement.scrollTop=s:e.scrollTop=s}}),Object.assign(n,{_addClass(e,t){e.classList.add(...t)},_removeClass(e,t){e.classList.remove(...t)},_toggleClass(e,t){e.classList.toggle(...t)},_getStyle:(e,s)=>(s=t.snakeCase(s),e.style[s]),_setStyle(e,s,n=""){for(let i in s){let o=s[i];i=t.snakeCase(i),o&&t.isNumeric(o)&&!this.cssNumberProperties.includes(i)&&(o+="px"),e.style.setProperty(i,o,n?"important":"")}},_toggle(e){"none"===this._getStyle(e,"display")?this._setStyle(e,{display:""}):this._setStyle(e,{display:"none"})}}),Object.assign(n,{_blur(e){e.blur()},_click(e){e.click()},_focus(e){e.focus()},_triggerEvent(e,t,s){for(const n of this._parseEvents(t)){const t=this._parseEvent(n),i=new Event(t);s&&Object.assign(i,s),e.dispatchEvent(i)}}}),Object.assign(n,{_addEvent(e,t,s){e.addEventListener(t,s)},_removeEvent(e,t,s){e.removeEventListener(t,s)}}),Object.assign(n,{_parseClasses:e=>e.flat().flatMap(e=>e.split(" ")),_parseData:(e,s)=>t.isObject(e)?e:{[e]:s},_parseEvent:e=>e.split(".").shift(),_parseEvents:e=>e.split(" "),_parseFormData(e){const s=new FormData;if(t.isArray(e)){const t={};for(const s of e)t[s.name]=s.value;e=t}return this._parseFormValues(e,s),s},_parseFormValues(e,s,n){let i;for(i in e){const o=e[i];if(n&&(i=`${n}[${i}]`),t.isPlainObject(o))this._parseFormValues(o,s,i);else if(t.isArray(o))for(const e of o)s.append(i,e);else s.set(i,o)}},_parseParams(e){let s=[];return t.isArray(e)?s=e.map(e=>this._parseParam(e.name,e.value)):t.isObject(e)&&(s=Object.keys(e).map(t=>this._parseParam(t,e[t]))),s.flatMap(encodeURI).join("&")},_parseParam(e,s){return t.isArray(s)?s.map(t=>this._parseParam(e,t)).flat():t.isObject(s)?Object.keys(s).map(t=>this._parseParam(e+"["+t+"]",s[t])).flat():e+"="+s},_prefixSelectors(e,t){return e.split(this.splitRegex).filter(e=>!!e).map(e=>`${t} ${e}`).join(", ")}}),Object.assign(n,{_attachShadow:(e,t=!0)=>e.attachShadow({mode:t?"open":"closed"}),_clone:(e,t)=>e.cloneNode(t),_create:(e,t)=>e.createElement(t),_createComment:(e,t)=>e.createCommentNode(t),_createFragment:e=>e.createDocumentFragment(),_createRange:e=>e.createRange(),_createText:(e,t)=>e.createTextNode(t)}),Object.assign(n,{_detach(e){e.parentNode&&e.parentNode.removeChild(e)}}),Object.assign(n,{_after(e,t){if(e.parentNode)for(const s of t.reverse())e.parentNode.insertBefore(s,e.nextSibling)},_append(e,t){for(const s of t)e.insertBefore(s,null)},_before(e,t){if(e.parentNode)for(const s of t)e.parentNode.insertBefore(s,e)},_prepend(e,t){for(const s of t.reverse())e.insertBefore(s,e.firstChild)}}),Object.assign(n,{parseHTML:e=>(new DOMParser).parseFromString(e,"text/html"),parseXML:e=>(new DOMParser).parseFromString(e,"application/xml")}),Object.assign(n,{_findByClass:(e,t)=>t.getElementsByClassName(e),_findByCustom(e,t){const s=this._getAttribute(t,"id");this._setAttribute(t,{id:this.tempId});const n=this._findBySelector(e,t);return s?this._setAttribute(t,{id:s}):this._removeAttribute(t,"id"),n},_findById:(e,t)=>t.getElementById(e),_findByTag:(e,t)=>t.getElementsByTagName(e),_findBySelector:(e,t)=>t.querySelectorAll(e),_findOneByCustom(e,t){const s=this._getAttribute(t,"id");this._setAttribute(t,{id:this.tempId});const n=this._findOneBySelector(e,t);return s?this._setAttribute(t,{id:s}):this._removeAttribute(t,"id"),n},_findOneBySelector:(e,t)=>t.querySelector(e)}),Object.assign(n,{_children(e,t,s=!1,n=!1){const i=n?e.children:e.childNodes,o=[];let r;for(r of i)if((!t||t(r))&&(o.push(r),s))break;return o},_deepest(e){return t.merge([],this._findBySelector("*",e)).find(e=>!this._hasChildren(e))||e},_next(e,t){const s=[];return(e=e.nextSibling)?t&&!t(e)?s:(s.push(e),s):s},_nextAll(e,t,s,n=!1){const i=[];for(;(e=e.nextSibling)&&(!s||!s(e))&&(t&&!t(e)||(i.push(e),!n)););return i},_parent(e,t){const s=[];return e.parentNode?t&&!t(e.parentNode)?s:(s.push(e.parentNode),s):s},_parents(e,s,n,i=!1){const o=[];for(;(e=e.parentNode)&&!t.isDocument(e)&&(!n||!n(e))&&(s&&!s(e)||(o.push(e),!i)););return o},_prev(e,t){const s=[];return(e=e.previousSibling)?t&&!t(e)?s:(s.push(e),s):s},_prevAll(e,t,s,n=!1){const i=[];for(;(e=e.previousSibling)&&(!s||!s(e))&&(t&&!t(e)||(i.push(e),!n)););return i},_siblings(e,t,s=!0){const i=[];if(!e.parentNode)return i;const o=s?e.parentNode.children:e.parentNode.childNodes;let r;for(r of o)n._isSame(e,r)||t&&!t(r)||i.push(r);return i}}),Object.assign(n,{_addRange(e,t){e.addRange(t)},_collapse(e){e.collapse()},_extract:e=>e.extractContents().childNodes,_getRange:(e,t=0)=>e.getRangeAt(t),_getSelection:()=>e.getSelection(),_insert(e,t){e.insertNode(t)},_removeRanges(e){e.removeAllRanges()},_select(e,t){e.selectNode(t)},_setEndAfter(e,t){e.setEndAfter(t)},_setStartBefore(e,t){e.setStartBefore(t)}}),Object.assign(n,{_has:(e,t)=>e.contains(t),_hasChildren:e=>!!e.childElementCount,_is:(e,t)=>e.matches(t),_isConnected:e=>e.isConnected,_isEqual:(e,t)=>e.isEqualNode(t),_isSame:(e,t)=>e.isSameNode(t),_isVisible:e=>(t.isWindow(e)&&(e=e.document),t.isDocument(e)?"visible"===e.visibilityState:(t.isShadow(e)&&(e=e.host),!!e.offsetParent))}),Object.assign(n,{_compareNodes(e,t){if(this._isSame(e,t))return 0;const s=e.compareDocumentPosition(t);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0},_normalize(e){e.normalize()}}),Object.assign(n,{ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],complexRegex:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,fastRegex:/^([\#\.]?)([\w\-]+)$/,localRegex:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,splitRegex:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,tempId:"frost"+Date.now().toString(16)}),{DOM:n,dom:new n}});