!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:Object.assign(t,e(t))}(this,(function(t){"use strict";if(!t)throw new Error("FrostDOM requires a Window.");if(!("Core"in t))throw new Error("FrostDOM requires FrostCore.");const e=t.Core,s=t.document;class o{constructor(s){if(this._options=e.extend({},this.constructor.defaults,s),this._options.url||(this._options.url=t.location.href),!this._options.cache){const e=(t.location.origin+t.location.pathname).replace(/\/$/,""),s=new URL(this._options.url,e);s.searchParams.append("_",Date.now()),this._options.url=s.toString(),this._options.url.substring(0,e.length)===e&&(this._options.url=this._options.url.substring(e.length))}!("Content-Type"in this._options.headers)&&this._options.contentType&&(this._options.headers["Content-Type"]=this._options.contentType),this._isLocal=this.constructor._localRegExp.test(location.protocol),this._isLocal||"X-Requested-With"in this._options.headers||(this._options.headers["X-Requested-With"]="XMLHttpRequest"),this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this.promise=new Promise((t,e)=>{this._resolve=e=>{this._isResolved=!0,t(e)},this._reject=t=>{this._isRejected=!0,e(t)}}),this._build(),this._events(),this._send()}cancel(t="Request was cancelled"){this._isResolved||this._isRejected||this._isCancelled||(this._xhr.abort(),this._isCancelled=!0,this._options.rejectOnCancel&&this._reject({status:this._xhr.status,xhr:this._xhr,reason:t}))}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}then(t,e){return this.promise.then(t,e)}}class r{constructor(){this.data={headers:{}},this.status=200,this.upload={}}abort(){clearTimeout(this._uploadTimer),clearTimeout(this._progressTimer),clearTimeout(this._completeTimer)}open(t,e,s){this.data.method=t,this.data.url=e,this.data.async=s}send(t){this.data.body=t,this.responseType&&(this.data.responseType=this.responseType),this.upload&&this.upload.onprogress&&(this._uploadTimer=setTimeout(t=>{this._uploadTimer=null;const e=new Event("progress");e.loaded=5e3,e.total=1e4,this.upload.onprogress(e)},10)),this.onprogress&&(this._progressTimer=setTimeout(t=>{this._progressTimer=null;const e=new Event("progress");e.loaded=500,e.total=1e3,this.onprogress(e)},10)),this._completeTimer=setTimeout(t=>{if(this._completeTimer=null,this.forceError){if(this.onerror){const t=new Event("error");this.onerror(t)}}else if(this.data.status=this.status,this.response="Test",this.onload){const t=new Event("load");this.onload(t)}},20)}setRequestHeader(t,e){this.data.headers[t]=e}}Object.assign(o.prototype,{_build(){this._xhr=this.constructor.useMock?new r:new XMLHttpRequest,this._xhr.open(this._options.method,this._options.url,!0);for(const t in this._options.headers)this._xhr.setRequestHeader(t,this._options.headers[t]);this._options.responseType&&(this._xhr.responseType=this._options.responseType)},_events(){this._xhr.onload=t=>{this._xhr.status>400?this._reject({status:this._xhr.status,xhr:this._xhr,event:t}):this._resolve({response:this._xhr.response,xhr:this._xhr,event:t})},this._isLocal||(this._xhr.onerror=t=>this._reject({status:this._xhr.status,xhr:this._xhr,event:t})),this._options.onProgress&&(this._xhr.onprogress=t=>this._options.onProgress(t.loaded/t.total,this._xhr,t)),this._options.onUploadProgress&&(this._xhr.upload.onprogress=t=>this._options.onUploadProgress(t.loaded/t.total,this._xhr,t))},_send(){this._options.beforeSend&&this._options.beforeSend(this._xhr),this._options.data&&this._options.processData&&("application/json"===this._options.contentType?this._options.data=JSON.stringify(this._options.data):"application/x-www-form-urlencoded"===this._options.contentType?this._options.data=this.constructor._parseParams(this._options.data):this._options.data=this.constructor._parseFormData(this._options.data)),this._xhr.send(this._options.data),this._options.afterSend&&this._options.afterSend(this._xhr)}}),Object.assign(o,{_parseFormData(t){const e=this._parseValues(t),s=new FormData;for(const[t,o]of e)"[]"===t.substring(t.length-2)?s.append(t,o):s.set(t,o);return s},_parseParams(t){const e=this._parseValues(t).map(([t,e])=>`${t}=${e}`).join("&");return encodeURI(e)},_parseValue(t,s){if(e.isArray(s)){"[]"!==t.substring(t.length-2)&&(t+="[]");const e=[];for(const o of s)e.push(...this._parseValue(t,o));return e}if(e.isObject(s)){const e=[];for(const o in s)e.push(...this._parseValue(`${t}[${o}]`,s[o]));return e}return[[t,s]]},_parseValues(t){const s=[];if(e.isArray(t))for(const e of t)s.push(...this._parseValue(e.name,e.value));else if(e.isObject(t))for(const e in t)s.push(...this._parseValue(e,t[e]));return s}}),Object.assign(o,{defaults:{afterSend:!1,beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:null,headers:{},method:"GET",onProgress:!1,onUploadProgress:!1,processData:!0,rejectOnCancel:!0,responseType:!1,url:!1},_localRegExp:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/}),Object.setPrototypeOf(o.prototype,Promise.prototype);class n{constructor(t,e,s){this._node=t,this._callback=e,this._options={...this.constructor.defaults,...s},"start"in this._options||(this._options.start=performance.now()),this._options.debug&&a.setDataset(this._node,"animationStart",this._options.start),this.promise=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.constructor._animations.has(t)?this.constructor._animations.get(t).push(this):this.constructor._animations.set(t,[this])}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}then(t,e){return this.promise.then(t,e)}update(t=!1,s=!1){if(t&&!s)return this._reject(this._node),!0;const o=performance.now();let r;return s?r=1:(r=(o-this._options.start)/this._options.duration,this._options.infinite?r%=1:r=e.clamp(r),"ease-in"===this._options.type?r=r**2:"ease-out"===this._options.type?r=Math.sqrt(r):"ease-in-out"===this._options.type&&(r=r<=.5?r**2*2:1-(1-r)**2*2)),this._options.debug&&(a.setDataset(this._node,"animationNow",o),a.setDataset(this._node,"animationProgress",r)),this._callback(this._node,r,this._options),r<1?void 0:(this._options.debug&&(a.removeDataset(this._node,"animationStart"),a.removeDataset(this._node,"animationNow"),a.removeDataset(this._node,"animationProgress")),this._resolve(this._node),!0)}}Object.assign(n,{start(){this._animating||(this._animating=!0,this.update())},stop(t,e=!0){if(!this._animations.has(t))return;const s=this._animations.get(t);for(const t of s)t.update(!0,e);this._animations.delete(t)},update(){for(let[t,e]of this._animations)e=e.filter(t=>!t.update()),e.length?this._animations.set(t,e):this._animations.delete(t);this._animations.size?this.useTimeout?setTimeout(t=>this.update(),1e3/60):t.requestAnimationFrame(t=>this.update()):this._animating=!1}}),Object.assign(n,{defaults:{duration:1e3,type:"ease-in-out",infinite:!1,debug:!1},_animating:!1,_animations:new Map}),Object.setPrototypeOf(n.prototype,Promise.prototype);class i{constructor(t=s){this._context=t}}Object.assign(i.prototype,{ajax:t=>new o(t),delete:(t,e)=>new o({url:t,method:"DELETE",...e}),get:(t,e)=>new o({url:t,...e}),patch:(t,e,s)=>new o({url:t,data:e,method:"PATCH",...s}),post:(t,e,s)=>new o({url:t,data:e,method:"POST",...s}),put:(t,e,s)=>new o({url:t,data:e,method:"PUT",...s}),upload:(t,e,s)=>new o({url:t,data:e,method:"POST",contentType:!1,...s})}),Object.assign(i.prototype,{loadScript:(e,s=!0)=>new o({url:e,cache:s}).then(e=>eval.call(t,e.response)),loadScripts:(e,s=!0)=>Promise.all(e.map(t=>new o({url:t,cache:s}))).then(e=>{for(const s of e)eval.call(t,s.response)})}),Object.assign(i.prototype,{loadStyle(t,e=!0){return new o({url:t,cache:e}).then(t=>a.insertBefore(this._context.head,this.create("style",{html:t.response})))},loadStyles(t,e=!0){return Promise.all(t.map(t=>new o({url:t,cache:e}))).then(t=>{for(const e of t)a.insertBefore(this._context.head,this.create("style",{html:e.response}))})}}),Object.assign(i.prototype,{animate(t,e,s){const o=(t=this.parseNodes(t)).map(t=>new n(t,e,s));return n.start(),Promise.all(o)},stop(t,e=!0){t=this.parseNodes(t);for(const s of t)n.stop(s,e)}}),Object.assign(i.prototype,{dropIn(t,e){return this.slideIn(t,{direction:"top",...e})},dropOut(t,e){return this.slideOut(t,{direction:"top",...e})},fadeIn(t,e){return this.animate(t,(t,e)=>a.setStyle(t,"opacity",e<1?e.toFixed(2):""),e)},fadeOut(t,e){return this.animate(t,(t,e)=>a.setStyle(t,"opacity",e<1?(1-e).toFixed(2):""),e)},rotateIn(t,e){return this.animate(t,(t,e,s)=>{const o=((90-90*e)*(s.inverse?-1:1)).toFixed(2);a.setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${o}deg)`:"")},{x:0,y:1,...e})},rotateOut(t,e){return this.animate(t,(t,e,s)=>{const o=(90*e*(s.inverse?-1:1)).toFixed(2);a.setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${o}deg)`:"")},{x:0,y:1,...e})},slideIn(t,s){return this.animate(t,(t,s,o)=>{if(1===s)return a.setStyle(t,"overflow",""),void(o.useGpu?a.setStyle(t,"transform",""):(a.setStyle(t,"margin-left",""),a.setStyle(t,"margin-top","")));const r=e.isFunction(o.direction)?o.direction():o.direction;let n,i,c;["top","bottom"].includes(r)?(n=o.useGpu?"Y":"margin-top",i=this.constructor._height(t),c="top"===r):(n=o.useGpu?"X":"margin-left",i=this.constructor._width(t),c="left"===r);const h=((i-i*s)*(c?-1:1)).toFixed(2);o.useGpu?a.setStyle(t,"transform",`translate${n}(${h}px)`):a.setStyle(t,n,h+"px")},{direction:"bottom",useGpu:!0,...s})},slideOut(t,s){return this.animate(t,(t,s,o)=>{if(1===s)return a.setStyle(t,"overflow",""),void(o.useGpu?a.setStyle(t,"transform",""):(a.setStyle(t,"margin-left",""),a.setStyle(t,"margin-top","")));const r=e.isFunction(o.direction)?o.direction():o.direction;let n,i,c;["top","bottom"].includes(r)?(n=o.useGpu?"Y":"margin-top",i=this.constructor._height(t),c="top"===r):(n=o.useGpu?"X":"margin-left",i=this.constructor._width(t),c="left"===r);const h=(i*s*(c?-1:1)).toFixed(2);o.useGpu?a.setStyle(t,"transform",`translate${n}(${h}px)`):a.setStyle(t,n,h+"px")},{direction:"bottom",useGpu:!0,...s})},squeezeIn(t,s){t=this.parseNodes(t),s={direction:"bottom",useGpu:!0,...s};const o=t.map(t=>{const o=a.getStyle(t,"height"),r=a.getStyle(t,"width");return a.setStyle(t,"overflow","hidden"),new n(t,(t,s,n)=>{if(a.setStyle(t,"height",o),a.setStyle(t,"width",r),1===s)return a.setStyle(t,"overflow",""),void(n.useGpu?a.setStyle(t,"transform",""):(a.setStyle(t,"margin-left",""),a.setStyle(t,"margin-top","")));const c=e.isFunction(n.direction)?n.direction():n.direction;let h,l;["top","bottom"].includes(c)?(h="height","top"===c&&(l=n.useGpu?"Y":"margin-top")):(h="width","left"===c&&(l=n.useGpu?"X":"margin-left"));const d=i["_"+h](t),u=(d*s).toFixed(2);if(a.setStyle(t,h,u+"px"),l){const e=(d-u).toFixed(2);n.useGpu?a.setStyle(t,"transform",`translate${l}(${e}px)`):a.setStyle(t,l,e+"px")}},s)});return n.start(),Promise.all(o)},squeezeOut(t,s){t=this.parseNodes(t),s={direction:"bottom",useGpu:!0,...s};const o=t.map(t=>{const o=a.getStyle(t,"height"),r=a.getStyle(t,"width");return a.setStyle(t,"overflow","hidden"),new n(t,(t,s,n)=>{if(a.setStyle(t,"height",o),a.setStyle(t,"width",r),1===s)return a.setStyle(t,"overflow",""),void(n.useGpu?a.setStyle(t,"transform",""):(a.setStyle(t,"margin-left",""),a.setStyle(t,"margin-top","")));const c=e.isFunction(n.direction)?n.direction():n.direction;let h,l;["top","bottom"].includes(c)?(h="height","top"===c&&(l=n.useGpu?"Y":"margin-top")):(h="width","left"===c&&(l=n.useGpu?"X":"margin-left"));const d=i["_"+h](t),u=(d-d*s).toFixed(2);if(a.setStyle(t,h,u+"px"),l){const e=(d-u).toFixed(2);n.useGpu?a.setStyle(t,"transform",`translate${l}(${e}px)`):a.setStyle(t,l,e+"px")}},s)});return n.start(),Promise.all(o)}}),Object.assign(i.prototype,{clearQueue(t){t=this.parseNodes(t);for(const e of t)this.constructor._clearQueue(e)},queue(t,e){t=this.parseNodes(t);for(const s of t)this.constructor._queue(s,e)}}),Object.assign(i.prototype,{getAttribute(t,e){const s=this.parseNode(t);if(s)return this.constructor._getAttribute(s,e)},getDataset(t,e){const s=this.parseNode(t);if(s)return this.constructor._getDataset(s,e)},getHTML(t){return this.getProperty(t,"innerHTML")},getProperty(t,e){const s=this.parseNode(t);if(s)return a.getProperty(s,e)},getText(t){return this.getProperty(t,"innerText")},getValue(t){return this.getProperty(t,"value")},removeAttribute(t,e){t=this.parseNodes(t);for(const s of t)a.removeAttribute(s,e)},removeDataset(t,e){t=this.parseNodes(t);for(const s of t)this.constructor._removeDataset(s,e)},removeProperty(t,e){t=this.parseNodes(t);for(const s of t)a.removeProperty(s,e)},setAttribute(t,e,s){t=this.parseNodes(t);const o=this.constructor._parseData(e,s);for(const e of t)this.constructor._setAttribute(e,o)},setDataset(t,e,s){t=this.parseNodes(t);const o=this.constructor._parseData(e,s,!0);for(const e of t)this.constructor._setDataset(e,o)},setHTML(t,e){this.empty(t),this.setProperty(t,"innerHTML",e)},setProperty(t,e,s){t=this.parseNodes(t);const o=this.constructor._parseData(e,s);for(const e of t)for(const t in o)a.setProperty(e,t,o[t])},setText(t,e){this.empty(t),this.setProperty(t,"innerText",e)},setValue(t,e){this.setProperty(t,"value",e)}}),Object.assign(i.prototype,{cloneData(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0}),e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)for(const t of e)this.constructor._cloneData(s,t)},getData(t,e){const s=this.parseNode(t,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return this.constructor._getData(s,e)},removeData(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)this.constructor._removeData(s,e)},setData(t,e,s){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});const o=this.constructor._parseData(e,s);for(const e of t)this.constructor._setData(e,o)}}),Object.assign(i.prototype,{center(t,e){const s=this.rect(t,e);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(t,e){const s=this.rect(e);if(s){t=this.parseNodes(t);for(const e of t)this.constructor._constrain(e,s)}},distTo(t,s,o,r){const n=this.center(t,r);if(n)return e.dist(n.x,n.y,s,o)},distToNode(t,e){const s=this.center(e);if(s)return this.distTo(t,s.x,s.y)},nearestTo(t,e,s,o){let r,n=Number.MAX_VALUE;t=this.parseNodes(t);for(const i of t){const t=this.distTo(i,e,s,o);t&&t<n&&(n=t,r=i)}return r},nearestToNode(t,e){const s=this.center(e);if(s)return this.nearestTo(t,s.x,s.y)},percentX(t,s,o,r=!0){const n=this.rect(t,o);if(!n)return;const i=(s-n.left)/n.width*100;return r?e.clampPercent(i):i},percentY(t,s,o,r=!0){const n=this.rect(t,o);if(!n)return;const i=(s-n.top)/n.height*100;return r?e.clampPercent(i):i},position(t,e){const s=this.parseNode(t);if(s)return this.constructor._position(s,e)},rect(t,e){const s=this.parseNode(t);if(s)return this.constructor._rect(s,e)}}),Object.assign(i.prototype,{getScrollX(t){const s=this.parseNode(t,{document:!0,window:!0});if(s)return e.isWindow(s)?a.getScrollXWindow(s):e.isDocument(s)?this.constructor._getScrollXDocument(s):a.getScrollX(s)},getScrollY(t){const s=this.parseNode(t,{document:!0,window:!0});if(s)return e.isWindow(s)?a.getScrollYWindow(s):e.isDocument(s)?this.constructor._getScrollYDocument(s):a.getScrollY(s)},setScroll(t,s,o){t=this.parseNodes(t,{document:!0,window:!0});for(const r of t)e.isWindow(r)?a.setScrollWindow(r,s,o):e.isDocument(r)?this.constructor._setScrollDocument(r,s,o):this.constructor._setScroll(r,s,o)},setScrollX(t,s){t=this.parseNodes(t,{document:!0,window:!0});for(const o of t)e.isWindow(o)?this.constructor._setScrollXWindow(o,s):e.isDocument(o)?this.constructor._setScrollXDocument(o,s):a.setScrollX(o,s)},setScrollY(t,s){t=this.parseNodes(t,{document:!0,window:!0});for(const o of t)e.isWindow(o)?this.constructor._setScrollYWindow(o,s):e.isDocument(o)?this.constructor._setScrollYDocument(o,s):a.setScrollY(o,s)}}),Object.assign(i.prototype,{height(t,s){const o=this.parseNode(t,{document:!0,window:!0});if(o)return e.isWindow(o)?a.heightWindow(o,e.isUndefined(s)?0:s):(e.isUndefined(s)&&(s=1),this.constructor._height(o,s))},scrollHeight(t){const e=this.parseNode(t,{document:!0});if(e)return this.constructor._scrollHeight(e)},scrollWidth(t){const e=this.parseNode(t,{document:!0});if(e)return this.constructor._scrollWidth(e)},width(t,s){const o=this.parseNode(t,{document:!0,window:!0});if(o)return e.isWindow(o)?a.widthWindow(o,e.isUndefined(s)?0:s):(e.isUndefined(s)&&(s=1),this.constructor._width(o,s))}}),Object.assign(i.prototype,{addClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)a.addClass(s,...e)},css(t,e){const s=this.parseNode(t);if(s)return this.constructor._css(s,e)},getStyle(t,e){const s=this.parseNode(t);if(s)return this.constructor._getStyle(s,e)},hide(t){this.setStyle(t,"display","none")},removeClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)a.removeClass(s,...e)},setStyle(t,e,s,o){t=this.parseNodes(t);const r=this.constructor._parseData(e,s);for(const e of t)this.constructor._setStyle(e,r,o)},show(t){this.setStyle(t,"display","")},toggle(t){t=this.parseNodes(t);for(const e of t)"none"===a.getStyle(e,"display")?a.setStyle(e,"display",""):a.setStyle(e,"display","none")},toggleClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)for(const t of e)a.toggleClass(s,t)}}),Object.assign(i.prototype,{getCookie(t){const e=this._context.cookie.split(";").find(e=>e.trimStart().substring(0,t.length)===t).trimStart();return e?decodeURIComponent(e.substring(t.length+1)):null},removeCookie(t,e){if(!t)return;let s=t+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC";e&&(e.path&&(s+=";path="+e.path),e.secure&&(s+=";secure")),this._context.cookie=s},setCookie(t,e,s){if(!t)return;let o=`${t}=${e}`;if(s){if(s.expires){const t=new Date;t.setTime(t.getTime()+1e3*s.expires),o+=";expires="+t.toUTCString()}s.path&&(o+=";path="+s.path),s.secure&&(o+=";secure")}this._context.cookie=o}}),Object.assign(i.prototype,{mouseDragFactory(s,o,r,n=!0){return o&&n&&(o=e.animation(o),r&&(r=e.animation(r))),e=>{if(s&&!1===s(e))return!1;o&&this.addEvent(t,"mousemove",o),(o||r)&&this.addEvent(t,"mouseup",e=>{o&&this.removeEvent(t,"mousemove",o),r&&r(e)},!1,!0)}}}),Object.assign(i.prototype,{blur(t){const e=this.parseNode(t);e&&a.blur(e)},click(t){const e=this.parseNode(t);e&&a.click(e)},focus(t){const e=this.parseNode(t);e&&a.focus(e)},ready(e){"complete"!==this._context.readyState?this.constructor._addEvent(t,"DOMContentLoaded",e):e()}}),Object.assign(i.prototype,{addEvent(t,e,s,o,r){t=this.parseNodes(t,{shadow:!0,document:!0,window:!o});for(const n of t)for(const t of this.constructor._parseEvents(e))this.constructor._addEvent(n,t,s,o,r)},addEventDelegate(t,e,s,o){this.addEvent(t,e,o,s)},addEventDelegateOnce(t,e,s,o){this.addEvent(t,e,o,s,!0)},addEventOnce(t,e,s){this.addEvent(t,e,s,null,!0)},cloneEvents(t,e){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0}),e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const s of t)for(const t of e)this.constructor._cloneEvents(s,t)},removeEvent(t,e,s,o){t=this.parseNodes(t,{shadow:!0,document:!0,window:!o}),e=!!e&&this.constructor._parseEvents(e);for(const r of t)if(this.constructor._events.has(r))if(e)for(const t of e)this.constructor._removeEvent(r,t,s,o);else this.constructor._removeEvent(r,e,s,o)},removeEventDelegate(t,e,s,o){this.removeEvent(t,e,o,s)},triggerEvent(t,e,s,o){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0}),e=this.constructor._parseEvents(e);for(const r of t)for(const t of e)this.constructor._triggerEvent(r,t,s,o)}}),Object.assign(i.prototype,{attachShadow(t,e=!0){const s=this.parseNode(t);if(s)return a.attachShadow(s,e)},create(t="div",s){const o=a.create(this._context,t);if(!s)return o;if("html"in s?a.setProperty(o,"innerHTML",s.html):"text"in s&&a.setProperty(o,"innerText",s.text),"class"in s&&a.addClass(o,...this.constructor._parseClasses(e.wrap(s.class))),"style"in s&&this.constructor._setStyle(o,s.style),"value"in s&&a.setProperty(o,"value",s.value),"attributes"in s&&this.constructor._setAttribute(o,s.attributes),"properties"in s)for(const t in s.properties)a.setProperty(o,t,s.properties[t]);if("dataset"in s){const t=this.constructor._parseData(s.dataset,null,!0);this.constructor._setDataset(o,t)}return o},createComment(t){return a.createComment(this._context,t)},createFragment(){return a.createFragment(this._context)},createRange(){return a.createRange(this._context)},createText(t){return a.createText(this._context,t)},parseHTML(t){return e.wrap(a.children(this.createRange().createContextualFragment(t)))}}),Object.assign(i.prototype,{clone(t,e){return e={deep:!0,...e},(t=this.parseNodes(t,{node:!0,fragment:!0})).map(t=>this.constructor._clone(t,e))},detach(t){t=this.parseNodes(t,{node:!0});for(const e of t){const t=a.parent(e);t&&a.removeChild(t,e)}return t},empty(t){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0});for(const e of t)this.constructor._empty(e)},remove(t){t=this.parseNodes(t,{node:!0});for(const e of t){const t=a.parent(e);t&&(this.constructor._remove(e),a.removeChild(t,e))}},replaceAll(t,e){this.replaceWith(e,t)},replaceWith(t,s){t=this.parseNodes(t,{node:!0}),s=this.parseNodes(s,{node:!0,fragment:!0,html:!0});const o=this.createFragment();for(const t of s)a.insertBefore(o,t);s=e.wrap(a.childNodes(o));const r=(t=t.filter(e=>!s.includes(e)&&!t.some(t=>!a.isSame(t,e)&&a.contains(t,e))))[t.length-1];for(const e of t){const t=a.parent(e);if(t)for(const o of s)a.insertBefore(t,a.isSame(e,r)?o:this.constructor._clone(o,{deep:!0,events:!0,data:!0,animations:!0}),e)}for(const e of t){const t=a.parent(e);t&&(this.constructor._remove(e),a.removeChild(t,e))}}}),Object.assign(i.prototype,{after(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{node:!0,fragment:!0,html:!0}).reverse();const s=t[t.length-1];for(const o of t){const t=a.parent(o);if(t)for(const r of e)a.insertBefore(t,a.isSame(o,s)?r:this.constructor._clone(r,{deep:!0,events:!0,data:!0,animations:!0}),a.next(o))}},append(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}),e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const s=t[t.length-1];for(const o of t)for(const t of e)a.insertBefore(o,a.isSame(o,s)?t:this.constructor._clone(t,{deep:!0,events:!0,data:!0,animations:!0}))},appendTo(t,e){this.append(e,t)},before(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const s=t[t.length-1];for(const o of t){const t=a.parent(o);if(t)for(const r of e)a.insertBefore(t,a.isSame(o,s)?r:this.constructor._clone(r,{deep:!0,events:!0,data:!0,animations:!0}),o)}},insertAfter(t,e){this.after(e,t)},insertBefore(t,e){this.before(e,t)},prepend(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}),e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const s=t[t.length-1];for(const o of t){const t=a.firstChild(o);for(const r of e)a.insertBefore(o,a.isSame(o,s)?r:this.constructor._clone(r,{deep:!0,events:!0,data:!0,animations:!0}),t)}},prependTo(t,e){this.prepend(e,t)}}),Object.assign(i.prototype,{unwrap(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseFilter(e);const s=[];for(const o of t){const t=a.parent(o);t&&(s.includes(t)||e&&!e(t)||s.push(t))}for(const t of s)this.constructor._unwrap(t)},wrap(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});for(const s of t)this.constructor._wrap(s,e)},wrapAll(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});const s=this.clone(e,{events:!0,data:!0,animations:!0});this.constructor._wrapAll(t,s)},wrapInner(t,e){t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});for(const s of t)this.constructor._wrapInner(s,e)}}),Object.assign(i.prototype,{connected(t){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>a.isConnected(t))},equal(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>a.isEqual(t,e)))},filter(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>!e||e(t,s))},filterOne(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).find((t,s)=>!e||e(t,s))||null},fixed(t){return this.parseNodes(t,{node:!0}).filter(t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position")||this.constructor._parents(t,t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position"),!1,!0).length)},hidden(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).filter(t=>!this.constructor._isVisible(t))},not(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>e&&!e(t,s))},notOne(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).find((t,s)=>e&&!e(t,s))||null},same(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>a.isSame(t,e)))},visible(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).filter(t=>this.constructor._isVisible(t))},withAnimation(t){return this.parseNodes(t).filter(t=>this.constructor._hasAnimation(t))},withAttribute(t,e){return this.parseNodes(t).filter(t=>a.hasAttribute(t,e))},withChildren(t){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).filter(t=>a.hasChildren(t))},withClass(t,...e){return e=this.constructor._parseClasses(e),this.parseNodes(t).filter(t=>e.some(e=>a.hasClass(t,e)))},withCSSAnimation(t){return this.parseNodes(t).filter(t=>this.constructor._hasCSSAnimation(t))},withCSSTransition(t){return this.parseNodes(t).filter(t=>this.constructor._hasCSSTransition(t))},withData(t,e){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(t=>this.constructor._hasData(t,e))},withDescendent(t,e){return e=this.parseFilterContains(e),this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).filter((t,s)=>!e||e(t,s))},withProperty(t,e){return this.parseNodes(t).filter(t=>a.hasProperty(t,e))}}),Object.assign(i.prototype,{find(t,s=this._context){const o=t.match(this.constructor._fastRegExp);return o?"#"===o[1]?this.findById(o[2],s):"."===o[1]?this.findByClass(o[2],s):this.findByTag(o[2],s):(t.match(this.constructor._complexRegExp)&&(t=this.constructor._prefixSelectors(t,":scope ")),e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s)?e.wrap(a.findBySelector(t,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),this.constructor._findBySelector(t,s)))},findByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s))return e.wrap(a.findByClass(t,s));if(e.isFragment(s)||e.isShadow(s))return e.wrap(a.findBySelector("."+t,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const o=[];for(const r of s)e.merge(o,e.isFragment(r)||e.isShadow(r)?a.findBySelector("."+t,r):a.findByClass(t,r));return s.length>1&&o.length>1?e.unique(o):o},findById(t,e=this._context){return e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}),this.constructor._findBySelector("#"+t,e)},findByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s))return e.wrap(a.findByTag(t,s));if(e.isFragment(s)||e.isShadow(s))return e.wrap(a.findBySelector(t,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const o=[];for(const r of s)e.merge(o,e.isFragment(r)||e.isShadow(r)?a.findBySelector(t,r):a.findByTag(t,r));return s.length>1&&o.length>1?e.unique(o):o},findOne(t,s=this._context){const o=t.match(this.constructor._fastRegExp);return o?"#"===o[1]?this.findOneById(o[2],s):"."===o[1]?this.findOneByClass(o[2],s):this.findOneByTag(o[2],s):(t.match(this.constructor._complexRegExp)&&(t=this.constructor._prefixSelectors(t,":scope ")),e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s)?a.findOneBySelector(t,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0})).length?this.constructor._findOneBySelector(t,s):void 0)},findOneByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s))return a.findByClass(t,s).item(0);if(e.isFragment(s)||e.isShadow(s))return a.findOneBySelector("."+t,s);if((s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0})).length){for(const o of s){const s=e.isFragment(o)||e.isShadow(o)?a.findOneBySelector("."+t,o):a.findByClass(t,o).item(0);if(s)return s}return null}},findOneById(t,s=this._context){return e.isDocument(s)?a.findById(t,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0})).length?this.constructor._findOneBySelector("#"+t,s):void 0},findOneByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s))return a.findByTag(t,s).item(0);if(e.isFragment(s)||e.isShadow(s))return a.findOneBySelector(t,s);if((s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0})).length){for(const o of s){const s=e.isFragment(o)||e.isShadow(o)?a.findOneBySelector(t,o):a.findByTag(t,o).item(0);if(s)return s}return null}}}),Object.assign(i.prototype,{child(t,e){return this.children(t,e,!0)},children(t,s,o=!1,r=!0){if(s=this.parseFilter(s),e.isElement(t)||e.isDocument(t)||e.isFragment(t)||e.isShadow(t))return this.constructor._children(t,s,o,r);t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0});const n=[];for(const i of t)e.merge(n,this.constructor._children(i,s,o,r));return t.length>1&&n.length>1?e.unique(n):n},closest(t,e,s){return this.parents(t,e,s,!0)},commonAncestor(t){if(!(t=this.sort(t)).length)return;if(t.some(t=>!a.parent(t)))return;const e=this.createRange();return 1===t.length?a.select(e,t.shift()):(a.setStartBefore(e,t.shift()),a.setEndAfter(e,t.pop())),e.commonAncestorContainer},contents(t){return this.children(t,!1,!1,!1)},fragment(t){const e=this.parseNode(t);if(e)return a.fragment(e)},next(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._next(t,s);t=this.parseNodes(t,{node:!0});const o=[];for(const r of t)e.merge(o,this.constructor._next(r,s));return t.length>1&&o.length>1?e.unique(o):o},nextAll(t,s,o,r=!1){if(s=this.parseFilter(s),o=this.parseFilter(o),e.isNode(t))return this.constructor._nextAll(t,s,o,r);t=this.parseNodes(t,{node:!0});const n=[];for(const i of t)e.merge(n,this.constructor._nextAll(i,s,o,r));return t.length>1&&n.length>1?e.unique(n):n},offsetParent(t){return this.forceShow(t,t=>a.offsetParent(t))},parent(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._parent(t,s);t=this.parseNodes(t,{node:!0});const o=[];for(const r of t)e.merge(o,this.constructor._parent(r,s));return t.length>1&&o.length>1?e.unique(o):o},parents(t,s,o,r=!1){if(s=this.parseFilter(s),o=this.parseFilter(o),e.isNode(t))return this.constructor._parents(t,s,o,r);t=this.parseNodes(t,{node:!0});const n=[];for(const i of t)e.merge(n,this.constructor._parents(i,s,o,r));return t.length>1&&n.length>1?e.unique(n):n},prev(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._prev(t,s);t=this.parseNodes(t,{node:!0});const o=[];for(const r of t)e.merge(o,this.constructor._prev(r,s));return t.length>1&&o.length>1?e.unique(o):o},prevAll(t,s,o,r=!1){if(s=this.parseFilter(s),o=this.parseFilter(o),e.isNode(t))return this.constructor._prevAll(t,s,o,r);t=this.parseNodes(t,{node:!0});const n=[];for(const i of t)e.merge(n,this.constructor._prevAll(i,s,o,r));return t.length>1&&n.length>1?e.unique(n):n},shadow(t){const e=this.parseNode(t);if(e)return a.shadow(e)},siblings(t,s,o=!0){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._siblings(t,s,o);t=this.parseNodes(t,{node:!0});const r=[];for(const n of t)e.merge(r,this.constructor._siblings(n,s,o));return t.length>1&&r.length>1?this.sort(e.unique(r)):r}}),Object.assign(i.prototype,{parseFilter(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?e=>a.is(e,t):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>a.isSame(e,t):!!(t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.includes(e)))},parseFilterContains(t){return!!t&&(e.isFunction(t)?s=>e.merge([],a.findBySelector("*",s)).some(t):e.isString(t)?e=>!!this.findOne(t,e):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>a.contains(e,t):!!(t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.some(t=>a.contains(e,t))))},parseNode(t,e={}){const s=this.constructor.parseNodesFactory(e);return this.parseNodesDeep(t,s,e.html,!0)},parseNodes(t,e={}){const s=this.constructor.parseNodesFactory(e);return this.parseNodesDeep(t,s,e.html)},parseNodesDeep(t,s,o=!1,r=!1){if(!t)return r?null:[];if(e.isString(t)){if(o&&"<"===t.trim().charAt(0))return this.parseHTML(t);if(!r)return this.find(t,this._context);const e=this.findOne(t,this._context);return e||null}if(s(t))return r?t:[t];if(this.constructor.queryLoaded&&t instanceof QuerySet){if(!r)return t.get().filter(s);const e=t.get(0);return e&&s(e)?e:null}if(t instanceof NodeList||t instanceof HTMLCollection)return r?t.length?t.item(0):null:e.wrap(t);if(e.isArray(t))return t=t.flatMap(t=>this.parseNodesDeep(t,s)),t=this.constructor._sort(t),r?t.length?t.shift():null:t;if(n=e.wrap(t),t=t.filter(s),!r)return t=t.filter(s),this.constructor._sort(t);const n=this.constructor._sort(t).shift();return n&&s(n)?n:null}}),Object.assign(i.prototype,{afterSelection(t){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();const e=a.getSelection();if(!a.rangeCount(e))return;const s=a.getRange(e);a.removeRanges(e),a.collapse(s);for(const e of t)a.insert(s,e)},beforeSelection(t){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();const e=a.getSelection();if(!a.rangeCount(e))return;const s=a.getRange(e);a.removeRanges(e);for(const e of t)a.insert(s,e)},extractSelection(){const t=a.getSelection();if(!a.rangeCount(t))return[];const s=a.getRange(t);a.removeRanges(t);const o=a.extract(s);return e.wrap(a.childNodes(o))},getSelection(){const t=a.getSelection();if(!a.rangeCount(t))return[];const s=a.getRange(t),o=e.wrap(a.findBySelector("*",s.commonAncestorContainer));if(!o.length)return[s.commonAncestorContainer];if(1===o.length)return o;const r=a.startContainer(s),n=a.endContainer(s),i=e.isElement(r)?r:a.parent(r),c=e.isElement(n)?n:a.parent(n),h=o.slice(o.indexOf(i),o.indexOf(c)+1),l=[];let d;for(const t of h)d&&a.contains(d,t)||(d=t,l.push(t));return l},select(t){const e=this.parseNode(t,{node:!0});if(e&&"select"in e)return e.select();const s=a.getSelection();if(a.rangeCount(s)>0&&a.removeRanges(s),!e)return;const o=this.createRange();a.select(o,e),a.addRange(s,o)},selectAll(t){t=this.sort(t);const e=a.getSelection();if(a.rangeCount(e)&&a.removeRanges(e),!t.length)return;const s=this.createRange();1==t.length?a.select(s,t.shift()):(a.setStartBefore(s,t.shift()),a.setEndAfter(s,t.pop())),a.addRange(e,s)},wrapSelection(t){t=this.parseNodes(t,{fragment:!0,html:!0});const s=a.getSelection();if(!a.rangeCount(s))return;const o=a.getRange(s);a.removeRanges(s);const r=a.extract(o),n=this.constructor._deepest(t.slice().shift()),i=e.wrap(a.childNodes(r));for(const t of i)a.insertBefore(n,t);for(const e of t)a.insert(o,e)}}),Object.assign(i.prototype,{hasAnimation(t){return this.parseNodes(t).some(t=>this.constructor._hasAnimation(t))},hasAttribute(t,e){return this.parseNodes(t).some(t=>a.hasAttribute(t,e))},hasChildren(t){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).some(t=>a.hasChildren(t))},hasClass(t,...e){return e=this.constructor._parseClasses(e),this.parseNodes(t).some(t=>e.some(e=>a.hasClass(t,e)))},hasCSSAnimation(t){return this.parseNodes(t).some(t=>this.constructor._hasCSSAnimation(t))},hasCSSTransition(t){return this.parseNodes(t).some(t=>this.constructor._hasCSSTransition(t))},hasData(t,e){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0}).some(t=>this.constructor._hasData(t,e))},hasDescendent(t,e){return e=this.parseFilterContains(e),this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).some(t=>!e||e(t))},hasFragment(t){return this.parseNodes(t).some(t=>this.constructor._hasFragment(t))},hasProperty(t,e){return this.parseNodes(t).some(t=>a.hasProperty(t,e))},hasShadow(t){return this.parseNodes(t).some(t=>this.constructor._hasShadow(t))},is(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>!e||e(t))},isConnected(t){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>a.isConnected(t))},isEqual(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>a.isEqual(t,e)))},isFixed(t){return this.parseNodes(t,{node:!0}).some(t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position")||this.constructor._parents(t,t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position"),!1,!0).length)},isHidden(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).some(t=>!this.constructor._isVisible(t))},isSame(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>a.isSame(t,e)))},isVisible(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).some(t=>this.constructor._isVisible(t))}}),Object.assign(i.prototype,{exec(t,e=null){return this._context.execCommand(t,!1,e)},forceShow(t,e){const s=this.parseNode(t,{node:!0});if(s)return this.constructor._forceShow(s,e)},index(t){const s=this.parseNode(t,{node:!0});if(s)return e.wrap(a.children(a.parent(s))).indexOf(s)},indexOf(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).findIndex(t=>!e||e(t))},normalize(t){t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0,document:!0});for(const e of t)a.normalize(e)},sanitize(t,e=i.allowedTags){const s=this.create("template",{html:t}),o=a.fragment(s),r=this.constructor._children(o,null,!1,!0);for(const t of r)this.constructor._sanitize(t,o,e);return this.getHTML(s)},serialize(t){return o._parseParams(this.serializeArray(t))},serializeArray(t){return this.parseNodes(t,{fragment:!0,shadow:!0}).reduce((t,s)=>{if(a.is(s,"form")||e.isFragment(s)||e.isShadow(s))return t.concat(this.serializeArray(a.findBySelector("input, select, textarea",s)));if(a.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return t;const o=a.getAttribute(s,"name");if(!o)return t;if(a.is(s,"select[multiple]")){const r=e.wrap(s.selectedOptions);for(const e of r){const s=a.getProperty(e,"value")||"";t.push({name:o,value:s})}}else{const e=a.getProperty(s,"value")||"";t.push({name:o,value:e})}return t},[])},sort(t){return this.parseNodes(t,{node:!0})},tagName(t){const e=this.parseNode(t);if(e)return this.constructor._tagName(e)}}),Object.assign(i,{_clearQueue(t){this._queues.has(t)&&this._queues.delete(t)},_dequeueNode(t){if(!this._queues.has(t))return;const e=this._queues.get(t).shift();e?Promise.resolve(e(t)).then(e=>this._dequeueNode(t)).catch(e=>this._clearQueue(t)):this._queues.delete(t)},_queue(t,e){const s=!this._queues.has(t);s&&this._queues.set(t,[t=>new Promise(t=>setTimeout(t,0))]),this._queues.get(t).push(e),s&&this._dequeueNode(t)}}),Object.assign(i,{_getAttribute(t,e){if(e)return a.getAttribute(t,e);const s=a.attributes(t),o={};for(const t of s)o[t.nodeName]=t.nodeValue;return o},_getDataset(t,s){if(s)return s=e.camelCase(s),i._parseDataset(a.getDataset(t,s));const o=a.dataset(t),r={};for(const t in o)r[t]=i._parseDataset(o[t]);return r},_removeDataset(t,s){s=e.camelCase(s),a.removeDataset(t,s)},_setAttribute(t,e){for(const s in e)a.setAttribute(t,s,e[s])},_setDataset(t,s){for(const o in s){const r=e.camelCase(o);a.setDataset(t,r,s[o])}}}),Object.assign(i,{_cloneData(t,e){this._data.has(t)&&this._setData(e,{...this._data.get(t)})},_getData(t,e){if(this._data.has(t))return e?this._data.get(t)[e]:this._data.get(t)},_removeData(t,e){if(this._data.has(t)){if(e){const s=this._data.get(t);if(delete s[e],Object.keys(s).length)return}this._data.delete(t)}},_setData(t,e){this._data.has(t)||this._data.set(t,{}),Object.assign(this._data.get(t),e)}}),Object.assign(i,{_constrain(t,e){const s=this._rect(t),o={};let r,n;if(s.height>e.height&&(o.height=e.height),s.width>e.width&&(o.width=e.width),s.left-e.left<0?r=s.left-e.left:s.right-e.right>0&&(r=s.right-e.right),r){const e=this._css(t,"left"),s=e&&"auto"!==e?parseFloat(e):0;o.left=s-r+"px"}if(s.top-e.top<0?n=s.top-e.top:s.bottom-e.bottom>0&&(n=s.bottom-e.bottom),n){const e=this._css(t,"top"),s=e&&"auto"!==e?parseFloat(e):0;o.top=s-n+"px"}"static"===this._css(t,"position")&&(o.position="relative"),this._setStyle(t,o)},_position(t,e){return this._forceShow(t,t=>{const s={x:a.offsetLeft(t),y:a.offsetTop(t)};if(e){let e=t;for(;e=a.offsetParent(e);)s.x+=a.offsetLeft(e),s.y+=a.offsetTop(e)}return s})},_rect(e,s){return this._forceShow(e,e=>{const o=a.rect(e);return s&&(o.x+=a.getScrollXWindow(t),o.y+=a.getScrollYWindow(t)),o})}}),Object.assign(i,{_getScrollXDocument:t=>a.getScrollX(a.scrollingElement(t)),_getScrollYDocument:t=>a.getScrollY(a.scrollingElement(t)),_setScroll(t,e,s){a.setScrollX(t,e),a.setScrollY(t,s)},_setScrollDocument(t,e,s){return this._setScroll(a.scrollingElement(t),e,s)},_setScrollXDocument:(t,e)=>a.setScrollX(a.scrollingElement(t),e),_setScrollXWindow:(t,e)=>a.setScrollWindow(t,e,a.getScrollYWindow(t)),_setScrollYDocument:(t,e)=>a.setScrollY(a.scrollingElement(t),e),_setScrollYWindow:(t,e)=>a.setScrollWindow(t,a.getScrollXWindow(t),e)}),Object.assign(i,{_height(t,s=1){return this._forceShow(t,t=>{e.isDocument(t)&&(t=a.documentElement(t));let o=a.height(t);return s===this.INNER&&(o-=parseInt(this._css(t,"padding-top"))+parseInt(this._css(t,"padding-bottom"))),s>=this.OUTER&&(o+=parseInt(this._css(t,"border-top-width"))+parseInt(this._css(t,"border-bottom-width"))),s===this.OUTER_MARGIN&&(o+=parseInt(this._css(t,"margin-top"))+parseInt(this._css(t,"margin-bottom"))),o})},_scrollHeight(t){return this._forceShow(t,t=>(e.isDocument(t)&&(t=a.documentElement(t)),a.scrollHeight(t)))},_scrollWidth(t){return this._forceShow(t,t=>(e.isDocument(t)&&(t=a.documentElement(t)),a.scrollWidth(t)))},_width(t,s=1){return this._forceShow(t,t=>{e.isDocument(t)&&(t=a.documentElement(t));let o=a.width(t);return s===this.INNER&&(o-=parseInt(this._css(t,"padding-left"))+parseInt(this._css(t,"padding-right"))),s>=this.OUTER&&(o+=parseInt(this._css(t,"border-left-width"))+parseInt(this._css(t,"border-right-width"))),s===this.OUTER_MARGIN&&(o+=parseInt(this._css(t,"margin-left"))+parseInt(this._css(t,"margin-right"))),o})}}),Object.assign(i,{_css(t,s){return this._styles.has(t)||this._styles.set(t,a.css(t)),s?(s=e.kebabCase(s),this._styles.get(t).getPropertyValue(s)):{...this._styles.get(t)}},_getStyle(t,s){if(s)return s=e.kebabCase(s),a.getStyle(t,s);const o=a.style(t),r={};for(const e of o)r[e]=a.getStyle(t,e);return r},_setStyle(t,s,o){for(let r in s){let n=s[r];r=e.kebabCase(r),n&&e.isNumeric(n)&&!this.cssNumberProperties.includes(r)&&(n+="px"),a.setStyle(t,r,n,o)}}}),Object.assign(i,{_delegateFactory(t,s,o){const r=s.match(i._complexRegExp)?this._getDelegateContainsFactory(t,s):this._getDelegateMatchFactory(t,s);return s=>{if(a.isSame(s.target,t))return;const n=r(s.target);if(!n)return;const i={};for(const t in s)i[t]=e.isFunction(s[t])?(...e)=>s[t](...e):s[t];return i.currentTarget=n,i.delegateTarget=t,i.originalEvent=s,Object.freeze(i),o(i)}},_getDelegateContainsFactory(t,s){return s=i._prefixSelectors(s,":scope "),o=>{const r=e.wrap(a.findBySelector(s,t));return!!r.length&&(r.includes(o)?o:this._parents(o,t=>r.includes(t),e=>a.isSame(t,e),!0).shift())}},_getDelegateMatchFactory(t,e){return s=>a.is(s,e)?s:this._parents(s,t=>a.is(t,e),e=>a.isSame(t,e),!0).shift()},_namespaceFactory:(t,e)=>s=>{if(!("namespaceRegExp"in s)||s.namespaceRegExp.test(t))return e(s)},_selfDestructFactory(t,e,s,o){return r=>(s?this._removeEvent(t,e,o,s):this._removeEvent(t,e,o),o(r))}}),Object.assign(i,{_addEvent(t,e,s,o,r){this._events.has(t)||this._events.set(t,{});const n=this._events.get(t),i={delegate:o,callback:s,selfDestruct:r},c=this._parseEvent(e);let h=s;if(r&&(h=this._selfDestructFactory(t,e,o,h)),o&&(h=this._delegateFactory(t,o,h)),e!==c&&(h=this._namespaceFactory(e,h)),i.realCallback=h,i.event=e,i.realEvent=c,n[c]){if(n[c].includes(i))return}else n[c]=[];n[c].push(i),a.addEvent(t,c,h)},_cloneEvents(t,e){if(!this._events.has(t))return;const s=this._events.get(t);for(const t in s)for(const o of s[t])this._addEvent(e,o.event,o.callback,o.delegate,o.selfDestruct)},_removeEvent(t,e,s,o){if(!this._events.has(t))return;const r=this._events.get(t);if(!e){const e=Object.keys(r);for(const r of e)this._removeEvent(t,r,s,o);return}const n=this._parseEvent(e);r[n]&&(r[n]=r[n].filter(r=>{if(o&&o!==r.delegate||s&&s!==r.callback)return!0;if(n!==e){const t=i._eventNamespacedRegExp(e);if(!r.event.match(t))return!0}return a.removeEvent(t,r.realEvent,r.realCallback),!1}),r[n].length||delete r[n],Object.keys(r).length||this._events.delete(t))},_triggerEvent(t,e,s,o){const r=i._parseEvent(e),n={...s};return r!==e&&(n.namespace=e.substring(r.length+1),n.namespaceRegExp=i._eventNamespacedRegExp(e)),a.triggerEvent(t,r,n,o)}}),Object.assign(i,{_eventNamespacedRegExp:t=>new RegExp(`^${e.escapeRegExp(t)}(?:\\.|$)`,"i"),_parseClasses:t=>t.flat().flatMap(t=>t.split(" ")),_parseData(t,s,o=!1){const r=e.isObject(t)?t:{[t]:s},n={};for(const t in r){const s=r[t];n[t]=o&&(e.isObject(s)||e.isArray(s))?JSON.stringify(s):s}return n},_parseDataset(t){if(e.isUndefined(t))return t;const s=t.toLowerCase().trim();if(["true","on"].includes(s))return!0;if(["false","off"].includes(s))return!1;if("null"===s)return null;if(e.isNumeric(s))return parseFloat(s);if(["{","["].includes(s.charAt(0)))try{return JSON.parse(t)}catch(t){}return t},_parseEvent:t=>t.split(".").shift(),_parseEvents:t=>t.split(" "),_prefixSelectors(t,e){return t.split(this._splitRegExp).filter(t=>!!t).map(t=>`${e} ${t}`).join(", ")}}),Object.assign(i,{_clone(t,e){const s=a.clone(t,e.deep);return e.events&&this._cloneEvents(t,s),e.data&&this._cloneData(t,s),e.animations&&this._cloneAnimations(t,s),e.deep&&this._deepClone(t,s,e),s},_cloneAnimations(t,e){if(!this._hasAnimation(t))return;const s=n._animations.get(t).map(t=>new n(e,t._callback,t._options));n._animations.set(e,s)},_deepClone(t,s,o){const r=e.wrap(a.childNodes(t)),n=e.wrap(a.childNodes(s));for(let e=0;e<r.length;e++)o.events&&this._cloneEvents(r[e],n[e]),o.data&&this._cloneData(r[e],n[e]),o.animations&&this._cloneAnimations(t,s),this._deepClone(r[e],n[e],o)},_detach(t){const e=a.parent(t);e||a.removeChild(e,t)},_empty(t){const s=e.wrap(a.childNodes(t));for(const e of s)this._remove(e),a.removeChild(t,e);if(this._hasShadow(t)){const e=a.shadow(t);this._remove(e)}if(this._hasFragment(t)){const e=a.fragment(t);this._remove(e)}},_remove(t){a.triggerEvent(t,"remove"),this._empty(t),e.isElement(t)&&(this._clearQueue(t),n.stop(t),this._styles.has(t)&&this._styles.delete(t)),this._removeEvent(t),this._removeData(t)}}),Object.assign(i,{_unwrap(t){const s=a.parent(t);if(!s)return;const o=e.wrap(a.childNodes(t));for(const e of o)a.insertBefore(s,e,t);this._remove(t),a.removeChild(s,t)},_wrap(t,s){const o=a.parent(t);if(!o)return;const r=s.map(t=>this._clone(t,{deep:!0,events:!0,data:!0,animations:!0})),n=r.slice().shift(),i=this._deepest(e.isFragment(n)?a.firstChild(n):n);for(const e of r)a.insertBefore(o,e,t);a.insertBefore(i,t)},_wrapAll(t,s){const o=t[0];if(!o)return;const r=a.parent(o);if(!r)return;const n=s[0],i=this._deepest(e.isFragment(n)?a.firstChild(n):n);for(const t of s)a.insertBefore(r,t,o);for(const e of t)a.insertBefore(i,e)},_wrapInner(t,s){const o=e.wrap(a.childNodes(t)),r=s.map(t=>this._clone(t,{deep:!0,events:!0,data:!0,animatinos:!0})),n=r.slice().shift(),i=this._deepest(e.isFragment(n)?a.firstChild(n):n);for(const e of r)a.insertBefore(t,e);for(const t of o)a.insertBefore(i,t)}}),Object.assign(i,{parseHTML:t=>(new DOMParser).parseFromString(t,"text/html"),parseXML:t=>(new DOMParser).parseFromString(t,"application/xml")}),Object.assign(i,{_findBySelector(t,s){const o=[];for(const r of s)e.merge(o,a.findBySelector(t,r));return s.length>1&&o.length>1?e.unique(o):o},_findOneBySelector(t,e){for(const s of e){const e=a.findOneBySelector(t,s);if(e)return e}return null}}),Object.assign(i,{_children(t,s,o=!1,r=!1){const n=e.wrap(r?a.children(t):a.childNodes(t)),i=[];let c;for(c of n)if((!s||s(c))&&(i.push(c),o))break;return i},_deepest:t=>e.wrap(a.findBySelector("*",t)).find(t=>!a.hasChildren(t))||t,_next(t,e){const s=[];return(t=a.next(t))?(e&&!e(t)||s.push(t),s):s},_nextAll(t,e,s,o=!1){const r=[];for(;(t=a.next(t))&&(!s||!s(t))&&(e&&!e(t)||(r.push(t),!o)););return r},_parent(t,e){const s=[],o=a.parent(t);return o?(e&&!e(o)||s.push(o),s):s},_parents(t,s,o,r=!1){const n=[];for(;(t=a.parent(t))&&!e.isDocument(t)&&(!o||!o(t))&&(s&&!s(t)||(n.unshift(t),!r)););return n},_prev(t,e){const s=[];return(t=a.prev(t))?(e&&!e(t)||s.push(t),s):s},_prevAll(t,e,s,o=!1){const r=[];for(;(t=a.prev(t))&&(!s||!s(t))&&(e&&!e(t)||(r.unshift(t),!o)););return r},_siblings(t,e,s=!0){const o=[],r=a.parent(t);if(!r)return o;const n=s?r.children:r.childNodes;let i;for(i of n)a.isSame(t,i)||e&&!e(i)||o.push(i);return o}}),Object.assign(i,{parseNodesFactory:t=>t?s=>(t.node?e.isNode(s):e.isElement(s))||t.fragment&&e.isFragment(s)||t.shadow&&e.isShadow(s)||t.document&&e.isDocument(s)||t.window&&e.isWindow(s):e.isElement}),Object.assign(i,{_hasAnimation:t=>n._animations.has(t),_hasCSSAnimation(t){return!!parseFloat(this._css(t,"animation-duration"))},_hasCSSTransition(t){return!!parseFloat(this._css(t,"transition-duration"))},_hasData(t,e){return this._data.has(t)&&(!e||this._data.get(t).hasOwnProperty(e))},_hasFragment:t=>!!a.fragment(t),_hasShadow:t=>!!a.shadow(t),_isVisible:t=>e.isWindow(t)?a.isVisibleDocument(a.document(t)):e.isDocument(t)?a.isVisibleDocument(t):!!a.offsetParent(t)}),Object.assign(i,{_forceShow(t,s){if(this._isVisible(t))return s(t);const o=[];e.isElement(t)&&"none"===this._css(t,"display")&&o.push(t),e.merge(o,this._parents(t,t=>e.isElement(t)&&"none"===this._css(t,"display")));const r=new Map;for(const t of o)r.set(t,a.getAttribute(t,"style")),a.setStyle(t,"display","initial",!0);const n=s(t);for(const[t,e]of r)e?a.setAttribute(t,"style",e):(a.getAttribute(t,"style"),a.removeAttribute(t,"style"));return n},_sanitize(t,e,s=this.allowedTags){const o=this._tagName(t);if(!(o in s))return void a.removeChild(e,t);const r=[];"*"in s&&s["*"].length&&r.push(...s["*"]),s[o].length&&r.push(...s[o]);const n=this._getAttribute(t);for(const e in n){!!r.find(t=>e.match(t))||a.removeAttribute(t,e)}const i=this._children(t,null,!1,!0);for(const e of i)this._sanitize(e,t,s)},_sort:t=>t.sort((t,s)=>{if(!e.isNode(s))return-1;if(!e.isNode(t))return 1;if(a.isSame(t,s))return 0;const o=a.comparePosition(t,s);return o&Node.DOCUMENT_POSITION_FOLLOWING||o&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:o&Node.DOCUMENT_POSITION_PRECEDING||o&Node.DOCUMENT_POSITION_CONTAINS?1:0}),_tagName:t=>a.tagName(t).toLowerCase()}),Object.assign(i,{_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,allowedTags:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],INNER:0,OUTER:2,OUTER_MARGIN:3,_complexRegExp:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,_fastRegExp:/^([\#\.]?)([\w\-]+)$/,_splitRegExp:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/});class a{}return Object.assign(a,{attributes:t=>t.attributes,dataset:t=>t.dataset,getAttribute:(t,e)=>t.getAttribute(e),getDataset(t,e){return this.dataset(t)[e]},getProperty:(t,e)=>t[e],removeAttribute(t,e){t.removeAttribute(e)},removeDataset(t,e){delete t.dataset[e]},removeProperty(t,e){delete t[e]},setAttribute(t,e,s){t.setAttribute(e,s)},setDataset(t,e,s){this.dataset(t)[e]=s},setProperty(t,e,s){t[e]=s}}),Object.assign(a,{offsetLeft:t=>t.offsetLeft,offsetTop:t=>t.offsetTop,rect:t=>t.getBoundingClientRect()}),Object.assign(a,{getScrollX:t=>t.scrollLeft,getScrollXWindow:t=>t.scrollX,getScrollY:t=>t.scrollTop,getScrollYWindow:t=>t.scrollY,setScrollWindow:(t,e,s)=>t.scroll(e,s),setScrollX(t,e){t.scrollLeft=e},setScrollY(t,e){t.scrollTop=e}}),Object.assign(a,{height:t=>t.clientHeight,heightWindow:(t,e)=>e?t.outerHeight:t.innerHeight,scrollHeight:t=>t.scrollHeight,scrollWidth:t=>t.scrollWidth,width:t=>t.clientWidth,widthWindow:(t,e)=>e?t.outerWidth:t.innerWidth}),Object.assign(a,{addClass(t,...e){t.classList.add(...e)},css:e=>t.getComputedStyle(e),getStyle(t,e){return this.style(t)[e]},removeClass(t,...e){t.classList.remove(...e)},setStyle(t,e,s,o){t.style.setProperty(e,s,o?"important":"")},style:t=>t.style,toggleClass(t,...e){t.classList.toggle(...e)}}),Object.assign(a,{blur(t){t.blur()},click(t){t.click()},focus(t){t.focus()}}),Object.assign(a,{addEvent(t,e,s){t.addEventListener(e,s)},removeEvent(t,e,s){t.removeEventListener(e,s)},triggerEvent(t,e,s,o){const r=new Event(e,{bubbles:!0,cancelable:!0,...o});return s&&Object.assign(r,s),t.dispatchEvent(r)}}),Object.assign(a,{attachShadow:(t,e=!0)=>t.attachShadow({mode:e?"open":"closed"}),create:(t,e)=>t.createElement(e),createComment:(t,e)=>t.createComment(e),createFragment:t=>t.createDocumentFragment(),createRange:t=>t.createRange(),createText:(t,e)=>t.createTextNode(e)}),Object.assign(a,{clone:(t,e)=>t.cloneNode(e),removeChild(t,e){t.removeChild(e)}}),Object.assign(a,{insertBefore(t,e,s=null){t.insertBefore(e,s)}}),Object.assign(a,{findByClass:(t,e)=>e.getElementsByClassName(t),findById:(t,e)=>e.getElementById(t),findByTag:(t,e)=>e.getElementsByTagName(t),findBySelector:(t,e)=>e.querySelectorAll(t),findOneBySelector:(t,e)=>e.querySelector(t)}),Object.assign(a,{childNodes:t=>t.childNodes,children:t=>t.children,document:t=>t.document,documentElement:t=>t.documentElement,firstChild:t=>t.firstChild,fragment:t=>t.content,next:t=>t.nextSibling,offsetParent:t=>t.offsetParent,parent:t=>t.parentNode,prev:t=>t.previousSibling,scrollingElement:t=>t.scrollingElement,shadow:t=>t.shadowRoot}),Object.assign(a,{addRange(t,e){t.addRange(e)},collapse(t){t.collapse()},endContainer:t=>t.endContainer,extract:t=>t.extractContents(),getRange:(t,e=0)=>t.getRangeAt(e),getSelection:()=>t.getSelection(),insert(t,e){t.insertNode(e)},rangeCount:t=>t.rangeCount,removeRanges(t){t.removeAllRanges()},select(t,e){t.selectNode(e)},setEndAfter(t,e){t.setEndAfter(e)},setStartBefore(t,e){t.setStartBefore(e)},startContainer:t=>t.startContainer}),Object.assign(a,{contains:(t,e)=>t.contains(e),hasAttribute:(t,e)=>t.hasAttribute(e),hasChildren:t=>!!t.childElementCount,hasClass:(t,e)=>t.classList.contains(e),hasProperty:(t,e)=>t.hasOwnProperty(e),is:(t,s)=>e.isElement(t)&&t.matches(s),isConnected:t=>t.isConnected,isEqual:(t,e)=>t.isEqualNode(e),isSame:(t,e)=>t.isSameNode(e),isVisibleDocument:t=>"visible"===t.visibilityState}),Object.assign(a,{comparePosition:(t,e)=>t.compareDocumentPosition(e),normalize(t){t.normalize()},tagName:t=>t.tagName}),{AjaxRequest:o,Animation:n,DOM:i,DOMNode:a,dom:new i}}));