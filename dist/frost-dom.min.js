!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t:Object.assign(e,t(e))}(this,function(e){"use strict";if(!e)throw new Error("FrostDOM requires a Window.");if(!("Core"in e))throw new Error("FrostDOM requires FrostCore.");const t=e.Core,s=e.document;class n{constructor(e=s){this._context=e}}Object.assign(n.prototype,{ajax(t){t={url:e.location,headers:{},...n.ajaxDefaults,...t};const s=n._localRegExp.test(location.protocol);if(!t.cache){const e=new URL(t.url);e.searchParams.append("_",Date.now()),t.url=e.toString()}return"Content-Type"in t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=t.contentType),s||"X-Requested-With"in t.headers||(t.headers["X-Requested-With"]="XMLHttpRequest"),new Promise((e,r)=>{const o=new XMLHttpRequest;o.open(t.method,t.url,!0);for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);t.responseType&&(o.responseType=t.responseType),o.onload=(t=>{o.status>400?r({status:o.status,xhr:o,event:t}):e({response:o.response,xhr:o,event:t})}),s||(o.onerror=(e=>r({status:o.status,xhr:o,event:e}))),t.uploadProgress&&(o.upload.onprogress=(e=>t.uploadProgress(e.loaded/e.total,o,e))),t.beforeSend&&t.beforeSend(o),t.data&&t.processData&&("application/json"===t.contentType?t.data=JSON.stringify(t.data):"application/x-www-form-urlencoded"===t.contentType?t.data=n._parseParams(t.data):t.data=n._parseFormData(t.data)),o.send(t.data)})},get(e,t){return this.ajax({url:e,...t})},post(e,t,s){return this.ajax({url:e,data:t,method:"POST",...s})},upload(e,t,s){return this.ajax({url:e,data:t,method:"POST",contentType:!1,...s})}}),Object.assign(n.prototype,{loadScript(t,s=!0){return this.ajax({url:t,cache:s}).then(t=>eval.call(e,t.response))},loadScripts(t,s=!0){return Promise.all(t.map(e=>this.ajax({url:e,cache:s}))).then(t=>{for(const s of t)eval.call(e,s.response)})}}),Object.assign(n.prototype,{loadStyle(e,t=!0){return this.ajax({url:e,cache:t}).then(e=>r.insertBefore(this._context.head,this.create("style",{html:e.response})))},loadStyles(e,t=!0){return Promise.all(e.map(e=>this.ajax({url:e,cache:t}))).then(e=>{for(const t of e)r.insertBefore(this._context.head,this.create("style",{html:t.response}))})}}),Object.assign(n.prototype,{getCookie(e,t=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(t=>t.trimStart().substring(0,e.length)===e);if(!s)return null;const n=s.trimStart().substring(e.length+1);return t?JSON.parse(n):n},removeCookie(e,t){this.setCookie(e,"",{expires:-1,...t})},setCookie(e,t,s,n=!1){if(!e)return;n&&(t=JSON.stringify(t));let r=`${e}=${t}`;if(s){if(s.expires){let e=new Date;e.setTime(e.getTime()+1e3*s.expires),r+=`;expires=${e.toUTCString()}`}s.path&&(r+=`;path=${s.path}`),s.secure&&(r+=";secure")}this._context.cookie=r}}),Object.assign(n.prototype,{animate(e,t,s){e=this.parseNodes(e),s={...n.animationDefaults,...s};const r=e.map(e=>n._animate(e,t,s));return n._start(),Promise.all(r)},stop(e,t=!0){e=this.parseNodes(e);for(const s of e)n._stop(s,t)}}),Object.assign(n.prototype,{dropIn(e,t){return this.slideIn(e,{direction:"top",...t})},dropOut(e,t){return this.slideOut(e,{direction:"top",...t})},fadeIn(e,t){return this.animate(e,(e,t)=>r.setStyle(e,"opacity",t<1?t:""),t)},fadeOut(e,t){return this.animate(e,(e,t)=>r.setStyle(e,"opacity",t<1?1-t:""),t)},rotateIn(e,t){return this.animate(e,(e,t,s)=>r.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*t)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},rotateOut(e,t){return this.animate(e,(e,t,s)=>r.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*t*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},slideIn(e,s){return this.animate(e,(e,s,o)=>{if(1===s)return r.setStyle(e,"overflow",""),void(o.useGpu?r.setStyle(e,"transform",""):(r.setStyle(e,"margin-left",""),r.setStyle(e,"margin-top","")));const i=t.isFunction(o.direction)?o.direction():o.direction;let a,c,l;"top"===i||"bottom"===i?(a=o.useGpu?"Y":"margin-top",c=n._height(e),l="top"===i):(a=o.useGpu?"X":"margin-left",c=n._width(e),l="left"===i);const d=(c-c*s)*(l?-1:1);o.useGpu?r.setStyle(e,"transform",`translate${a}(${d}px)`):r.setStyle(e,a,`${d}px`)},{direction:"bottom",useGpu:!0,...s})},slideOut(e,s){return this.animate(e,(e,s,o)=>{if(1===s)return r.setStyle(e,"overflow",""),void(o.useGpu?r.setStyle(e,"transform",""):(r.setStyle(e,"margin-left",""),r.setStyle(e,"margin-top","")));const i=t.isFunction(o.direction)?o.direction():o.direction;let a,c,l;"top"===i||"bottom"===i?(a=o.useGpu?"Y":"margin-top",c=n._height(e),l="top"===i):(a=o.useGpu?"X":"margin-left",c=n._width(e),l="left"===i);const d=c*s*(l?-1:1);o.useGpu?r.setStyle(e,"transform",`translate${a}(${d}px)`):r.setStyle(e,a,`${d}px`)},{direction:"bottom",useGpu:!0,...s})},squeezeIn(e,s){e=this.parseNodes(e),s={...n.animationDefaults,direction:"bottom",useGpu:!0,...s};const o=e.map(e=>{const o=r.getStyle(e,"height"),i=r.getStyle(e,"min-height"),a=r.getStyle(e,"width"),c=r.getStyle(e,"min-width");return r.setStyle(e,"overflow","hidden"),n._animate(e,(e,s,l)=>{if(r.setStyle(e,"height",o),r.setStyle(e,"min-height",i),r.setStyle(e,"width",a),r.setStyle(e,"min-width",c),1===s)return r.setStyle(e,"overflow",""),void(l.useGpu?r.setStyle(e,"transform",""):(r.setStyle(e,"margin-left",""),r.setStyle(e,"margin-top","")));const d=t.isFunction(l.direction)?l.direction():l.direction;let h,p,u;"top"===d||"bottom"===d?(h="height",p="min-height","top"===d&&(u=l.useGpu?"Y":"margin-top")):"left"!==d&&"right"!==d||(h="width",p="min-width","left"===d&&(u=l.useGpu?"X":"margin-left"));const f=n[`_${h}`](e),m=f*s;if(r.setStyle(e,h,`${m}px`),r.setStyle(e,p,"0px"),u){const t=f-m;l.useGpu?r.setStyle(e,"transform",`translate${u}(${t}px)`):r.setStyle(e,u,`${t}px`)}},s)});return n._start(),Promise.all(o)},squeezeOut(e,s){e=this.parseNodes(e),s={...n.animationDefaults,direction:"bottom",useGpu:!0,...s};const o=e.map(e=>{const o=r.getStyle(e,"height"),i=r.getStyle(e,"min-height"),a=r.getStyle(e,"width"),c=r.getStyle(e,"min-width");return r.setStyle(e,"overflow","hidden"),n._animate(e,(e,s,l)=>{if(r.setStyle(e,"height",o),r.setStyle(e,"min-height",i),r.setStyle(e,"width",a),r.setStyle(e,"min-width",c),1===s)return r.setStyle(e,"overflow",""),void(l.useGpu?r.setStyle(e,"transform",""):(r.setStyle(e,"margin-left",""),r.setStyle(e,"margin-top","")));const d=t.isFunction(l.direction)?l.direction():l.direction;let h,p,u;"top"===d||"bottom"===d?(h="height",p="min-height","top"===d&&(u=l.useGpu?"Y":"margin-top")):"left"!==d&&"right"!==d||(h="width",p="min-width","left"===d&&(u=l.useGpu?"X":"margin-left"));const f=n[`_${h}`](e),m=f-f*s;if(r.setStyle(e,h,`${m}px`),r.setStyle(e,p,"0px"),u){const t=f-m;l.useGpu?r.setStyle(e,"transform",`translate${u}(${t}px)`):r.setStyle(e,u,`${t}px`)}},s)});return n._start(),Promise.all(o)}}),Object.assign(n.prototype,{clearQueue(e){e=this.parseNodes(e);for(const t of e)n._clearQueue(t)},queue(e,t){e=this.parseNodes(e);for(const s of e)n._queue(s,t)}}),Object.assign(n.prototype,{getAttribute(e,t){const s=this.parseNode(e);if(s)return n._getAttribute(s,t)},getDataset(e,t){const s=this.parseNode(e);if(s)return n._getDataset(s,t)},getHTML(e){return this.getProperty(e,"innerHTML")},getProperty(e,t){const s=this.parseNode(e);if(s)return r.getProperty(s,t)},getText(e){return this.getProperty(e,"innerText")},getValue(e){return this.getProperty(e,"value")},removeAttribute(e,t){e=this.parseNodes(e);for(const s of e)r.removeAttribute(s,t)},removeDataset(e,t){e=this.parseNodes(e);for(const s of e)r.removeDataset(s,t)},removeProperty(e,t){e=this.parseNodes(e);for(const s of e)r.removeProperty(s,t)},setAttribute(e,t,s){e=this.parseNodes(e);const r=n._parseData(t,s);for(const t of e)n._setAttribute(t,r)},setDataset(e,t,s){e=this.parseNodes(e);const o=n._parseData(t,s,!0);for(const t of e)r.setDataset(t,o)},setHTML(e,t){this.empty(e),this.setProperty(e,"innerHTML",t)},setProperty(e,t,s){e=this.parseNodes(e);const o=n._parseData(t,s);for(const t of e)r.setProperty(t,o)},setText(e,t){this.empty(e),this.setProperty(e,"innerText",t)},setValue(e,t){this.setProperty(e,"value",t)}}),Object.assign(n.prototype,{cloneData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)n._cloneData(s,e)},getData(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return n._getData(s,t)},removeData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)n._removeData(s,t)},setData(e,t,s){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});const r=n._parseData(t,s);for(const t of e)n._setData(t,r)}}),Object.assign(n.prototype,{center(e,t){const s=this.rect(e,t);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(e,t){const s=this.rect(t);if(s){e=this.parseNodes(e);for(const t of e)n._constrain(t,s)}},distTo(e,s,n,r){const o=this.center(e,r);if(o)return t.dist(o.x,o.y,s,n)},distToNode(e,t){const s=this.center(t);if(s)return this.distTo(e,s.x,s.y)},nearestTo(e,t,s,n){let r=null,o=Number.MAX_VALUE;e=this.parseNodes(e);for(const i of e){const e=this.distTo(i,t,s,n);e&&e<o&&(o=e,r=i)}return r},nearestToNode(e,t){const s=this.center(t);if(s)return this.nearestTo(e,s.x,s.y)},percentX(e,s,n,r=!0){const o=this.rect(e,n);if(!o)return;const i=(s-o.left)/o.width*100;return r?t.clampPercent(i):i},percentY(e,s,n){const r=this.rect(e,n);if(!r)return;const o=(s-r.top)/r.height*100;return clamp?t.clampPercent(o):o},position(e,t){const s=this.parseNode(e);if(s)return n._position(s,t)},rect(e,t){const s=this.parseNode(e);if(s)return n._rect(s,t)}}),Object.assign(n.prototype,{getScrollX(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?r.getScrollXWindow(s):t.isDocument(s)?n._getScrollXDocument(s):r.getScrollX(s)},getScrollY(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?r.getScrollYWindow(s):t.isDocument(s)?n._getScrollYDocument(s):r.getScrollY(s)},setScroll(e,s,o){e=this.parseNodes(e,{document:!0,window:!0});for(const i of e)t.isWindow(i)?r.setScrollWindow(i,s,o):t.isDocument(i)?n._setScrollDocument(i,s,o):n._setScroll(i,s,o)},setScrollX(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?n._setScrollXWindow(o,s):t.isDocument(o)?n._setScrollXDocument(o,s):r.setScrollX(o,s)},setScrollY(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?n._setScrollYWindow(o,s):t.isDocument(o)?n._setScrollYDocument(o,s):r.setScrollY(o,s)}}),Object.assign(n.prototype,{height(e,s,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?r.heightWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?n._height(r.documentElement(a),!!t.isUndefined(s)||s,o,i):n._height(a,s,o,i)},width(e,s,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?r.widthWindow(a,!t.isUndefined(s)&&s):t.isDocument(a)?n._width(r.documentElement(a),!!t.isUndefined(s)||s,o,i):n._width(a,s,o,i)}}),Object.assign(n.prototype,{addClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.addClass(s,...t)},css(e,t){const s=this.parseNode(e);if(s)return n._css(s,t)},getStyle(e,t){const s=this.parseNode(e);if(s)return n._getStyle(s,t)},hide(e){this.setStyle(e,"display","none")},removeClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.removeClass(s,...t)},setStyle(e,t,s,r){e=this.parseNodes(e);const o=n._parseData(t,s);for(const t of e)n._setStyle(t,o,r)},show(e){this.setStyle(e,"display","")},toggle(e){e=this.parseNodes(e);for(const t of e)"none"===r.getStyle(t,"display")?r.setStyle(t,"display",""):r.setStyle(t,"display","none")},toggleClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.toggleClass(s,...t)}}),Object.assign(n.prototype,{mouseDragFactory:(s,r,o,i=!0)=>(r&&i&&(r=t.animation(r),o&&(o=t.animation(o))),t=>{if(s&&!1===s(t))return!1;r&&n._addEvent(e,"mousemove",r),(r||o)&&n._addEvent(e,"mouseup",t=>{r&&n._removeEvent(e,"mousemove",r),o&&o(t)},!1,!0)})}),Object.assign(n.prototype,{blur(e){const t=this.parseNode(e);t&&r.blur(t)},click(e){const t=this.parseNode(e);t&&r.click(t)},focus(e){const t=this.parseNode(e);t&&r.focus(t)},ready(t){"complete"!==this._context.readyState?n._addEvent(e,"DOMContentLoaded",t):t()}}),Object.assign(n.prototype,{addEvent(e,t,s,r,o){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const i of e)for(const e of n._parseEvents(t))n._addEvent(i,e,s,r,o)},addEventDelegate(e,t,s,n){this.addEvent(e,t,n,s)},addEventDelegateOnce(e,t,s,n){this.addEvent(e,t,n,s,!0)},addEventOnce(e,t,s){this.addEvent(e,t,s,null,!0)},cloneEvents(e,t){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)n._cloneEvents(s,e)},removeEvent(e,t,s,r){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=!!t&&n._parseEvents(t);for(const o of e)if(n._events.has(o))if(t)for(const e of t)n._removeEvent(o,e,s,r);else n._removeEvent(o,t,s,r)},removeEventDelegate(e,t,s,n){this.removeEvent(e,t,n,s)},triggerEvent(e,t,s,r){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=n._parseEvents(t);for(const o of e)for(const e of t)n._triggerEvent(o,e,s,r)}}),Object.assign(n.prototype,{attachShadow(e,t=!0){const s=this.parseNode(e);if(s)return r.attachShadow(s,t)},create(e="div",s){const o=r.create(this._context,e);return s?("html"in s?r.setProperty(o,{innerHTML:s.html}):"text"in s&&r.setProperty(o,{innerText:s.text}),"class"in s&&r.addClass(o,...n._parseClasses(t.wrap(s.class))),"style"in s&&n._setStyle(o,s.style),"value"in s&&r.setProperty(o,{value:s.value}),"attributes"in s&&n._setAttribute(o,s.attributes),"properties"in s&&r.setProperty(o,s.properties),"dataset"in s&&r.setDataset(o,s.dataset),o):o},createComment(e){return r.createComment(this._context,e)},createFragment(){return r.createFragment(this._context)},createRange(){return r.createRange(this._context)},createText(e){return r.createText(this._context,e)},parseHTML(e){return t.wrap(r.children(this.createRange().createContextualFragment(e)))}}),Object.assign(n.prototype,{clone(e,t=!0,s=!1,r=!1){return(e=this.parseNodes(e,{node:!0,fragment:!0})).map(e=>n._clone(e,t,s,r))},detach(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=r.parent(t);e&&r.removeChild(e,t)}},empty(e){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});for(const t of e)n._empty(t)},remove(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=r.parent(t);e&&(n._remove(t),r.removeChild(e,t))}},replaceAll(e,t){this.replaceWith(t,e)},replaceWith(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const s of e)n._replaceWith(s,t)}}),Object.assign(n.prototype,{after(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=r.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)r.insertBefore(n,e,r.next(s))}},append(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(s){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)r.insertBefore(s,e)}},appendTo(e,t){this.append(t,e)},before(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=r.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)r.insertBefore(n,e,s)}},insertAfter(e,t){this.after(t,e)},insertBefore(e,t){this.before(t,e)},prepend(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(!s)return;const n=r.firstChild(s);t=this.parseNodes(t,{node:!0,fragment:!0,html:!0}).reverse();for(const e of t)r.insertBefore(s,e,n)},prependTo(e,t){this.prepend(t,e)}}),Object.assign(n.prototype,{unwrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseFilter(t);for(const s of e)n._unwrap(s,t)},wrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)n._wrap(s,t)},wrapAll(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});const s=this.clone(t,!0);n._wrapAll(e,s)},wrapInner(e,t){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)n._wrapInner(s,t)}}),Object.assign(n.prototype,{connected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>r.isConnected(e))},equal(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>r.isEqual(e,t)))},filter(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>!t||t(e,s))},filterOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>!t||t(e,s))||null},fixed(e){return this.parseNodes(e,{node:!0}).filter(e=>t.isElement(e)&&"fixed"===n._css(e,"position")||n._parents(e,e=>t.isElement(e)&&"fixed"===n._css(e,"position"),!1,!0).length)},hidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>!n._isVisible(e))},not(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>t&&!t(e,s))},notOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>t&&!t(e,s))},same(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>r.isSame(e,t)))},visible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>n._isVisible(e))},withAnimation(e){return this.parseNodes(e).filter(e=>n._hasAnimation(e))},withAttribute(e,t){return this.parseNodes(e).filter(e=>r.hasAttribute(e,t))},withChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter(e=>r.hasChildren(e))},withClass(e,...t){return t=n._parseClasses(t),this.parseNodes(e).filter(e=>t.some(t=>r.hasClass(e,t)))},withCSSAnimation(e){return this.parseNodes(e).filter(e=>n._hasCSSAnimation(e))},withCSSTransition(e){return this.parseNodes(e).filter(e=>n._hasCSSTransition(e))},withData(e,t){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(e=>n._hasData(e,t))},withDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter((e,s)=>!t||t(e,s))},withProperty(e,t){return this.parseNodes(e).filter(e=>r.hasProperty(e,t))}}),Object.assign(n.prototype,{find(e,s=this._context){const o=e.match(n._fastRegExp);if(o)return"#"===o[1]?this.findById(o[2],s):"."===o[1]?this.findByClass(o[2],s):this.findByTag(o[2],s);if(e.match(n._complexRegExp)){const r=n._prefixSelectors(e,`#${n._tempId} `);return t.isElement(s)?n.__findByCustom(r,s):(s=this.parseNodes(s),n._findByCustom(r,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?t.wrap(r.findBySelector(e,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),n._findBySelector(e,s))},findByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(r.findByClass(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const o of s)t.merge(n,r.findByClass(e,o));return s.length>1&&n.length>1?t.unique(n):n},findById(e,t=this._context){const s=this.findOneById(e,t);return s?[s]:[]},findByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.wrap(r.findByTag(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const o of s)t.merge(n,r.findByTag(e,o));return s.length>1&&n.length>1?t.unique(n):n},findOne(e,s=this._context){const o=e.match(n._fastRegExp);if(o)return"#"===o[1]?this.findOneById(o[2],s):"."===o[1]?this.findOneByClass(o[2],s):this.findOneByTag(o[2],s);if(e.match(n._complexRegExp)){const r=n._prefixSelectors(e,`#${n._tempId} `);return t.isElement(s)?n.__findOneByCustom(r,s):(s=this.parseNodes(s),n._findOneByCustom(r,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?r.findOneBySelector(e,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),n._findOneBySelector(e,s))},findOneByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return r.findByClass(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=r.findByClass(e,t).item(0);if(s)return s}return null},findOneById(e,s=this._context){const n=r.findById(e,this._context);return n?t.isDocument(s)?n:t.isElement(s)?r.contains(s,n)?n:null:(s=this.parseNodes(s)).some(e=>r.contains(e,n))?n:null:null},findOneByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return r.findByTag(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=r.findByTag(e,t).item(0);if(s)return s}return null}}),Object.assign(n.prototype,{child(e,t){return this.children(e,t,!0)},children(e,s,r=!1,o=!0){if(s=this.parseFilter(s),t.isElement(e)||t.isDocument(e)||t.isFragment(e)||t.isShadow(e))return n._children(e,s,r,o);e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});const i=[];for(const a of e)t.merge(i,n._children(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},closest(e,t,s){return this.parents(e,t,s,!0)},commonAncestor(e){if(!(e=this.sort(e)).length)return;const t=this.createRange();return 1===e.length?r.select(t,e.shift()):(r.setStartBefore(t,e.shift()),r.setEndAfter(t,e.pop())),t.commonAncestorContainer},contents(e){return this.children(e,!1,!1,!1)},fragment(e){const t=this.parseNode(e);if(t)return r.fragment(t)},next(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._next(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._next(o,s));return e.length>1&&r.length>1?t.unique(r):r},nextAll(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._nextAll(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._nextAll(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},offsetParent(e){return this.forceShow(e,e=>r.offsetParent(e))},parent(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._parent(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._parent(o,s));return e.length>1&&r.length>1?t.unique(r):r},parents(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._parents(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._parents(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},prev(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._prev(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._prev(o,s));return e.length>1&&r.length>1?t.unique(r):r},prevAll(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._prevAll(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._prevAll(a,s,r,o));return e.length>1&&i.length?t.unique(i):i},shadow(e){const t=this.parseNode(e);if(t)return r.shadow(t)},siblings(e,s,r=!0){if(s=this.parseFilter(s),t.isNode(e))return n._siblings(e,s,r);e=this.parseNodes(e,{node:!0});const o=[];for(const i of e)t.merge(o,n._siblings(i,s,r));return e.length>1&&o.length>1?t.unique(o):o}}),Object.assign(n.prototype,{parseFilter(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>r.is(t,e):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>r.isSame(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.includes(t)))},parseFilterContains(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>!!this.findOne(e,t):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>r.contains(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.some(e=>r.contains(t,e))))},parseNode(e,s={}){if(t.isString(e)){if("html"in s&&s.html&&"<"===e.trim().charAt(0))return this.parseHTML(e).shift();const t=this.findOne(e,"context"in s?s.context:this._context);return t||null}const r=n.parseNodesFactory(s);if(r(e))return e;const o=t.wrap(e).slice().shift();return o&&r(o)?o:null},parseNodes(e,s={}){if(t.isString(e))return"html"in s&&s.html&&"<"===e.trim().charAt(0)?this.parseHTML(e):this.find(e,"context"in s?s.context:this._context);const r=n.parseNodesFactory(s);return r(e)?[e]:t.wrap(e).filter(r)}}),Object.assign(n.prototype,{afterSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=r.getSelection();if(!r.rangeCount(t))return;const s=r.getRange(t);r.removeRanges(t),r.collapse(s);for(const t of e)r.insert(s,t)},beforeSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=r.getSelection();if(!r.rangeCount(t))return;const s=r.getRange(t);r.removeRanges(t);for(const t of e)r.insert(s,t)},extractSelection(){const e=r.getSelection();if(!r.rangeCount(e))return[];const s=r.getRange(e);r.removeRanges(e);const n=r.extract(s);return t.wrap(r.childNodes(n))},getSelection(){const e=r.getSelection();if(!r.rangeCount(e))return[];const s=r.getRange(e),n=t.wrap(r.findBySelector("*",s.commonAncestorContainer));if(!n.length)return[s.commonAncestorContainer];if(1===n.length)return n;const o=r.startContainer(s),i=r.endContainer(s),a=t.isElement(o)?o:r.parent(o),c=t.isElement(i)?i:r.parent(i);return n.slice(n.indexOf(a),n.indexOf(c)+1)},select(e){const t=this.parseNode(e,{node:!0,fragment:!0,shadow:!0});if(t&&"select"in t)return t.select();const s=r.getSelection();if(r.rangeCount(s)>0&&r.removeRanges(s),!t)return;const n=this.createRange();r.select(n,t),r.addRange(s,n)},selectAll(e){e=this.sort(e);const t=r.getSelection();if(r.rangeCount(t)&&r.removeRanges(t),!e.length)return;const s=this.createRange();1==e.length?r.select(s,e.shift()):(r.setStartBefore(s,e.shift()),r.setEndAfter(s,e.pop())),r.addRange(t,s)},wrapSelection(e){e=this.parseNodes(e,{fragment:!0,html:!0});const s=r.getSelection();if(!r.rangeCount(s))return;const o=r.getRange(s);r.removeRanges(s);const i=r.extract(o),a=n._deepest(e.slice().shift()),c=t.wrap(r.childNodes(i));for(const e of c)r.insertBefore(a,e);for(const t of e)r.insert(o,t)}}),Object.assign(n.prototype,{hasAnimation(e){return this.parseNodes(e).some(e=>n._hasAnimation(e))},hasAttribute(e,t){return this.parseNodes(e).some(e=>r.hasAttribute(e,t))},hasChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>r.hasChildren(e))},hasClass(e,...t){return t=n._parseClasses(t),this.parseNodes(e).some(e=>t.some(t=>r.hasClass(e,t)))},hasCSSAnimation(e){return this.parseNodes(e).some(e=>n._hasCSSAnimation(e))},hasCSSTransition(e){return this.parseNodes(e).some(e=>n._hasCSSTransition(e))},hasData(e,t){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}).some(e=>n._hasData(e,t))},hasDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>!t||t(e))},hasFragment(e){return this.parseNodes(e).some(e=>n._hasFragment(e))},hasProperty(e,t){return this.parseNodes(e).some(e=>r.hasProperty(e,t))},hasShadow(e){return this.parseNodes(e).some(e=>n._hasShadow(e))},is(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>!t||t(e))},isConnected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>r.isConnected(e))},isEqual(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>r.isEqual(e,t)))},isFixed(e){return this.parseNodes(e,{node:!0}).some(e=>t.isElement(e)&&"fixed"===n._css(e,"position")||n._parents(e,e=>t.isElement(e)&&"fixed"===n._css(e,"position"),!1,!0).length)},isHidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>!n._isVisible(e))},isSame(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>r.isSame(e,t)))},isVisible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>n._isVisible(e))}}),Object.assign(n.prototype,{exec(e,t=null){return this._context.execCommand(e,!1,t)},forceShow(e,t){const s=this.parseNode(e,{node:!0,document:!0,window:!0});if(s)return n._forceShow(s,t)},index(e){const s=this.parseNode(e,{node:!0});if(s)return t.wrap(r.children(r.parent(s))).indexOf(s)},indexOf(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).findIndex(e=>!t||t(e))},normalize(e){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0});for(const t of e)r.normalize(t)},sanitize(e,t=n.allowedTags){const s=this.create("template",{html:e}),o=r.fragment(s),i=r.children(o);for(const e of i)n._sanitize(e,o,t);return this.getHTML(s)},serialize(e){return n._parseParams(this.serializeArray(e))},serializeArray(e){return this.parseNodes(e,{fragment:!0,shadow:!0}).reduce((e,s)=>{if(r.is(s,"form")||t.isFragment(s)||t.isShadow(s))return e.concat(this.serializeArray(r.findBySelector("input, select, textarea",s)));if(r.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return e;const n=r.getAttribute(s,"name");if(!n)return e;const o=r.getAttribute(s,"value")||"";return e.push({name:n,value:o}),e},[])},sort(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).sort((e,t)=>{if(r.isSame(e,t))return 0;const s=r.comparePosition(e,t);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})}}),Object.assign(n,{_animate(e,s,r){n._hasAnimation(e)||this._animations.set(e,[]);const o=performance.now();return new Promise((n,i)=>{this._animations.get(e).push((a=!1,c=!1)=>{if(a&&!c)return i(e),!0;let l;return c?l=1:(l=(performance.now()-o)/r.duration,r.infinite?l%=1:l=t.clamp(l),"ease-in"===r.type?l=Math.pow(l,2):"ease-out"===r.type?l=Math.sqrt(l):"ease-in-out"===r.type&&(l=l<=.5?2*Math.pow(l,2):1-(1-l)**2*2)),s(e,l,r),1===l?(n(e),!0):void 0})})},_animationFrame(){for(let[e,t]of this._animations)(t=t.filter(e=>!e())).length?this._animations.set(e,t):this._animations.delete(e);this._animations.size?e.requestAnimationFrame(e=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(e,t=!0){if(!n._hasAnimation(e))return;const s=this._animations.get(e);for(const e of s)e(!0,t);this._animations.delete(e)}}),Object.assign(n,{_clearQueue(e){this._queues.has(e)&&this._queues.delete(e)},_dequeueNode(e){if(!this._queues.has(e))return;const t=this._queues.get(e).shift();t?Promise.resolve(t(e)).finally(t=>this._dequeueNode(e)):this._queues.delete(e)},_queue(e,t){const s=!this._queues.has(e);s&&this._queues.set(e,[]),this._queues.get(e).push(t),s&&this._dequeueNode(e)}}),Object.assign(n,{_getAttribute(e,t){if(t)return r.getAttribute(e,t);const s=r.attributes(e),n={};for(const e of s)n[e.nodeName]=e.nodeValue;return n},_getDataset(e,t){if(t)return n._parseDataset(r.getDataset(e,t));const s=r.dataset(e),o={};for(const e in s)o[e]=n._parseDataset(s[e]);return o},_setAttribute(e,t){for(const s in t)r.setAttribute(e,s,t[s])}}),Object.assign(n,{_cloneData(e,t){this._data.has(e)&&this._setData(t,{...this._data.get(e)})},_getData(e,t){if(this._data.has(e))return t?this._data.get(e)[t]:this._data.get(e)},_removeData(e,t){if(this._data.has(e)){if(t){const s=this._data.get(e);if(delete s[t],Object.keys(s).length)return}this._data.delete(e)}},_setData(e,t){this._data.has(e)||this._data.set(e,{}),Object.assign(this._data.get(e),t)}}),Object.assign(n,{_constrain(e,t){const s=this._rect(e),n={};let r,o;s.height>t.height&&(n.height=t.height),s.width>t.width&&(n.width=t.width),s.left-t.left<0?r=s.left-t.left:s.right-t.right>0&&(r=s.right-t.right),r&&(n.left=`${parseFloat(this._css(e,"left"))-r}px`),s.top-t.top<0?o=s.top-t.top:s.bottom-t.bottom>0&&(o=s.bottom-t.bottom),o&&(n.top=`${parseFloat(this._css(e,"top"))-o}px`),this._setStyle(e,n)},_position(e,t){return this._forceShow(e,e=>{const s={x:r.offsetLeft(e),y:r.offsetTop(e)};if(t){let t=e;for(;t=r.offsetParent(t);)s.x+=r.offsetLeft(t),s.y+=r.offsetTop(t)}return s})},_rect(t,s){return this._forceShow(t,t=>{const n=r.rect(t);return s&&(n.x+=r.getScrollXWindow(e),n.y+=r.getScrollYWindow(e)),n})}}),Object.assign(n,{_getScrollXDocument:e=>r.getScrollX(r.scrollingElement(e)),_getScrollYDocument:e=>r.getScrollY(r.scrollingElement(e)),_setScroll(e,t,s){r.setScrollX(e,t),r.setScrollY(e,s)},_setScrollDocument(e,t,s){return this._setScroll(r.scrollingElement(e),t,s)},_setScrollXDocument:(e,t)=>r.setScrollX(r.scrollingElement(e),t),_setScrollXWindow:(e,t)=>r.setScrollWindow(e,t,r.getScrollYWindow(e)),_setScrollYDocument:(e,t)=>r.setScrollY(r.scrollingElement(e),t),_setScrollYWindow:(e,t)=>r.setScrollWindow(e,r.getScrollXWindow(e),t)}),Object.assign(n,{_height(e,t=!0,s,n){return this._forceShow(e,e=>{let o=r.height(e);return t||(o-=parseInt(this._css(e,"padding-top"))+parseInt(this._css(e,"padding-bottom"))),s&&(o+=parseInt(this._css(e,"border-top-width"))+parseInt(this._css(e,"border-bottom-width"))),n&&(o+=parseInt(this._css(e,"margin-top"))+parseInt(this._css(e,"margin-bottom"))),o})},_width(e,t=!0,s,n){return this._forceShow(e,e=>{let o=r.width(e);return t||(o-=parseInt(this._css(e,"padding-left"))+parseInt(this._css(e,"padding-right"))),s&&(o+=parseInt(this._css(e,"border-left-width"))+parseInt(this._css(e,"border-right-width"))),n&&(o+=parseInt(this._css(e,"margin-left"))+parseInt(this._css(e,"margin-right"))),o})}}),Object.assign(n,{_css(e,t){return this._styles.has(e)||this._styles.set(e,r.css(e)),t?this._styles.get(e).getPropertyValue(t):{...this._styles.get(e)}},_getStyle(e,s){if(s)return s=t.snakeCase(s),r.getStyle(e,s);const n=r.style(e),o={};for(const t of n)o[t]=r.getStyle(e,t);return o},_setStyle(e,s,n){for(let o in s){let i=s[o];o=t.snakeCase(o),i&&t.isNumeric(i)&&!this.cssNumberProperties.includes(o)&&(i+="px"),r.setStyle(e,o,i,n)}}}),Object.assign(n,{_delegateFactory(e,s,o){const i=s.match(n._complexRegExp)?this._getDelegateContainsFactory(e,s):this._getDelegateMatchFactory(e,s);return s=>{if(r.isSame(s.target,e))return;const n=i(s.target);if(!n)return;const a={};for(const e in s)a[e]=t.isFunction(s[e])?(...t)=>s[e](...t):s[e];return a.currentTarget=n,a.delegateTarget=e,a.originalEvent=s,Object.freeze(a),o(a)}},_getDelegateContainsFactory(e,t){return t=n._prefixSelectors(selectors,`#${n._tempId}`),s=>{const n=this.__findByCustom(t,e);return!!n.length&&(n.includes(s)?s:this._parents(s,e=>n.includes(e),t=>r.isSame(e,t),!0).shift())}},_getDelegateMatchFactory(e,t){return s=>r.is(s,t)?s:this._parents(s,e=>r.is(e,t),t=>r.isSame(e,t),!0).shift()},_namespaceFactory:(e,t)=>s=>{if(!("namespaceRegExp"in s)||s.namespaceRegExp.test(e))return t(s)},_selfDestructFactory(e,t,s,n){return r=>(s?this._removeEvent(e,t,n,s):this._removeEvent(e,t,n),n(r))}}),Object.assign(n,{_addEvent(e,t,s,n,o){this._events.has(e)||this._events.set(e,{});const i=this._events.get(e),a={delegate:n,callback:s,selfDestruct:o},c=this._parseEvent(t);let l=s;if(o&&(l=this._selfDestructFactory(e,t,n,l)),n&&(l=this._delegateFactory(e,n,l)),t!==c&&(l=this._namespaceFactory(t,l)),a.realCallback=l,a.event=t,a.realEvent=c,i[c]){if(i[c].includes(a))return}else i[c]=[];i[c].push(a),r.addEvent(e,c,l)},_cloneEvents(e,t){if(!this._events.has(e))return;const s=this._events.get(e);for(const e in s)for(const n of s[e])this._addEvent(t,n.event,n.callback,n.delegate,n.selfDestruct)},_removeEvent(e,t,s,o){if(!this._events.has(e))return;const i=this._events.get(e);if(!t){const t=Object.keys(i);for(const n of t)this._removeEvent(e,n,s,o);return}const a=this._parseEvent(t);i[a]&&(i[a]=i[a].filter(i=>{if(o&&o!==i.delegate||s&&s!==i.callback)return!0;if(a!==t){const e=n._eventNamespacedRegExp(t);if(!i.event.match(e))return!0}return r.removeEvent(e,i.realEvent,i.realCallback),!1}),i[a].length||delete i[a],Object.keys(i).length||this._events.delete(e))},_triggerEvent(e,t,s,o){const i=n._parseEvent(t),a={...s};return i!==t&&(a.namespace=t.substring(i.length+1),a.namespaceRegExp=n._eventNamespacedRegExp(t)),r.triggerEvent(e,i,a,o)}}),Object.assign(n,{_eventNamespacedRegExp:e=>new RegExp("^"+t.escapeRegExp(e)+"(?:\\.|$)","i"),_parseClasses:e=>e.flat().flatMap(e=>e.split(" ")),_parseData(e,s,n=!1){const r=t.isObject(e)?e:{[e]:s},o={};for(const e in r){const s=r[e];o[e]=n&&(t.isObject(s)||t.isArray(s))?JSON.stringify(s):s}return o},_parseDataset(e){if(t.isUndefined(e))return e;const s=e.toLowerCase().trim();if(["true","on"].includes(s))return!0;if(["false","off"].includes(s))return!1;if("null"===s)return null;if(t.isNumeric(s))return parseFloat(s);if(["{","["].includes(s.charAt(0)))try{return JSON.parse(e)}catch(e){}return e},_parseEvent:e=>e.split(".").shift(),_parseEvents:e=>e.split(" "),_parseFormData(e){const s=new FormData;if(t.isArray(e)){const t={};for(const s of e)t[s.name]=s.value;e=t}return this._parseFormValues(e,s),s},_parseFormValues(e,s,n){let r;for(r in e){const o=e[r];if(n&&(r=`${n}[${r}]`),t.isPlainObject(o))this._parseFormValues(o,s,r);else if(t.isArray(o))for(const e of o)s.append(r,e);else s.set(r,o)}},_parseParams(e){let s=[];return t.isArray(e)?s=e.map(e=>this._parseParam(e.name,e.value)):t.isObject(e)&&(s=Object.keys(e).map(t=>this._parseParam(t,e[t]))),s.flatMap(encodeURI).join("&")},_parseParam(e,s){return t.isArray(s)?s.map(t=>this._parseParam(e,t)).flat():t.isObject(s)?Object.keys(s).map(t=>this._parseParam(e+"["+t+"]",s[t])).flat():e+"="+s},_prefixSelectors(e,t){return e.split(this._splitRegExp).filter(e=>!!e).map(e=>`${t} ${e}`)}}),Object.assign(n,{_clone(e,t=!0,s=!1,n=!1){const o=r.clone(e,t);return s||n?(s&&this._cloneEvents(e,o),n&&this._cloneData(e,o),t&&this._deepClone(e,o,s,n),o):o},_deepClone(e,s,n=!1,o=!1){const i=t.wrap(r.childNodes(e)),a=t.wrap(r.childNodes(s));for(let e=0;e<i.length;e++)n&&this._cloneEvents(i[e],a[e]),o&&this._cloneData(i[e],a[e]),this._deepClone(i[e],a[e])},_detach(e){const t=r.parent(e);t||r.removeChild(t,e)},_empty(e){const s=t.wrap(r.childNodes(e));for(const t of s)this._remove(t),r.removeChild(e,t);if(this._hasShadow(e)){const t=r.shadow(e);this._remove(t)}if(this._hasFragment(e)){const t=r.fragment(e);this._remove(t)}},_remove(e){r.triggerEvent(e,"remove"),this._empty(e),t.isElement(e)&&(this._clearQueue(e),this._stop(e),this._styles.has(e)&&this._styles.delete(e)),this._removeEvent(e),this._removeData(e)},_replaceWith(e,t){const s=r.parent(e);if(s){for(const n of t){const t=this._clone(n,!0);r.insertBefore(s,t,e)}this._remove(e),r.removeChild(s,e)}}}),Object.assign(n,{_unwrap(e,s){const n=r.parent(e,s);if(!n)return;const o=r.parent(n);if(!n)return;const i=t.wrap(r.childNodes(n));for(const e of i)r.insertBefore(o,e,n);this._remove(n),r.removeChild(o,n)},_wrap(e,t){const s=r.parent(e);if(!s)return;const n=t.map(e=>this._clone(e,!0));for(const t of n)r.insertBefore(s,t,e);const o=this._deepest(n.shift());r.insertBefore(o,e)},_wrapAll(e,t){const s=e.slice().shift();if(!s)return;const o=r.parent(s);if(!o)return;for(const e of t)r.insertBefore(o,e,s);const i=n._deepest(t.shift());for(const t of e)r.insertBefore(i,t)},_wrapInner(e,s){const n=t.wrap(r.childNodes(e)),o=s.map(e=>this._clone(e,!0));for(const t of o)r.insertBefore(e,t);const i=this._deepest(o.shift());for(const e of n)r.insertBefore(i,e)}}),Object.assign(n,{parseHTML:e=>(new DOMParser).parseFromString(e,"text/html"),parseXML:e=>(new DOMParser).parseFromString(e,"application/xml")}),Object.assign(n,{_findByCustom(e,s=this._context){const n=[];for(const r of s)t.merge(n,this.__findByCustom(e,r));return s.length>1&&n.length>1?t.unique(n):n},_findBySelector(e,s){const n=[];for(const o of s)t.merge(n,r.findBySelector(e,o));return s.length>1&&n.length>1?t.unique(n):n},_findOneByCustom(e,t){for(const s of t){const t=this.__findOneByCustom(e,s);if(t)return t}return null},_findOneBySelector(e,t){for(const s of t){const t=r.findOneBySelector(e,s);if(t)return t}return null},__findByCustom(e,s){const n=r.getAttribute(s,"id");r.setAttribute(s,"id",this._tempId);const o=r.parent(s),i=[];for(const s of e)t.merge(i,r.findBySelector(s,o));return n?r.setAttribute(s,"id",n):r.removeAttribute(s,"id"),e.length>1&&i.length>1?t.unique(i):i},__findOneByCustom(e,t){const s=r.getAttribute(t,"id");r.setAttribute(t,"id",this._tempId);const n=r.parent(t);if(!n)return null;let o=null;for(const t of e)if(o=r.findOneBySelector(t,n))break;return s?r.setAttribute(t,"id",s):r.removeAttribute(t,"id"),o}}),Object.assign(n,{_children(e,s,n=!1,o=!1){const i=t.wrap(o?r.children(e):r.childNodes(e)),a=[];let c;for(c of i)if((!s||s(c))&&(a.push(c),n))break;return a},_deepest:e=>t.wrap(r.findBySelector("*",e)).find(e=>!r.hasChildren(e))||e,_next(e,t){const s=[];return(e=r.next(e))?t&&!t(e)?s:(s.push(e),s):s},_nextAll(e,t,s,n=!1){const o=[];for(;(e=r.next(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!n)););return o},_parent(e,t){const s=[],n=r.parent(e);return n?t&&!t(n)?s:(s.push(n),s):s},_parents(e,s,n,o=!1){const i=[];for(;(e=r.parent(e))&&!t.isDocument(e)&&(!n||!n(e))&&(s&&!s(e)||(i.push(e),!o)););return i},_prev(e,t){const s=[];return(e=r.prev(e))?t&&!t(e)?s:(s.push(e),s):s},_prevAll(e,t,s,n=!1){const o=[];for(;(e=r.prev(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!n)););return o},_siblings(e,t,s=!0){const n=[],o=r.parent(e);if(!o)return n;const i=s?o.children:o.childNodes;let a;for(a of i)r.isSame(e,a)||t&&!t(a)||n.push(a);return n}}),Object.assign(n,{parseNodesFactory:e=>e?s=>(e.node?t.isNode(s):t.isElement(s))||e.fragment&&t.isFragment(s)||e.shadow&&t.isShadow(s)||e.document&&t.isDocument(s)||e.window&&t.isWindow(s):t.isElement}),Object.assign(n,{_hasAnimation(e){return this._animations.has(e)},_hasCSSAnimation(e){return!!parseFloat(this._css(e,"animation-duration"))},_hasCSSTransition(e){return!!parseFloat(this._css(e,"transition-duration"))},_hasData(e,t){return this._data.has(e)&&(!t||this._data.get(e).hasOwnProperty(t))},_hasFragment:e=>!!r.fragment(e),_hasShadow:e=>!!r.shadow(e),_isVisible:e=>t.isWindow(e)?r._isVisibleDocument(r.document(e)):t.isDocument(e)?r.isVisibleDocument(e):!!r.offsetParent(e)}),Object.assign(n,{_forceShow(e,s){if(t.isDocument(e)||t.isWindow(e)||this._isVisible(e))return s(e);const n=[];t.isElement(e)&&"none"===this._css(e,"display")&&n.push(e),t.merge(n,this._parents(e,e=>t.isElement(e)&&"none"===this._css(e,"display")));const o=new Map;for(const e of n)o.set(e,r.getAttribute(e,"style")),r.setStyle(e,"display","initial",!0);const i=s(e);for(const[e,t]of o)t?r.setAttribute(e,"style",t):r.removeAttribute(e,"style");return i},_sanitize(e,t,s=this.allowedTags){const n=this._tagName(e);if(!(n in s))return void r.removeChild(t,e);const o=[...s["*"],...s[n]],i=this._getAttribute(e);for(const t in i){!!o.find(e=>t.match(e))||r.removeAttribute(e,t)}const a=r.children(e);for(const t of a)this._sanitize(t,e,s)},_tagName:e=>r.tagName(e).toLowerCase()}),Object.assign(n,{_animating:!1,_animations:new Map,_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},allowedTags:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],_complexRegExp:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,_fastRegExp:/^([\#\.]?)([\w\-]+)$/,_localRegExp:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_splitRegExp:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,_tempId:"frost"+Date.now().toString(16)});class r{}return Object.assign(r,{attributes:e=>e.attributes,dataset:e=>e.dataset,getAttribute:(e,t)=>e.getAttribute(t),getDataset(e,t){return this.dataset(e)[t]},getProperty:(e,t)=>e[t],removeAttribute(e,t){e.removeAttribute(t)},removeDataset(e,t){delete e.dataset[t]},removeProperty(e,t){delete e[t]},setAttribute(e,t,s){e.setAttribute(t,s)},setDataset(e,t){Object.assign(e.dataset,t)},setProperty(e,t){Object.assign(e,t)}}),Object.assign(r,{offsetLeft:e=>e.offsetLeft,offsetTop:e=>e.offsetTop,rect:e=>e.getBoundingClientRect()}),Object.assign(r,{getScrollX:e=>e.scrollLeft,getScrollXWindow:e=>e.scrollX,getScrollY:e=>e.scrollTop,getScrollYWindow:e=>e.scrollY,setScrollWindow:(e,t,s)=>e.scroll(t,s),setScrollX(e,t){e.scrollLeft=t},setScrollY(e,t){e.scrollTop=t}}),Object.assign(r,{height:e=>e.clientHeight,heightWindow:(e,t)=>t?e.outerHeight:e.innerHeight,width:e=>e.clientWidth,widthWindow:(e,t)=>t?e.outerWidth:e.innerWidth}),Object.assign(r,{addClass(e,...t){e.classList.add(...t)},css:t=>e.getComputedStyle(t),getStyle(e,t){return this.style(e)[t]},removeClass(e,...t){e.classList.remove(...t)},setStyle(e,t,s,n){e.style.setProperty(t,s,n?"important":"")},style:e=>e.style,toggleClass(e,...t){e.classList.toggle(...t)}}),Object.assign(r,{blur(e){e.blur()},click(e){e.click()},focus(e){e.focus()}}),Object.assign(r,{addEvent(e,t,s){e.addEventListener(t,s)},removeEvent(e,t,s){e.removeEventListener(t,s)},triggerEvent(e,t,s,n){const r=new Event(t,{bubbles:!0,cancelable:!0,...n});return s&&Object.assign(r,s),e.dispatchEvent(r)}}),Object.assign(r,{attachShadow:(e,t=!0)=>e.attachShadow({mode:t?"open":"closed"}),clone:(e,t)=>e.cloneNode(t),create:(e,t)=>e.createElement(t),createComment:(e,t)=>e.createCommentNode(t),createFragment:e=>e.createDocumentFragment(),createRange:e=>e.createRange(),createText:(e,t)=>e.createTextNode(t)}),Object.assign(r,{removeChild(e,t){e.removeChild(t)}}),Object.assign(r,{insertBefore(e,t,s=null){e.insertBefore(t,s)}}),Object.assign(r,{findByClass:(e,t)=>t.getElementsByClassName(e),findById:(e,t)=>t.getElementById(e),findByTag:(e,t)=>t.getElementsByTagName(e),findBySelector:(e,t)=>t.querySelectorAll(e),findOneBySelector:(e,t)=>t.querySelector(e)}),Object.assign(r,{childNodes:e=>e.childNodes,children:e=>e.children,document:e=>e.document,documentElement:e=>e.documentElement,firstChild:e=>e.firstChild,fragment:e=>e.content,next:e=>e.nextSibling,offsetParent:e=>e.offsetParent,parent:e=>e.parentNode,prev:e=>e.previousSibling,scrollingElement:e=>e.scrollingElement,shadow:e=>e.shadowRoot}),Object.assign(r,{addRange(e,t){e.addRange(t)},collapse(e){e.collapse()},endContainer:e=>e.endContainer,extract:e=>e.extractContents(),getRange:(e,t=0)=>e.getRangeAt(t),getSelection:()=>e.getSelection(),insert(e,t){e.insertNode(t)},rangeCount:e=>e.rangeCount,removeRanges(e){e.removeAllRanges()},select(e,t){e.selectNode(t)},setEndAfter(e,t){e.setEndAfter(t)},setStartBefore(e,t){e.setStartBefore(t)},startContainer:e=>e.startContainer}),Object.assign(r,{contains:(e,t)=>e.contains(t),hasAttribute:(e,t)=>e.hasAttribute(t),hasChildren:e=>!!e.childElementCount,hasClass:(e,t)=>e.classList.contains(t),hasProperty:(e,t)=>e.hasOwnProperty(t),is:(e,s)=>t.isElement(e)&&e.matches(s),isConnected:e=>e.isConnected,isEqual:(e,t)=>e.isEqualNode(t),isSame:(e,t)=>e.isSameNode(t),isVisibleDocument:e=>"visible"===e.visibilityState}),Object.assign(r,{comparePosition:(e,t)=>e.compareDocumentPosition(t),normalize(e){e.normalize()},tagName:e=>e.tagName}),{DOM:n,DOMNode:r,dom:new n}});