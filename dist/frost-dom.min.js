!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:Object.assign(t,e(t))}(this,(function(t){"use strict";if(!t)throw new Error("FrostDOM requires a Window.");if(!("Core"in t))throw new Error("FrostDOM requires FrostCore.");const e=t.Core,s=t.document;class r{constructor(s){if(this._settings=e.extend({},this.constructor.defaults,s),this._settings.url||(this._settings.url=t.location),!this._settings.cache){const t=new URL(this._settings.url);t.searchParams.append("_",Date.now()),this._settings.url=t.toString()}!("Content-Type"in this._settings.headers)&&this._settings.contentType&&(this._settings.headers["Content-Type"]=this._settings.contentType),this._isLocal=this.constructor._localRegExp.test(location.protocol),this._isLocal||"X-Requested-With"in this._settings.headers||(this._settings.headers["X-Requested-With"]="XMLHttpRequest"),this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._promise=new Promise((t,e)=>{this._resolve=e=>{this._isResolved=!0,t(e)},this._reject=t=>{this._isRejected=!0,e(t)}}),this._build(),this._events(),this._send()}cancel(t="Request was cancelled"){this._isResolved||this._isRejected||this._isCancelled||(this._xhr.abort(),this._isCancelled=!0,this._settings.rejectOnCancel&&this._reject({status:this._xhr.status,xhr:this._xhr,reason:t}))}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}then(t,e){return this._promise.then(t,e)}}Object.assign(r.prototype,{_build(){this._xhr=new XMLHttpRequest,this._xhr.open(this._settings.method,this._settings.url,!0);for(const t in this._settings.headers)this._xhr.setRequestHeader(t,this._settings.headers[t]);this._settings.responseType&&(this._xhr.responseType=this._settings.responseType)},_events(){this._xhr.onload=t=>{this._xhr.status>400?this._reject({status:this._xhr.status,xhr:this._xhr,event:t}):this._resolve({response:this._xhr.response,xhr:this._xhr,event:t})},this._isLocal||(this._xhr.onerror=t=>this._reject({status:this._xhr.status,xhr:this._xhr,event:t})),this._settings.onProgress&&(this._xhr.onprogress=t=>this._settings.onProgress(t.loaded/t.total,this._xhr,t)),this._settings.onUploadProgress&&(this._xhr.upload.onprogress=t=>this._settings.onUploadProgress(t.loaded/t.total,this._xhr,t))},_send(){this._settings.beforeSend&&this._settings.beforeSend(this._xhr),this._settings.data&&this._settings.processData&&("application/json"===this._settings.contentType?this._settings.data=JSON.stringify(this._settings.data):"application/x-www-form-urlencoded"===this._settings.contentType?this._settings.data=this.constructor._parseParams(this._settings.data):this._settings.data=this.constructor._parseFormData(this._settings.data)),this._xhr.send(this._settings.data),this._settings.afterSend&&this._settings.afterSend(this._xhr)}}),Object.assign(r,{_parseFormData(t){const s=new FormData;if(e.isArray(t)){const e={};for(const s of t)e[s.name]=s.value;t=e}return this._parseFormValues(t,s),s},_parseFormValues(t,s,r){let n;for(n in t){const o=t[n];if(r&&(n=`${r}[${n}]`),e.isPlainObject(o))this._parseFormValues(o,s,n);else if(e.isArray(o))for(const t of o)s.append(n,t);else s.set(n,o)}},_parseParam(t,s){if(e.isArray(s)){const e=[];for(const r of s)e.push(this._parseParam(t,r));return e.flat()}if(e.isObject(s)){const t=[];for(const e in s)t.push(this._parseParam(`${e}[${subKey}]`,s[subKey]));return t.flat()}return`${t}=${s}`},_parseParams(t){const s=[];if(e.isArray(t))for(const e of t)s.push(this._parseParam(e.name,e.value));else if(e.isObject(t))for(const e in t)s.push(this._parseParam(e,t[e]));const r=s.flat().join("&");return encodeURI(r)}}),Object.assign(r,{defaults:{afterSend:!1,beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,headers:{},method:"GET",onProgress:!1,onUploadProgress:!1,processData:!0,rejectOnCancel:!0,responseType:!1,url:!1},_localRegExp:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/}),Object.setPrototypeOf(r.prototype,Promise.prototype);class n{constructor(t=s){this._context=t}}Object.assign(n.prototype,{ajax:t=>new r(t),delete:(t,e)=>new r({url:t,method:"DELETE",...e}),get:(t,e)=>new r({url:t,...e}),patch:(t,e,s)=>new r({url:t,data:e,method:"PATCH",...s}),post:(t,e,s)=>new r({url:t,data:e,method:"POST",...s}),put:(t,e,s)=>new r({url:t,data:e,method:"PUT",...s}),upload:(t,e,s)=>new r({url:t,data:e,method:"POST",contentType:!1,...s})}),Object.assign(n.prototype,{loadScript:(e,s=!0)=>new r({url:e,cache:s}).then(e=>eval.call(t,e.response)),loadScripts:(e,s=!0)=>Promise.all(e.map(t=>new r({url:t,cache:s}))).then(e=>{for(const s of e)eval.call(t,s.response)})}),Object.assign(n.prototype,{loadStyle(t,e=!0){return new r({url:t,cache:e}).then(t=>o.insertBefore(this._context.head,this.create("style",{html:t.response})))},loadStyles(t,e=!0){return Promise.all(t.map(t=>new r({url:t,cache:e}))).then(t=>{for(const e of t)o.insertBefore(this._context.head,this.create("style",{html:e.response}))})}}),Object.assign(n.prototype,{getCookie(t,e=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(e=>e.trimStart().substring(0,t.length)===t);if(!s)return null;const r=s.trimStart().substring(t.length+1);return e?JSON.parse(r):r},removeCookie(t,e){this.setCookie(t,"",{expires:-1,...e})},setCookie(t,e,s,r=!1){if(!t)return;r&&(e=JSON.stringify(e));let n=`${t}=${e}`;if(s){if(s.expires){const t=new Date;t.setTime(t.getTime()+1e3*s.expires),n+=`;expires=${t.toUTCString()}`}s.path&&(n+=`;path=${s.path}`),s.secure&&(n+=";secure")}this._context.cookie=n}}),Object.assign(n.prototype,{animate(t,e,s){const r=(t=this.parseNodes(t)).map(t=>this.constructor._animate(t,e,{...this.constructor.animationDefaults,...s}));return this.constructor._start(),Promise.all(r)},stop(t,e=!0){t=this.parseNodes(t);for(const s of t)this.constructor._stop(s,e)}}),Object.assign(n.prototype,{dropIn(t,e){return this.slideIn(t,{direction:"top",...e})},dropOut(t,e){return this.slideOut(t,{direction:"top",...e})},fadeIn(t,e){return this.animate(t,(t,e)=>o.setStyle(t,"opacity",e<1?e:""),e)},fadeOut(t,e){return this.animate(t,(t,e)=>o.setStyle(t,"opacity",e<1?1-e:""),e)},rotateIn(t,e){return this.animate(t,(t,e,s)=>o.setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*e)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...e})},rotateOut(t,e){return this.animate(t,(t,e,s)=>o.setStyle(t,"transform",e<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*e*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...e})},slideIn(t,s){return this.animate(t,(t,s,r)=>{if(1===s)return o.setStyle(t,"overflow",""),void(r.useGpu?o.setStyle(t,"transform",""):(o.setStyle(t,"margin-left",""),o.setStyle(t,"margin-top","")));const n=e.isFunction(r.direction)?r.direction():r.direction;let i,a,c;["top","bottom"].includes(n)?(i=r.useGpu?"Y":"margin-top",a=this.constructor._height(t),c="top"===n):(i=r.useGpu?"X":"margin-left",a=this.constructor._width(t),c="left"===n);const h=(a-a*s)*(c?-1:1);r.useGpu?o.setStyle(t,"transform",`translate${i}(${h}px)`):o.setStyle(t,i,`${h}px`)},{direction:"bottom",useGpu:!0,...s})},slideOut(t,s){return this.animate(t,(t,s,r)=>{if(1===s)return o.setStyle(t,"overflow",""),void(r.useGpu?o.setStyle(t,"transform",""):(o.setStyle(t,"margin-left",""),o.setStyle(t,"margin-top","")));const n=e.isFunction(r.direction)?r.direction():r.direction;let i,a,c;["top","bottom"].includes(n)?(i=r.useGpu?"Y":"margin-top",a=this.constructor._height(t),c="top"===n):(i=r.useGpu?"X":"margin-left",a=this.constructor._width(t),c="left"===n);const h=a*s*(c?-1:1);r.useGpu?o.setStyle(t,"transform",`translate${i}(${h}px)`):o.setStyle(t,i,`${h}px`)},{direction:"bottom",useGpu:!0,...s})},squeezeIn(t,s){t=this.parseNodes(t),s={...this.constructor.animationDefaults,direction:"bottom",useGpu:!0,...s};const r=t.map(t=>{const r=o.getStyle(t,"height"),i=o.getStyle(t,"width");return o.setStyle(t,"overflow","hidden"),this.constructor._animate(t,(t,s,a)=>{if(o.setStyle(t,"height",r),o.setStyle(t,"width",i),1===s)return o.setStyle(t,"overflow",""),void(a.useGpu?o.setStyle(t,"transform",""):(o.setStyle(t,"margin-left",""),o.setStyle(t,"margin-top","")));const c=e.isFunction(a.direction)?a.direction():a.direction;let h,l;["top","bottom"].includes(c)?(h="height","top"===c&&(l=a.useGpu?"Y":"margin-top")):(h="width","left"===c&&(l=a.useGpu?"X":"margin-left"));const d=n[`_${h}`](t),u=d*s;if(o.setStyle(t,h,`${u}px`),l){const e=d-u;a.useGpu?o.setStyle(t,"transform",`translate${l}(${e}px)`):o.setStyle(t,l,`${e}px`)}},s)});return this.constructor._start(),Promise.all(r)},squeezeOut(t,s){t=this.parseNodes(t),s={...this.constructor.animationDefaults,direction:"bottom",useGpu:!0,...s};const r=t.map(t=>{const r=o.getStyle(t,"height"),i=o.getStyle(t,"width");return o.setStyle(t,"overflow","hidden"),this.constructor._animate(t,(t,s,a)=>{if(o.setStyle(t,"height",r),o.setStyle(t,"width",i),1===s)return o.setStyle(t,"overflow",""),void(a.useGpu?o.setStyle(t,"transform",""):(o.setStyle(t,"margin-left",""),o.setStyle(t,"margin-top","")));const c=e.isFunction(a.direction)?a.direction():a.direction;let h,l;["top","bottom"].includes(c)?(h="height","top"===c&&(l=a.useGpu?"Y":"margin-top")):(h="width","left"===c&&(l=a.useGpu?"X":"margin-left"));const d=n[`_${h}`](t),u=d-d*s;if(o.setStyle(t,h,`${u}px`),l){const e=d-u;a.useGpu?o.setStyle(t,"transform",`translate${l}(${e}px)`):o.setStyle(t,l,`${e}px`)}},s)});return this.constructor._start(),Promise.all(r)}}),Object.assign(n.prototype,{clearQueue(t){t=this.parseNodes(t);for(const e of t)this.constructor._clearQueue(e)},queue(t,e){t=this.parseNodes(t);for(const s of t)this.constructor._queue(s,e)}}),Object.assign(n.prototype,{getAttribute(t,e){const s=this.parseNode(t);if(s)return this.constructor._getAttribute(s,e)},getDataset(t,e){const s=this.parseNode(t);if(s)return this.constructor._getDataset(s,e)},getHTML(t){return this.getProperty(t,"innerHTML")},getProperty(t,e){const s=this.parseNode(t);if(s)return o.getProperty(s,e)},getText(t){return this.getProperty(t,"innerText")},getValue(t){return this.getProperty(t,"value")},removeAttribute(t,e){t=this.parseNodes(t);for(const s of t)o.removeAttribute(s,e)},removeDataset(t,e){t=this.parseNodes(t);for(const s of t)this.constructor._removeDataset(s,e)},removeProperty(t,e){t=this.parseNodes(t);for(const s of t)o.removeProperty(s,e)},setAttribute(t,e,s){t=this.parseNodes(t);const r=this.constructor._parseData(e,s);for(const e of t)this.constructor._setAttribute(e,r)},setDataset(t,e,s){t=this.parseNodes(t);const r=this.constructor._parseData(e,s,!0);for(const e of t)this.constructor._setDataset(e,r)},setHTML(t,e){this.empty(t),this.setProperty(t,"innerHTML",e)},setProperty(t,e,s){t=this.parseNodes(t);const r=this.constructor._parseData(e,s);for(const e of t)for(const t in r)o.setProperty(e,t,r[t])},setText(t,e){this.empty(t),this.setProperty(t,"innerText",e)},setValue(t,e){this.setProperty(t,"value",e)}}),Object.assign(n.prototype,{cloneData(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0}),e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)for(const t of e)this.constructor._cloneData(s,t)},getData(t,e){const s=this.parseNode(t,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return this.constructor._getData(s,e)},removeData(t,e){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of t)this.constructor._removeData(s,e)},setData(t,e,s){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});const r=this.constructor._parseData(e,s);for(const e of t)this.constructor._setData(e,r)}}),Object.assign(n.prototype,{center(t,e){const s=this.rect(t,e);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(t,e){const s=this.rect(e);if(s){t=this.parseNodes(t);for(const e of t)this.constructor._constrain(e,s)}},distTo(t,s,r,n){const o=this.center(t,n);if(o)return e.dist(o.x,o.y,s,r)},distToNode(t,e){const s=this.center(e);if(s)return this.distTo(t,s.x,s.y)},nearestTo(t,e,s,r){let n=null,o=Number.MAX_VALUE;t=this.parseNodes(t);for(const i of t){const t=this.distTo(i,e,s,r);t&&t<o&&(o=t,n=i)}return n},nearestToNode(t,e){const s=this.center(e);if(s)return this.nearestTo(t,s.x,s.y)},percentX(t,s,r,n=!0){const o=this.rect(t,r);if(!o)return;const i=(s-o.left)/o.width*100;return n?e.clampPercent(i):i},percentY(t,s,r,n=!0){const o=this.rect(t,r);if(!o)return;const i=(s-o.top)/o.height*100;return n?e.clampPercent(i):i},position(t,e){const s=this.parseNode(t);if(s)return this.constructor._position(s,e)},rect(t,e){const s=this.parseNode(t);if(s)return this.constructor._rect(s,e)}}),Object.assign(n.prototype,{getScrollX(t){const s=this.parseNode(t,{document:!0,window:!0});if(s)return e.isWindow(s)?o.getScrollXWindow(s):e.isDocument(s)?this.constructor._getScrollXDocument(s):o.getScrollX(s)},getScrollY(t){const s=this.parseNode(t,{document:!0,window:!0});if(s)return e.isWindow(s)?o.getScrollYWindow(s):e.isDocument(s)?this.constructor._getScrollYDocument(s):o.getScrollY(s)},setScroll(t,s,r){t=this.parseNodes(t,{document:!0,window:!0});for(const n of t)e.isWindow(n)?o.setScrollWindow(n,s,r):e.isDocument(n)?this.constructor._setScrollDocument(n,s,r):this.constructor._setScroll(n,s,r)},setScrollX(t,s){t=this.parseNodes(t,{document:!0,window:!0});for(const r of t)e.isWindow(r)?this.constructor._setScrollXWindow(r,s):e.isDocument(r)?this.constructor._setScrollXDocument(r,s):o.setScrollX(r,s)},setScrollY(t,s){t=this.parseNodes(t,{document:!0,window:!0});for(const r of t)e.isWindow(r)?this.constructor._setScrollYWindow(r,s):e.isDocument(r)?this.constructor._setScrollYDocument(r,s):o.setScrollY(r,s)}}),Object.assign(n.prototype,{height(t,s){const r=this.parseNode(t,{document:!0,window:!0});if(r)return e.isWindow(r)?o.heightWindow(r,e.isUndefined(s)?0:s):(e.isUndefined(s)&&(s=1),e.isDocument(r)?this.constructor._height(o.documentElement(r),s):this.constructor._height(r,s))},width(t,s){const r=this.parseNode(t,{document:!0,window:!0});if(r)return e.isWindow(r)?o.widthWindow(r,e.isUndefined(s)?0:s):(e.isUndefined(s)&&(s=1),e.isDocument(r)?this.constructor._width(o.documentElement(r),s):this.constructor._width(r,s))}}),Object.assign(n.prototype,{addClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)o.addClass(s,...e)},css(t,e){const s=this.parseNode(t);if(s)return this.constructor._css(s,e)},getStyle(t,e){const s=this.parseNode(t);if(s)return this.constructor._getStyle(s,e)},hide(t){this.setStyle(t,"display","none")},removeClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)o.removeClass(s,...e)},setStyle(t,e,s,r){t=this.parseNodes(t);const n=this.constructor._parseData(e,s);for(const e of t)this.constructor._setStyle(e,n,r)},show(t){this.setStyle(t,"display","")},toggle(t){t=this.parseNodes(t);for(const e of t)"none"===o.getStyle(e,"display")?o.setStyle(e,"display",""):o.setStyle(e,"display","none")},toggleClass(t,...e){if(t=this.parseNodes(t),(e=this.constructor._parseClasses(e)).length)for(const s of t)for(const t of e)o.toggleClass(s,t)}}),Object.assign(n.prototype,{mouseDragFactory(s,r,n,o=!0){return r&&o&&(r=e.animation(r),n&&(n=e.animation(n))),e=>{if(s&&!1===s(e))return!1;r&&this.addEvent(t,"mousemove",r),(r||n)&&this.addEvent(t,"mouseup",e=>{r&&this.removeEvent(t,"mousemove",r),n&&n(e)},!1,!0)}}}),Object.assign(n.prototype,{blur(t){const e=this.parseNode(t);e&&o.blur(e)},click(t){const e=this.parseNode(t);e&&o.click(e)},focus(t){const e=this.parseNode(t);e&&o.focus(e)},ready(e){"complete"!==this._context.readyState?this.constructor._addEvent(t,"DOMContentLoaded",e):e()}}),Object.assign(n.prototype,{addEvent(t,e,s,r,n){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0});for(const o of t)for(const t of this.constructor._parseEvents(e))this.constructor._addEvent(o,t,s,r,n)},addEventDelegate(t,e,s,r){this.addEvent(t,e,r,s)},addEventDelegateOnce(t,e,s,r){this.addEvent(t,e,r,s,!0)},addEventOnce(t,e,s){this.addEvent(t,e,s,null,!0)},cloneEvents(t,e){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0}),e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const s of t)for(const t of e)this.constructor._cloneEvents(s,t)},removeEvent(t,e,s,r){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0}),e=!!e&&this.constructor._parseEvents(e);for(const n of t)if(this.constructor._events.has(n))if(e)for(const t of e)this.constructor._removeEvent(n,t,s,r);else this.constructor._removeEvent(n,e,s,r)},removeEventDelegate(t,e,s,r){this.removeEvent(t,e,r,s)},triggerEvent(t,e,s,r){t=this.parseNodes(t,{shadow:!0,document:!0,window:!0}),e=this.constructor._parseEvents(e);for(const n of t)for(const t of e)this.constructor._triggerEvent(n,t,s,r)}}),Object.assign(n.prototype,{attachShadow(t,e=!0){const s=this.parseNode(t);if(s)return o.attachShadow(s,e)},create(t="div",s){const r=o.create(this._context,t);return s?("html"in s?o.setProperty(r,"innerHTML",s.html):"text"in s&&o.setProperty(r,"innerText",s.text),"class"in s&&o.addClass(r,...this.constructor._parseClasses(e.wrap(s.class))),"style"in s&&this.constructor._setStyle(r,s.style),"value"in s&&o.setProperty(r,"value",s.value),"attributes"in s&&this.constructor._setAttribute(r,s.attributes),"properties"in s&&this.constructor._setProperty(r,s.properties),"dataset"in s&&this.constructor._setDataset(r,s.dataset),r):r},createComment(t){return o.createComment(this._context,t)},createFragment(){return o.createFragment(this._context)},createRange(){return o.createRange(this._context)},createText(t){return o.createText(this._context,t)},parseHTML(t){return e.wrap(o.children(this.createRange().createContextualFragment(t)))}}),Object.assign(n.prototype,{clone(t,e=!0,s=!1,r=!1){return(t=this.parseNodes(t,{node:!0,fragment:!0})).map(t=>this.constructor._clone(t,e,s,r))},detach(t){t=this.parseNodes(t,{node:!0});for(const e of t){const t=o.parent(e);t&&o.removeChild(t,e)}return t},empty(t){t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0});for(const e of t)this.constructor._empty(e)},remove(t){t=this.parseNodes(t,{node:!0});for(const e of t){const t=o.parent(e);t&&(this.constructor._remove(e),o.removeChild(t,e))}},replaceAll(t,e){this.replaceWith(e,t)},replaceWith(t,e){t=this.parseNodes(t,{node:!0});const s=(e=this.parseNodes(e,{node:!0,fragment:!0,html:!0})).map(t=>this.constructor._clone(t,!0));for(const e of t)this.constructor._replaceWith(e,s)}}),Object.assign(n.prototype,{after(t,e){const s=this.parseNode(t,{node:!0});if(!s)return;const r=o.parent(s);if(r){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0}).reverse();for(const t of e)o.insertBefore(r,t,o.next(s))}},append(t,e){const s=this.parseNode(t,{fragment:!0,shadow:!0,document:!0});if(s){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});for(const t of e)o.insertBefore(s,t)}},appendTo(t,e){this.append(e,t)},before(t,e){const s=this.parseNode(t,{node:!0});if(!s)return;const r=o.parent(s);if(r){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});for(const t of e)o.insertBefore(r,t,s)}},insertAfter(t,e){this.after(e,t)},insertBefore(t,e){this.before(e,t)},prepend(t,e){const s=this.parseNode(t,{fragment:!0,shadow:!0,document:!0});if(!s)return;const r=o.firstChild(s);e=this.parseNodes(e,{node:!0,fragment:!0,html:!0}).reverse();for(const t of e)o.insertBefore(s,t,r)},prependTo(t,e){this.prepend(e,t)}}),Object.assign(n.prototype,{unwrap(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseFilter(e);for(const s of t)this.constructor._unwrap(s,e)},wrap(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});for(const s of t)this.constructor._wrap(s,e)},wrapAll(t,e){t=this.parseNodes(t,{node:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});const s=this.clone(e,!0);this.constructor._wrapAll(t,s)},wrapInner(t,e){t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),e=this.parseNodes(e,{fragment:!0,html:!0});for(const s of t)this.constructor._wrapInner(s,e)}}),Object.assign(n.prototype,{connected(t){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>o.isConnected(t))},equal(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>o.isEqual(t,e)))},filter(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>!e||e(t,s))},filterOne(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).find((t,s)=>!e||e(t,s))||null},fixed(t){return this.parseNodes(t,{node:!0}).filter(t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position")||this.constructor._parents(t,t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position"),!1,!0).length)},hidden(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).filter(t=>!this.constructor._isVisible(t))},not(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter((t,s)=>e&&!e(t,s))},notOne(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).find((t,s)=>e&&!e(t,s))},same(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).filter(t=>e.some(e=>o.isSame(t,e)))},visible(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).filter(t=>this.constructor._isVisible(t))},withAnimation(t){return this.parseNodes(t).filter(t=>this.constructor._hasAnimation(t))},withAttribute(t,e){return this.parseNodes(t).filter(t=>o.hasAttribute(t,e))},withChildren(t){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).filter(t=>o.hasChildren(t))},withClass(t,...e){return e=this.constructor._parseClasses(e),this.parseNodes(t).filter(t=>e.some(e=>o.hasClass(t,e)))},withCSSAnimation(t){return this.parseNodes(t).filter(t=>this.constructor._hasCSSAnimation(t))},withCSSTransition(t){return this.parseNodes(t).filter(t=>this.constructor._hasCSSTransition(t))},withData(t,e){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(t=>this.constructor._hasData(t,e))},withDescendent(t,e){return e=this.parseFilterContains(e),this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).filter((t,s)=>!e||e(t,s))},withProperty(t,e){return this.parseNodes(t).filter(t=>o.hasProperty(t,e))}}),Object.assign(n.prototype,{find(t,s=this._context){const r=t.match(this.constructor._fastRegExp);if(r)return"#"===r[1]?this.findById(r[2],s):"."===r[1]?this.findByClass(r[2],s):this.findByTag(r[2],s);if(t.match(this.constructor._complexRegExp)){const r=this.constructor._prefixSelectors(t,`#${this.constructor._tempId} `);return e.isElement(s)?this.constructor.__findByCustom(r,s):(s=this.parseNodes(s),this.constructor._findByCustom(r,s))}return e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s)?e.wrap(o.findBySelector(t,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),this.constructor._findBySelector(t,s))},findByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return e.wrap(o.findByClass(t,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const r=[];for(const n of s)e.merge(r,o.findByClass(t,n));return s.length>1&&r.length>1?e.unique(r):r},findById(t,e=this._context){const s=this.findOneById(t,e);return s?[s]:[]},findByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return e.wrap(o.findByTag(t,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const r=[];for(const n of s)e.merge(r,o.findByTag(t,n));return s.length>1&&r.length>1?e.unique(r):r},findOne(t,s=this._context){const r=t.match(this.constructor._fastRegExp);if(r)return"#"===r[1]?this.findOneById(r[2],s):"."===r[1]?this.findOneByClass(r[2],s):this.findOneByTag(r[2],s);if(t.match(this.constructor._complexRegExp)){const r=this.constructor._prefixSelectors(t,`#${this.constructor._tempId} `);return e.isElement(s)?this.constructor.__findOneByCustom(r,s):(s=this.parseNodes(s),this.constructor._findOneByCustom(r,s))}return e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s)?o.findOneBySelector(t,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),this.constructor._findOneBySelector(t,s))},findOneByClass(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return o.findByClass(t,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const e of s){const s=o.findByClass(t,e).item(0);if(s)return s}return null},findOneById(t,s=this._context){const r=o.findById(t,this._context);return r?e.isDocument(s)?r:e.isElement(s)?o.contains(s,r)?r:null:(s=this.parseNodes(s)).some(t=>o.contains(t,r))?r:null:null},findOneByTag(t,s=this._context){if(e.isDocument(s)||e.isElement(s)||e.isFragment(s)||e.isShadow(s))return o.findByTag(t,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const e of s){const s=o.findByTag(t,e).item(0);if(s)return s}return null}}),Object.assign(n.prototype,{child(t,e){return this.children(t,e,!0)},children(t,s,r=!1,n=!0){if(s=this.parseFilter(s),e.isElement(t)||e.isDocument(t)||e.isFragment(t)||e.isShadow(t))return this.constructor._children(t,s,r,n);t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0});const o=[];for(const i of t)e.merge(o,this.constructor._children(i,s,r,n));return t.length>1&&o.length>1?e.unique(o):o},closest(t,e,s){return this.parents(t,e,s,!0)},commonAncestor(t){if(!(t=this.sort(t)).length)return;const e=this.createRange();return 1===t.length?o.select(e,t.shift()):(o.setStartBefore(e,t.shift()),o.setEndAfter(e,t.pop())),e.commonAncestorContainer},contents(t){return this.children(t,!1,!1,!1)},fragment(t){const e=this.parseNode(t);if(e)return o.fragment(e)},next(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._next(t,s);t=this.parseNodes(t,{node:!0});const r=[];for(const n of t)e.merge(r,this.constructor._next(n,s));return t.length>1&&r.length>1?e.unique(r):r},nextAll(t,s,r,n=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),e.isNode(t))return this.constructor._nextAll(t,s,r,n);t=this.parseNodes(t,{node:!0});const o=[];for(const i of t)e.merge(o,this.constructor._nextAll(i,s,r,n));return t.length>1&&o.length>1?e.unique(o):o},offsetParent(t){return this.forceShow(t,t=>o.offsetParent(t))},parent(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._parent(t,s);t=this.parseNodes(t,{node:!0});const r=[];for(const n of t)e.merge(r,this.constructor._parent(n,s));return t.length>1&&r.length>1?e.unique(r):r},parents(t,s,r,n=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),e.isNode(t))return this.constructor._parents(t,s,r,n);t=this.parseNodes(t,{node:!0});const o=[];for(const i of t)e.merge(o,this.constructor._parents(i,s,r,n));return t.length>1&&o.length>1?e.unique(o):o},prev(t,s){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._prev(t,s);t=this.parseNodes(t,{node:!0});const r=[];for(const n of t)e.merge(r,this.constructor._prev(n,s));return t.length>1&&r.length>1?e.unique(r):r},prevAll(t,s,r,n=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),e.isNode(t))return this.constructor._prevAll(t,s,r,n);t=this.parseNodes(t,{node:!0});const o=[];for(const i of t)e.merge(o,this.constructor._prevAll(i,s,r,n));return t.length>1&&o.length?e.unique(o):o},shadow(t){const e=this.parseNode(t);if(e)return o.shadow(e)},siblings(t,s,r=!0){if(s=this.parseFilter(s),e.isNode(t))return this.constructor._siblings(t,s,r);t=this.parseNodes(t,{node:!0});const n=[];for(const o of t)e.merge(n,this.constructor._siblings(o,s,r));return t.length>1&&n.length>1?e.unique(n):n}}),Object.assign(n.prototype,{parseFilter(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?e=>o.is(e,t):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>o.isSame(e,t):!!(t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.includes(e)))},parseFilterContains(t){return!!t&&(e.isFunction(t)?t:e.isString(t)?e=>!!this.findOne(t,e):e.isNode(t)||e.isFragment(t)||e.isShadow(t)?e=>o.contains(e,t):!!(t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0})).length&&(e=>t.some(t=>o.contains(e,t))))},parseNode(t,s={}){if(e.isString(t)){if("html"in s&&s.html&&"<"===t.trim().charAt(0))return this.parseHTML(t).shift();const e=this.findOne(t,"context"in s?s.context:this._context);return e||null}const r=this.constructor.parseNodesFactory(s);if(r(t))return t;const n=e.wrap(t).slice().shift();return n&&r(n)?n:null},parseNodes(t,s={}){if(e.isString(t))return"html"in s&&s.html&&"<"===t.trim().charAt(0)?this.parseHTML(t):this.find(t,"context"in s?s.context:this._context);const r=this.constructor.parseNodesFactory(s);return r(t)?[t]:e.wrap(t).filter(r)}}),Object.assign(n.prototype,{afterSelection(t){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});const e=o.getSelection();if(!o.rangeCount(e))return;const s=o.getRange(e);o.removeRanges(e),o.collapse(s);for(const e of t)o.insert(s,e)},beforeSelection(t){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});const e=o.getSelection();if(!o.rangeCount(e))return;const s=o.getRange(e);o.removeRanges(e);for(const e of t)o.insert(s,e)},extractSelection(){const t=o.getSelection();if(!o.rangeCount(t))return[];const s=o.getRange(t);o.removeRanges(t);const r=o.extract(s);return e.wrap(o.childNodes(r))},getSelection(){const t=o.getSelection();if(!o.rangeCount(t))return[];const s=o.getRange(t),r=e.wrap(o.findBySelector("*",s.commonAncestorContainer));if(!r.length)return[s.commonAncestorContainer];if(1===r.length)return r;const n=o.startContainer(s),i=o.endContainer(s),a=e.isElement(n)?n:o.parent(n),c=e.isElement(i)?i:o.parent(i);return r.slice(r.indexOf(a),r.indexOf(c)+1)},select(t){const e=this.parseNode(t,{node:!0,fragment:!0,shadow:!0});if(e&&"select"in e)return e.select();const s=o.getSelection();if(o.rangeCount(s)>0&&o.removeRanges(s),!e)return;const r=this.createRange();o.select(r,e),o.addRange(s,r)},selectAll(t){t=this.sort(t);const e=o.getSelection();if(o.rangeCount(e)&&o.removeRanges(e),!t.length)return;const s=this.createRange();1==t.length?o.select(s,t.shift()):(o.setStartBefore(s,t.shift()),o.setEndAfter(s,t.pop())),o.addRange(e,s)},wrapSelection(t){t=this.parseNodes(t,{fragment:!0,html:!0});const s=o.getSelection();if(!o.rangeCount(s))return;const r=o.getRange(s);o.removeRanges(s);const n=o.extract(r),i=this.constructor._deepest(t.slice().shift()),a=e.wrap(o.childNodes(n));for(const t of a)o.insertBefore(i,t);for(const e of t)o.insert(r,e)}}),Object.assign(n.prototype,{hasAnimation(t){return this.parseNodes(t).some(t=>this.constructor._hasAnimation(t))},hasAttribute(t,e){return this.parseNodes(t).some(t=>o.hasAttribute(t,e))},hasChildren(t){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).some(t=>o.hasChildren(t))},hasClass(t,...e){return e=this.constructor._parseClasses(e),this.parseNodes(t).some(t=>e.some(e=>o.hasClass(t,e)))},hasCSSAnimation(t){return this.parseNodes(t).some(t=>this.constructor._hasCSSAnimation(t))},hasCSSTransition(t){return this.parseNodes(t).some(t=>this.constructor._hasCSSTransition(t))},hasData(t,e){return this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0}).some(t=>this.constructor._hasData(t,e))},hasDescendent(t,e){return e=this.parseFilterContains(e),this.parseNodes(t,{fragment:!0,shadow:!0,document:!0}).some(t=>!e||e(t))},hasFragment(t){return this.parseNodes(t).some(t=>this.constructor._hasFragment(t))},hasProperty(t,e){return this.parseNodes(t).some(t=>o.hasProperty(t,e))},hasShadow(t){return this.parseNodes(t).some(t=>this.constructor._hasShadow(t))},is(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>!e||e(t))},isConnected(t){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>o.isConnected(t))},isEqual(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>o.isEqual(t,e)))},isFixed(t){return this.parseNodes(t,{node:!0}).some(t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position")||this.constructor._parents(t,t=>e.isElement(t)&&"fixed"===this.constructor._css(t,"position"),!1,!0).length)},isHidden(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).some(t=>!this.constructor._isVisible(t))},isSame(t,e){return e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).some(t=>e.some(e=>o.isSame(t,e)))},isVisible(t){return this.parseNodes(t,{node:!0,document:!0,window:!0}).some(t=>this.constructor._isVisible(t))}}),Object.assign(n.prototype,{exec(t,e=null){return this._context.execCommand(t,!1,e)},forceShow(t,e){const s=this.parseNode(t,{node:!0,document:!0,window:!0});if(s)return this.constructor._forceShow(s,e)},index(t){const s=this.parseNode(t,{node:!0});if(s)return e.wrap(o.children(o.parent(s))).indexOf(s)},indexOf(t,e){return e=this.parseFilter(e),this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).findIndex(t=>!e||e(t))},normalize(t){t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0,document:!0});for(const e of t)o.normalize(e)},sanitize(t,e=n.allowedTags){const s=this.create("template",{html:t}),r=o.fragment(s),i=o.children(r);for(const t of i)this.constructor._sanitize(t,r,e);return this.getHTML(s)},serialize(t){return r._parseParams(this.serializeArray(t))},serializeArray(t){return this.parseNodes(t,{fragment:!0,shadow:!0}).reduce((t,s)=>{if(o.is(s,"form")||e.isFragment(s)||e.isShadow(s))return t.concat(this.serializeArray(o.findBySelector("input, select, textarea",s)));if(o.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return t;const r=o.getAttribute(s,"name");if(!r)return t;const n=o.getAttribute(s,"value")||"";return t.push({name:r,value:n}),t},[])},sort(t){return this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}).sort((t,e)=>{if(o.isSame(t,e))return 0;const s=o.comparePosition(t,e);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})},tagName(t){const e=this.parseNode(t);if(e)return o.tagName(e)}}),Object.assign(n,{_animate(t,s,r){n._hasAnimation(t)||this._animations.set(t,[]);const o=performance.now();return new Promise((n,i)=>{this._animations.get(t).push((a=!1,c=!1)=>{if(a&&!c)return i(t),!0;let h;return c?h=1:(h=(performance.now()-o)/r.duration,r.infinite?h%=1:h=e.clamp(h),"ease-in"===r.type?h=Math.pow(h,2):"ease-out"===r.type?h=Math.sqrt(h):"ease-in-out"===r.type&&(h=h<=.5?2*Math.pow(h,2):1-(1-h)**2*2)),s(t,h,r),1===h?(n(t),!0):void 0})})},_animationFrame(){for(let[t,e]of this._animations)e=e.filter(t=>!t()),e.length?this._animations.set(t,e):this._animations.delete(t);this._animations.size?t.requestAnimationFrame(t=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(t,e=!0){if(!n._hasAnimation(t))return;const s=this._animations.get(t);for(const t of s)t(!0,e);this._animations.delete(t)}}),Object.assign(n,{_clearQueue(t){this._queues.has(t)&&this._queues.delete(t)},_dequeueNode(t){if(!this._queues.has(t))return;const e=this._queues.get(t).shift();e?Promise.resolve(e(t)).finally(e=>this._dequeueNode(t)):this._queues.delete(t)},_queue(t,e){const s=!this._queues.has(t);s&&this._queues.set(t,[]),this._queues.get(t).push(e),s&&this._dequeueNode(t)}}),Object.assign(n,{_getAttribute(t,e){if(e)return o.getAttribute(t,e);const s=o.attributes(t),r={};for(const t of s)r[t.nodeName]=t.nodeValue;return r},_getDataset(t,s){if(s)return s=e.camelCase(s),n._parseDataset(o.getDataset(t,s));const r=o.dataset(t),i={};for(const t in r)i[t]=n._parseDataset(r[t]);return i},_removeDataset(t,s){s=e.camelCase(s),o.removeDataset(t,s)},_setAttribute(t,e){for(const s in e)o.setAttribute(t,s,e[s])},_setDataset(t,s){for(const r in s){const n=e.camelCase(r);o.setDataset(t,n,s[r])}}}),Object.assign(n,{_cloneData(t,e){this._data.has(t)&&this._setData(e,{...this._data.get(t)})},_getData(t,e){if(this._data.has(t))return e?this._data.get(t)[e]:this._data.get(t)},_removeData(t,e){if(this._data.has(t)){if(e){const s=this._data.get(t);if(delete s[e],Object.keys(s).length)return}this._data.delete(t)}},_setData(t,e){this._data.has(t)||this._data.set(t,{}),Object.assign(this._data.get(t),e)}}),Object.assign(n,{_constrain(t,e){const s=this._rect(t),r={};let n,o;if(s.height>e.height&&(r.height=e.height),s.width>e.width&&(r.width=e.width),s.left-e.left<0?n=s.left-e.left:s.right-e.right>0&&(n=s.right-e.right),n){const e=this._css(t,"left"),s=e&&"auto"!==e?parseFloat(e):0;r.left=`${s-n}px`}if(s.top-e.top<0?o=s.top-e.top:s.bottom-e.bottom>0&&(o=s.bottom-e.bottom),o){const e=this._css(t,"top"),s=e&&"auto"!==e?parseFloat(e):0;r.top=`${s-o}px`}"static"===this._css(t,"position")&&(r.position="relative"),this._setStyle(t,r)},_position(t,e){return this._forceShow(t,t=>{const s={x:o.offsetLeft(t),y:o.offsetTop(t)};if(e){let e=t;for(;e=o.offsetParent(e);)s.x+=o.offsetLeft(e),s.y+=o.offsetTop(e)}return s})},_rect(e,s){return this._forceShow(e,e=>{const r=o.rect(e);return s&&(r.x+=o.getScrollXWindow(t),r.y+=o.getScrollYWindow(t)),r})}}),Object.assign(n,{_getScrollXDocument:t=>o.getScrollX(o.scrollingElement(t)),_getScrollYDocument:t=>o.getScrollY(o.scrollingElement(t)),_setScroll(t,e,s){o.setScrollX(t,e),o.setScrollY(t,s)},_setScrollDocument(t,e,s){return this._setScroll(o.scrollingElement(t),e,s)},_setScrollXDocument:(t,e)=>o.setScrollX(o.scrollingElement(t),e),_setScrollXWindow:(t,e)=>o.setScrollWindow(t,e,o.getScrollYWindow(t)),_setScrollYDocument:(t,e)=>o.setScrollY(o.scrollingElement(t),e),_setScrollYWindow:(t,e)=>o.setScrollWindow(t,o.getScrollXWindow(t),e)}),Object.assign(n,{_height(t,e=1){return this._forceShow(t,t=>{let s=o.height(t);return e===this.INNER&&(s-=parseInt(this._css(t,"padding-top"))+parseInt(this._css(t,"padding-bottom"))),e>=this.OUTER&&(s+=parseInt(this._css(t,"border-top-width"))+parseInt(this._css(t,"border-bottom-width"))),e===this.OUTER_MARGIN&&(s+=parseInt(this._css(t,"margin-top"))+parseInt(this._css(t,"margin-bottom"))),s})},_width(t,e=1){return this._forceShow(t,t=>{let s=o.width(t);return e===this.INNER&&(s-=parseInt(this._css(t,"padding-left"))+parseInt(this._css(t,"padding-right"))),e>=this.OUTER&&(s+=parseInt(this._css(t,"border-left-width"))+parseInt(this._css(t,"border-right-width"))),e===this.OUTER_MARGIN&&(s+=parseInt(this._css(t,"margin-left"))+parseInt(this._css(t,"margin-right"))),s})}}),Object.assign(n,{_css(t,s){return this._styles.has(t)||this._styles.set(t,o.css(t)),s?(s=e.kebabCase(s),this._styles.get(t).getPropertyValue(s)):{...this._styles.get(t)}},_getStyle(t,s){if(s)return s=e.kebabCase(s),o.getStyle(t,s);const r=o.style(t),n={};for(const e of r)n[e]=o.getStyle(t,e);return n},_setStyle(t,s,r){for(let n in s){let i=s[n];n=e.kebabCase(n),i&&e.isNumeric(i)&&!this.cssNumberProperties.includes(n)&&(i+="px"),o.setStyle(t,n,i,r)}}}),Object.assign(n,{_delegateFactory(t,s,r){const i=s.match(n._complexRegExp)?this._getDelegateContainsFactory(t,s):this._getDelegateMatchFactory(t,s);return s=>{if(o.isSame(s.target,t))return;const n=i(s.target);if(!n)return;const a={};for(const t in s)a[t]=e.isFunction(s[t])?(...e)=>s[t](...e):s[t];return a.currentTarget=n,a.delegateTarget=t,a.originalEvent=s,Object.freeze(a),r(a)}},_getDelegateContainsFactory(t,e){return e=n._prefixSelectors(selectors,`#${n._tempId}`),s=>{const r=this.__findByCustom(e,t);return!!r.length&&(r.includes(s)?s:this._parents(s,t=>r.includes(t),e=>o.isSame(t,e),!0).shift())}},_getDelegateMatchFactory(t,e){return s=>o.is(s,e)?s:this._parents(s,t=>o.is(t,e),e=>o.isSame(t,e),!0).shift()},_namespaceFactory:(t,e)=>s=>{if(!("namespaceRegExp"in s)||s.namespaceRegExp.test(t))return e(s)},_selfDestructFactory(t,e,s,r){return n=>(s?this._removeEvent(t,e,r,s):this._removeEvent(t,e,r),r(n))}}),Object.assign(n,{_addEvent(t,e,s,r,n){this._events.has(t)||this._events.set(t,{});const i=this._events.get(t),a={delegate:r,callback:s,selfDestruct:n},c=this._parseEvent(e);let h=s;if(n&&(h=this._selfDestructFactory(t,e,r,h)),r&&(h=this._delegateFactory(t,r,h)),e!==c&&(h=this._namespaceFactory(e,h)),a.realCallback=h,a.event=e,a.realEvent=c,i[c]){if(i[c].includes(a))return}else i[c]=[];i[c].push(a),o.addEvent(t,c,h)},_cloneEvents(t,e){if(!this._events.has(t))return;const s=this._events.get(t);for(const t in s)for(const r of s[t])this._addEvent(e,r.event,r.callback,r.delegate,r.selfDestruct)},_removeEvent(t,e,s,r){if(!this._events.has(t))return;const i=this._events.get(t);if(!e){const e=Object.keys(i);for(const n of e)this._removeEvent(t,n,s,r);return}const a=this._parseEvent(e);i[a]&&(i[a]=i[a].filter(i=>{if(r&&r!==i.delegate||s&&s!==i.callback)return!0;if(a!==e){const t=n._eventNamespacedRegExp(e);if(!i.event.match(t))return!0}return o.removeEvent(t,i.realEvent,i.realCallback),!1}),i[a].length||delete i[a],Object.keys(i).length||this._events.delete(t))},_triggerEvent(t,e,s,r){const i=n._parseEvent(e),a={...s};return i!==e&&(a.namespace=e.substring(i.length+1),a.namespaceRegExp=n._eventNamespacedRegExp(e)),o.triggerEvent(t,i,a,r)}}),Object.assign(n,{_eventNamespacedRegExp:t=>new RegExp(`^${e.escapeRegExp(t)}(?:\\.|$)`,"i"),_parseClasses:t=>t.flat().flatMap(t=>t.split(" ")),_parseData(t,s,r=!1){const n=e.isObject(t)?t:{[t]:s},o={};for(const t in n){const s=n[t];o[t]=r&&(e.isObject(s)||e.isArray(s))?JSON.stringify(s):s}return o},_parseDataset(t){if(e.isUndefined(t))return t;const s=t.toLowerCase().trim();if(["true","on"].includes(s))return!0;if(["false","off"].includes(s))return!1;if("null"===s)return null;if(e.isNumeric(s))return parseFloat(s);if(["{","["].includes(s.charAt(0)))try{return JSON.parse(t)}catch(t){}return t},_parseEvent:t=>t.split(".").shift(),_parseEvents:t=>t.split(" "),_prefixSelectors(t,e){return t.split(this._splitRegExp).filter(t=>!!t).map(t=>`${e} ${t}`)}}),Object.assign(n,{_clone(t,e=!0,s=!1,r=!1){const n=o.clone(t,e);return s||r?(s&&this._cloneEvents(t,n),r&&this._cloneData(t,n),e&&this._deepClone(t,n,s,r),n):n},_deepClone(t,s,r=!1,n=!1){const i=e.wrap(o.childNodes(t)),a=e.wrap(o.childNodes(s));for(let t=0;t<i.length;t++)r&&this._cloneEvents(i[t],a[t]),n&&this._cloneData(i[t],a[t]),this._deepClone(i[t],a[t])},_detach(t){const e=o.parent(t);e||o.removeChild(e,t)},_empty(t){const s=e.wrap(o.childNodes(t));for(const e of s)this._remove(e),o.removeChild(t,e);if(this._hasShadow(t)){const e=o.shadow(t);this._remove(e)}if(this._hasFragment(t)){const e=o.fragment(t);this._remove(e)}},_remove(t){o.triggerEvent(t,"remove"),this._empty(t),e.isElement(t)&&(this._clearQueue(t),this._stop(t),this._styles.has(t)&&this._styles.delete(t)),this._removeEvent(t),this._removeData(t)},_replaceWith(t,e){const s=o.parent(t);if(s){for(const r of e){const e=this._clone(r,!0);o.insertBefore(s,e,t)}this._remove(t),o.removeChild(s,t)}}}),Object.assign(n,{_unwrap(t,s){const r=o.parent(t,s);if(!r)return;const n=o.parent(r);if(!r)return;const i=e.wrap(o.childNodes(r));for(const t of i)o.insertBefore(n,t,r);this._remove(r),o.removeChild(n,r)},_wrap(t,e){const s=o.parent(t);if(!s)return;const r=e.map(t=>this._clone(t,!0));for(const e of r)o.insertBefore(s,e,t);const n=this._deepest(r.shift());o.insertBefore(n,t)},_wrapAll(t,e){const s=t.slice().shift();if(!s)return;const r=o.parent(s);if(!r)return;for(const t of e)o.insertBefore(r,t,s);const i=n._deepest(e.shift());for(const e of t)o.insertBefore(i,e)},_wrapInner(t,s){const r=e.wrap(o.childNodes(t)),n=s.map(t=>this._clone(t,!0));for(const e of n)o.insertBefore(t,e);const i=this._deepest(n.shift());for(const t of r)o.insertBefore(i,t)}}),Object.assign(n,{parseHTML:t=>(new DOMParser).parseFromString(t,"text/html"),parseXML:t=>(new DOMParser).parseFromString(t,"application/xml")}),Object.assign(n,{_findByCustom(t,s=this._context){const r=[];for(const n of s)e.merge(r,this.__findByCustom(t,n));return s.length>1&&r.length>1?e.unique(r):r},_findBySelector(t,s){const r=[];for(const n of s)e.merge(r,o.findBySelector(t,n));return s.length>1&&r.length>1?e.unique(r):r},_findOneByCustom(t,e){for(const s of e){const e=this.__findOneByCustom(t,s);if(e)return e}return null},_findOneBySelector(t,e){for(const s of e){const e=o.findOneBySelector(t,s);if(e)return e}return null},__findByCustom(t,s){const r=o.getAttribute(s,"id");o.setAttribute(s,"id",this._tempId);const n=o.parent(s),i=[];for(const s of t)e.merge(i,o.findBySelector(s,n));return r?o.setAttribute(s,"id",r):o.removeAttribute(s,"id"),t.length>1&&i.length>1?e.unique(i):i},__findOneByCustom(t,e){const s=o.getAttribute(e,"id");o.setAttribute(e,"id",this._tempId);const r=o.parent(e);if(!r)return null;let n=null;for(const e of t)if(n=o.findOneBySelector(e,r),n)break;return s?o.setAttribute(e,"id",s):o.removeAttribute(e,"id"),n}}),Object.assign(n,{_children(t,s,r=!1,n=!1){const i=e.wrap(n?o.children(t):o.childNodes(t)),a=[];let c;for(c of i)if((!s||s(c))&&(a.push(c),r))break;return a},_deepest:t=>e.wrap(o.findBySelector("*",t)).find(t=>!o.hasChildren(t))||t,_next(t,e){const s=[];return(t=o.next(t))?(e&&!e(t)||s.push(t),s):s},_nextAll(t,e,s,r=!1){const n=[];for(;(t=o.next(t))&&(!s||!s(t))&&(e&&!e(t)||(n.push(t),!r)););return n},_parent(t,e){const s=[],r=o.parent(t);return r?(e&&!e(r)||s.push(r),s):s},_parents(t,s,r,n=!1){const i=[];for(;(t=o.parent(t))&&!e.isDocument(t)&&(!r||!r(t))&&(s&&!s(t)||(i.push(t),!n)););return i},_prev(t,e){const s=[];return(t=o.prev(t))?(e&&!e(t)||s.push(t),s):s},_prevAll(t,e,s,r=!1){const n=[];for(;(t=o.prev(t))&&(!s||!s(t))&&(e&&!e(t)||(n.push(t),!r)););return n},_siblings(t,e,s=!0){const r=[],n=o.parent(t);if(!n)return r;const i=s?n.children:n.childNodes;let a;for(a of i)o.isSame(t,a)||e&&!e(a)||r.push(a);return r}}),Object.assign(n,{parseNodesFactory:t=>t?s=>(t.node?e.isNode(s):e.isElement(s))||t.fragment&&e.isFragment(s)||t.shadow&&e.isShadow(s)||t.document&&e.isDocument(s)||t.window&&e.isWindow(s):e.isElement}),Object.assign(n,{_hasAnimation(t){return this._animations.has(t)},_hasCSSAnimation(t){return!!parseFloat(this._css(t,"animation-duration"))},_hasCSSTransition(t){return!!parseFloat(this._css(t,"transition-duration"))},_hasData(t,e){return this._data.has(t)&&(!e||this._data.get(t).hasOwnProperty(e))},_hasFragment:t=>!!o.fragment(t),_hasShadow:t=>!!o.shadow(t),_isVisible:t=>e.isWindow(t)?o._isVisibleDocument(o.document(t)):e.isDocument(t)?o.isVisibleDocument(t):!!o.offsetParent(t)}),Object.assign(n,{_forceShow(t,s){if(e.isDocument(t)||e.isWindow(t)||this._isVisible(t))return s(t);const r=[];e.isElement(t)&&"none"===this._css(t,"display")&&r.push(t),e.merge(r,this._parents(t,t=>e.isElement(t)&&"none"===this._css(t,"display")));const n=new Map;for(const t of r)n.set(t,o.getAttribute(t,"style")),o.setStyle(t,"display","initial",!0);const i=s(t);for(const[t,e]of n)e?o.setAttribute(t,"style",e):o.removeAttribute(t,"style");return i},_sanitize(t,e,s=this.allowedTags){const r=this._tagName(t);if(!(r in s))return void o.removeChild(e,t);const n=[...s["*"],...s[r]],i=this._getAttribute(t);for(const e in i){!!n.find(t=>e.match(t))||o.removeAttribute(t,e)}const a=o.children(t);for(const e of a)this._sanitize(e,t,s)},_tagName:t=>o.tagName(t).toLowerCase()}),Object.assign(n,{_animating:!1,_animations:new Map,_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,allowedTags:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],INNER:0,OUTER:2,OUTER_MARGIN:3,_complexRegExp:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,_fastRegExp:/^([\#\.]?)([\w\-]+)$/,_splitRegExp:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,_tempId:`frost${Date.now().toString(16)}`});class o{}return Object.assign(o,{attributes:t=>t.attributes,dataset:t=>t.dataset,getAttribute:(t,e)=>t.getAttribute(e),getDataset(t,e){return this.dataset(t)[e]},getProperty:(t,e)=>t[e],removeAttribute(t,e){t.removeAttribute(e)},removeDataset(t,e){delete t.dataset[e]},removeProperty(t,e){delete t[e]},setAttribute(t,e,s){t.setAttribute(e,s)},setDataset(t,e,s){this.dataset(t)[e]=s},setProperty(t,e,s){t[e]=s}}),Object.assign(o,{offsetLeft:t=>t.offsetLeft,offsetTop:t=>t.offsetTop,rect:t=>t.getBoundingClientRect()}),Object.assign(o,{getScrollX:t=>t.scrollLeft,getScrollXWindow:t=>t.scrollX,getScrollY:t=>t.scrollTop,getScrollYWindow:t=>t.scrollY,setScrollWindow:(t,e,s)=>t.scroll(e,s),setScrollX(t,e){t.scrollLeft=e},setScrollY(t,e){t.scrollTop=e}}),Object.assign(o,{height:t=>t.clientHeight,heightWindow:(t,e)=>e?t.outerHeight:t.innerHeight,width:t=>t.clientWidth,widthWindow:(t,e)=>e?t.outerWidth:t.innerWidth}),Object.assign(o,{addClass(t,...e){t.classList.add(...e)},css:e=>t.getComputedStyle(e),getStyle(t,e){return this.style(t)[e]},removeClass(t,...e){t.classList.remove(...e)},setStyle(t,e,s,r){t.style.setProperty(e,s,r?"important":"")},style:t=>t.style,toggleClass(t,...e){t.classList.toggle(...e)}}),Object.assign(o,{blur(t){t.blur()},click(t){t.click()},focus(t){t.focus()}}),Object.assign(o,{addEvent(t,e,s){t.addEventListener(e,s)},removeEvent(t,e,s){t.removeEventListener(e,s)},triggerEvent(t,e,s,r){const n=new Event(e,{bubbles:!0,cancelable:!0,...r});return s&&Object.assign(n,s),t.dispatchEvent(n)}}),Object.assign(o,{attachShadow:(t,e=!0)=>t.attachShadow({mode:e?"open":"closed"}),clone:(t,e)=>t.cloneNode(e),create:(t,e)=>t.createElement(e),createComment:(t,e)=>t.createCommentNode(e),createFragment:t=>t.createDocumentFragment(),createRange:t=>t.createRange(),createText:(t,e)=>t.createTextNode(e)}),Object.assign(o,{removeChild(t,e){t.removeChild(e)}}),Object.assign(o,{insertBefore(t,e,s=null){t.insertBefore(e,s)}}),Object.assign(o,{findByClass:(t,e)=>e.getElementsByClassName(t),findById:(t,e)=>e.getElementById(t),findByTag:(t,e)=>e.getElementsByTagName(t),findBySelector:(t,e)=>e.querySelectorAll(t),findOneBySelector:(t,e)=>e.querySelector(t)}),Object.assign(o,{childNodes:t=>t.childNodes,children:t=>t.children,document:t=>t.document,documentElement:t=>t.documentElement,firstChild:t=>t.firstChild,fragment:t=>t.content,next:t=>t.nextSibling,offsetParent:t=>t.offsetParent,parent:t=>t.parentNode,prev:t=>t.previousSibling,scrollingElement:t=>t.scrollingElement,shadow:t=>t.shadowRoot}),Object.assign(o,{addRange(t,e){t.addRange(e)},collapse(t){t.collapse()},endContainer:t=>t.endContainer,extract:t=>t.extractContents(),getRange:(t,e=0)=>t.getRangeAt(e),getSelection:()=>t.getSelection(),insert(t,e){t.insertNode(e)},rangeCount:t=>t.rangeCount,removeRanges(t){t.removeAllRanges()},select(t,e){t.selectNode(e)},setEndAfter(t,e){t.setEndAfter(e)},setStartBefore(t,e){t.setStartBefore(e)},startContainer:t=>t.startContainer}),Object.assign(o,{contains:(t,e)=>t.contains(e),hasAttribute:(t,e)=>t.hasAttribute(e),hasChildren:t=>!!t.childElementCount,hasClass:(t,e)=>t.classList.contains(e),hasProperty:(t,e)=>t.hasOwnProperty(e),is:(t,s)=>e.isElement(t)&&t.matches(s),isConnected:t=>t.isConnected,isEqual:(t,e)=>t.isEqualNode(e),isSame:(t,e)=>t.isSameNode(e),isVisibleDocument:t=>"visible"===t.visibilityState}),Object.assign(o,{comparePosition:(t,e)=>t.compareDocumentPosition(e),normalize(t){t.normalize()},tagName:t=>t.tagName}),{AjaxRequest:r,DOM:n,DOMNode:o,dom:new n}}));