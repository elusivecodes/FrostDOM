!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t:Object.assign(e,t(e))}(this,function(e){"use strict";if(!e)throw new Error("FrostDOM requires a Window.");if(!("Core"in e))throw new Error("FrostDOM requires FrostCore.");const t=e.Core,s=e.document;class n{constructor(e=s){this._context=e}}Object.assign(n.prototype,{ajax(t){t={url:e.location,headers:{},...n.ajaxDefaults,...t};const s=n.localRegex.test(location.protocol);if(!t.cache){const e=new URL(t.url);e.searchParams.append("_",Date.now()),t.url=e.toString()}return"Content-Type"in t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=t.contentType),s||"X-Requested-With"in t.headers||(t.headers["X-Requested-With"]="XMLHttpRequest"),new Promise((e,r)=>{const o=new XMLHttpRequest;o.open(t.method,t.url,!0);for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);t.responseType&&(o.responseType=t.responseType),o.onload=(t=>{o.status>400?r({status:o.status,xhr:o,event:t}):e({response:o.response,xhr:o,event:t})}),s||(o.onerror=(e=>r({status:o.status,xhr:o,event:e}))),t.uploadProgress&&(o.upload.onprogress=(e=>t.uploadProgress(e.loaded/e.total,o,e))),t.beforeSend&&t.beforeSend(o),t.data&&t.processData&&("application/json"===t.contentType?t.data=JSON.stringify(t.data):"application/x-www-form-urlencoded"===t.contentType?t.data=n._parseParams(t.data):t.data=n._parseFormData(t.data)),o.send(t.data)})},get(e,t){return this.ajax({url:e,...t})},post(e,t,s){return this.ajax({url:e,data:t,method:"POST",...s})},upload(e,t,s){return this.ajax({url:e,data:t,method:"POST",contentType:!1,...s})}}),Object.assign(n.prototype,{loadScript(t,s=!0){return this.ajax({url:t,cache:s}).then(t=>eval.call(e,t.response))},loadScripts(t,s=!0){return Promise.all(t.map(e=>this.ajax({url:e,cache:s}))).then(t=>{for(const s of t)eval.call(e,s.response)})}}),Object.assign(n.prototype,{loadStyle(e,t=!0){return this.ajax({url:e,cache:t}).then(e=>r.insertBefore(this._context.head,this.create("style",{html:e.response})))},loadStyles(e,t=!0){return Promise.all(e.map(e=>this.ajax({url:e,cache:t}))).then(e=>{for(const t of e)r.insertBefore(this._context.head,this.create("style",{html:t.response}))})}}),Object.assign(n.prototype,{getCookie(e,t=!1){const s=decodeURIComponent(this._context.cookie).split(";").find(t=>t.trimStart().substring(0,e.length)===e);if(!s)return null;const n=s.trimStart().substring(e.length+1);return t?JSON.parse(n):n},removeCookie(e,t){this.setCookie(e,"",{expires:-1,...t})},setCookie(e,t,s,n=!1){if(!e)return;n&&(t=JSON.stringify(t));let r=`${e}=${t}`;if(s){if(s.expires){let e=new Date;e.setTime(e.getTime()+1e3*s.expires),r+=`;expires=${e.toUTCString()}`}s.path&&(r+=`;path=${s.path}`),s.secure&&(r+=";secure")}this._context.cookie=r}}),Object.assign(n.prototype,{animate(e,t,s){e=this.parseNodes(e),s={...n.animationDefaults,...s};const r=e.map(e=>n._animate(e,t,s));return n._start(),Promise.all(r)},stop(e,t=!0){e=this.parseNodes(e);for(const s of e)n._stop(s,t)}}),Object.assign(n.prototype,{dropIn(e,t){return this.slideIn(e,{direction:"top",...t})},dropOut(e,t){return this.slideOut(e,{direction:"top",...t})},fadeIn(e,t){return this.animate(e,(e,t)=>r.setStyle(e,"opacity",t<1?t:""),t)},fadeOut(e,t){return this.animate(e,(e,t)=>r.setStyle(e,"opacity",t<1?1-t:""),t)},rotateIn(e,t){return this.animate(e,(e,t,s)=>r.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${(90-90*t)*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},rotateOut(e,t){return this.animate(e,(e,t,s)=>r.setStyle(e,"transform",t<1?`rotate3d(${s.x}, ${s.y}, 0, ${90*t*(s.inverse?-1:1)}deg)`:""),{x:0,y:1,...t})},slideIn(e,s){return this.animate(e,(e,s,o)=>{let i;if(s<1){const r=t.isFunction(o.direction)?o.direction():o.direction;let a,c,d;"top"===r||"bottom"===r?(a="Y",c=n._height(e),d="top"===r):(a="X",c=n._width(e),d="left"===r),i=`translate${a}(${Math.round(c-c*s)*(d?-1:1)}px)`}else i="";r.setStyle(e,"transform",i)},{direction:"bottom",...s})},slideOut(e,s){return this.animate(e,(e,s,o)=>{let i;if(s<1){const r=t.isFunction(o.direction)?o.direction():o.direction;let a,c,d;"top"===r||"bottom"===r?(a="Y",c=n._height(e),d="top"===r):(a="X",c=n._width(e),d="left"===r),i=`translate${a}(${Math.round(c*s)*(d?-1:1)}px)`}else i="";r.setStyle(e,"transform",i)},{direction:"bottom",...s})},squeezeIn(e,s){e=this.parseNodes(e),s={...n.animationDefaults,direction:"bottom",...s};const o=e.map(e=>{const o=this.create("div",{style:{overflow:"hidden",position:"relative"}});n._wrap(e,[o]);const i=r.parent(e);return n._animate(e,(e,s,o)=>{if(1===s){const e=r.childNodes(i).item(0);return void n._unwrap(e)}const a=t.isFunction(o.direction)?o.direction():o.direction;let c,d;"top"===a||"bottom"===a?(c="height","top"===a&&(d="Y")):"left"!==a&&"right"!==a||(c="width","left"===a&&(d="X"));const l=Math.round(n[`_${c}`](e)),h=Math.round(l*s);r.setStyle(i,c,`${h}px`),d&&r.setStyle(i,"transform",`translate${d}(${l-h}px)`)},s)});return n._start(),Promise.all(o)},squeezeOut(e,s){e=this.parseNodes(e),s={...n.animationDefaults,direction:"bottom",...s};const o=e.map(e=>{const o=this.create("div",{style:{overflow:"hidden",position:"relative"}});n._wrap(e,[o]);const i=r.parent(e);return n._animate(e,(e,s,o)=>{if(1===s){const e=r.childNodes(i).item(0);return void n._unwrap(e)}const a=t.isFunction(o.direction)?o.direction():o.direction;let c,d;"top"===a||"bottom"===a?(c="height","top"===a&&(d="Y")):"left"!==a&&"right"!==a||(c="width","left"===a&&(d="X"));const l=Math.round(n[`_${c}`](e)),h=Math.round(l-l*s);r.setStyle(i,c,`${h}px`),d&&r.setStyle(i,"transform",`translate${d}(${l-h}px)`)},s)});return n._start(),Promise.all(o)}}),Object.assign(n.prototype,{clearQueue(e){e=this.parseNodes(e);for(const t of e)n._clearQueue(t)},queue(e,t){e=this.parseNodes(e);for(const s of e)n._queue(s,t)}}),Object.assign(n.prototype,{getAttribute(e,t){const s=this.parseNode(e);if(s)return r.getAttribute(s,t)},getDataset(e,t){const s=this.parseNode(e);if(s)return r.getDataset(s,t)},getHTML(e){return this.getProperty(e,"innerHTML")},getProperty(e,t){const s=this.parseNode(e);if(s)return r.getProperty(s,t)},getText(e){return this.getProperty(e,"innerText")},getValue(e){return this.getProperty(e,"value")},removeAttribute(e,t){e=this.parseNodes(e);for(const s of e)r.removeAttribute(s,t)},removeProperty(e,t){e=this.parseNodes(e);for(const s of e)r.removeProperty(s,t)},setAttribute(e,t,s){e=this.parseNodes(e);const r=n._parseData(t,s);for(const t of e)n._setAttribute(t,r)},setDataset(e,t,s){e=this.parseNodes(e);const o=n._parseData(t,s);for(const t of e)r.setDataset(t,o)},setHTML(e,t){this.empty(e),this.setProperty(e,"innerHTML",t)},setProperty(e,t,s){e=this.parseNodes(e);const o=n._parseData(t,s);for(const t of e)r.setProperty(t,o)},setText(e,t){this.empty(e),this.setProperty(e,"innerText",t)},setValue(e,t){this.setProperty(e,"value",t)}}),Object.assign(n.prototype,{cloneData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)n._cloneData(s,e)},getData(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0,window:!0});if(s)return n._getData(s,t)},removeData(e,t){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});for(const s of e)n._removeData(s,t)},setData(e,t,s){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0});const r=n._parseData(t,s);for(const t of e)n._setData(t,r)}}),Object.assign(n.prototype,{center(e,t){const s=this.rect(e,t);if(s)return{x:s.left+s.width/2,y:s.top+s.height/2}},constrain(e,t){const s=this.rect(t);if(s){e=this.parseNodes(e);for(const t of e)n._constrain(t,s)}},distTo(e,s,n,r){const o=this.center(e,r);if(o)return t.dist(o.x,o.y,s,n)},distToNode(e,t){const s=this.center(t);if(s)return this.distTo(e,s.x,s.y)},nearestTo(e,t,s,n){let r=null,o=Number.MAX_VALUE;e=this.parseNodes(e);for(const i of e){const e=this.distTo(i,t,s,n);e&&e<o&&(o=e,r=i)}return r},nearestToNode(e,t){const s=this.center(t);if(s)return this.nearestTo(e,s.x,s.y)},percentX(e,s,n){const r=this.rect(e,n);if(r)return t.clampPercent((s-r.left)/r.width*100)},percentY(e,s,n){const r=this.rect(e,n);if(r)return t.clampPercent((s-r.top)/r.height*100)},position(e,t){const s=this.parseNode(e);if(s)return n._position(s,t)},rect(e,t){const s=this.parseNode(e);if(s)return n._rect(s,t)}}),Object.assign(n.prototype,{getScrollX(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?r.getScrollXWindow(s):t.isDocument(s)?n._getScrollXDocument(s):r.getScrollX(s)},getScrollY(e){const s=this.parseNode(e,{document:!0,window:!0});if(s)return t.isWindow(s)?r.getScrollYWindow(s):t.isDocument(s)?n._getScrollYDocument(s):r.getScrollY(s)},setScroll(e,s,o){e=this.parseNodes(e,{document:!0,window:!0});for(const i of e)t.isWindow(i)?r.setScrollWindow(i,s,o):t.isDocument(i)?n._setScrollDocument(i,s,o):n._setScroll(i,s,o)},setScrollX(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?n._setScrollXWindow(o,s):t.isDocument(o)?n._setScrollXDocument(o,s):r.setScrollX(o,s)},setScrollY(e,s){e=this.parseNodes(e,{document:!0,window:!0});for(const o of e)t.isWindow(o)?n._setScrollYWindow(o,s):t.isDocument(o)?n._setScrollYDocument(o,s):r.setScrollY(o,s)}}),Object.assign(n.prototype,{height(e,s=!0,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?r.heightWindow(a,s):t.isDocument(a)?n._height(r.documentElement(a),s,o,i):n._height(a,s,o,i)},width(e,s=!0,o,i){const a=this.parseNode(e,{document:!0,window:!0});if(a)return t.isWindow(a)?r.widthWindow(a,s):t.isDocument(a)?n._width(r.documentElement(a),s,o,i):n._width(a,s,o,i)}}),Object.assign(n.prototype,{addClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.addClass(s,...t)},css(e,t){const s=this.parseNode(e);if(s)return n._css(s,t)},getStyle(e,s){const n=this.parseNode(e);if(n)return s=t.snakeCase(s),r.getStyle(n,s)},hide(e){this.setStyle(e,"display","none")},removeClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.removeClass(s,...t)},setStyle(e,t,s,r){e=this.parseNodes(e);const o=n._parseData(t,s);for(const t of e)n._setStyle(t,o,r)},show(e){this.setStyle(e,"display","")},toggle(e){e=this.parseNodes(e);for(const t of e)"none"===r.getStyle(t,"display")?r.setStyle(t,"display",""):r.setStyle(t,"display","none")},toggleClass(e,...t){if(e=this.parseNodes(e),(t=n._parseClasses(t)).length)for(const s of e)r.toggleClass(s,...t)}}),Object.assign(n.prototype,{mouseDragFactory:(s,r,o,i=!0)=>(r&&i&&(r=t.animation(r),o&&(o=t.animation(o))),t=>{if(s&&!1===s(t))return!1;r&&n._addEvent(e,"mousemove",r),(r||o)&&n._addEvent(e,"mouseup",t=>{r&&n._removeEvent(e,"mousemove",r),o&&o(t)},!1,!0)})}),Object.assign(n.prototype,{blur(e){const t=this.parseNode(e);t&&r.blur(t)},click(e){const t=this.parseNode(e);t&&r.click(t)},focus(e){const t=this.parseNode(e);t&&r.focus(t)},ready(t){"complete"!==this._context.readyState?n._addEvent(e,"DOMContentLoaded",t):t()}}),Object.assign(n.prototype,{addEvent(e,t,s){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const r of e)n._addEvent(r,t,s)},addEventDelegate(e,t,s,r){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const o of e)n._addEvent(o,t,r,s)},addEventDelegateOnce(e,t,s,r){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const o of e)n._addEvent(o,t,r,s,!0)},addEventOnce(e,t,s){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const r of e)n._addEvent(r,t,s,null,!0)},cloneEvents(e,t){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=this.parseNodes(t,{shadow:!0,document:!0,window:!0});for(const s of e)for(const e of t)n._cloneEvents(s,e)},removeEvent(e,t,s){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const r of e)n._removeEvent(r,t,s)},removeEventDelegate(e,t,s,r){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0});for(const o of e)n._removeEvent(o,t,r,s)},triggerEvent(e,t,s){e=this.parseNodes(e,{shadow:!0,document:!0,window:!0}),t=n._parseEvents(t).map(e=>n._parseEvent(e));for(const n of e)for(const e of t)r.triggerEvent(n,e,s)}}),Object.assign(n.prototype,{attachShadow(e,t=!0){const s=this.parseNode(e);if(s)return r.attachShadow(s,t)},create(e="div",s){const o=r.create(this._context,e);return s?("html"in s?r.setProperty(o,{innerHTML:s.html}):"text"in s&&r.setProperty(o,{innerText:s.text}),"class"in s&&r.addClass(o,...n._parseClasses(t.wrap(s.class))),"style"in s&&n._setStyle(o,s.style),"value"in s&&r.setProperty(o,{value:s.value}),"attributes"in s&&n._setAttribute(o,s.attributes),"properties"in s&&r.setProperty(o,s.properties),"dataset"in s&&r.setDataset(o,s.dataset),o):o},createComment(e){return r.createComment(this._context,e)},createFragment(){return r.createFragment(this._context)},createRange(){return r.createRange(this._context)},createText(e){return r.createText(this._context,e)},parseHTML(e){return t.wrap(r.children(this.createRange().createContextualFragment(e)))}}),Object.assign(n.prototype,{clone(e,t=!0,s=!1,r=!1){return(e=this.parseNodes(e,{node:!0,fragment:!0})).map(e=>n._clone(e,t,s,r))},detach(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=r.parent(t);e&&r.removeChild(e,t)}},empty(e){e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});for(const t of e)n._empty(t)},remove(e){e=this.parseNodes(e,{node:!0});for(const t of e){const e=r.parent(t);e&&(n._empty(t),n._remove(t),r.removeChild(e,t))}},replaceAll(e,t){this.replaceWith(t,e)},replaceWith(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const s of e)n._replaceWith(s,t)}}),Object.assign(n.prototype,{after(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=r.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t.reverse())r.insertBefore(n,e,r.next(s))}},append(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(s){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)r.insertBefore(s,e)}},appendTo(e,t){this.append(t,e)},before(e,t){const s=this.parseNode(e,{node:!0});if(!s)return;const n=r.parent(s);if(n){t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t)r.insertBefore(n,e,s)}},insertAfter(e,t){this.after(t,e)},insertBefore(e,t){this.before(t,e)},prepend(e,t){const s=this.parseNode(e,{fragment:!0,shadow:!0,document:!0});if(!s)return;const n=r.firstChild(s);t=this.parseNodes(t,{node:!0,fragment:!0,html:!0});for(const e of t.reverse())r.insertBefore(s,e,n)},prependTo(e,t){this.prepend(t,e)}}),Object.assign(n.prototype,{unwrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseFilter(t);for(const s of e)n._unwrap(s,t)},wrap(e,t){e=this.parseNodes(e,{node:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)n._wrap(s,t)},wrapAll(e,t){const s=(e=this.parseNodes(e,{node:!0})).slice().shift();if(!s)return;const o=r.parent(s);if(!o)return;t=this.parseNodes(t,{fragment:!0,html:!0});const i=this.clone(t,!0);for(const e of i)r.insertBefore(o,e,s);const a=n._deepest(i.shift());for(const t of e)r.insertBefore(a,t)},wrapInner(e,t){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}),t=this.parseNodes(t,{fragment:!0,html:!0});for(const s of e)n._wrapInner(s,t)}}),Object.assign(n.prototype,{connected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>r.isConnected(e))},equal(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>r.isEqual(e,t)))},filter(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>!t||t(e,s))},filterOne(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).find((e,s)=>!t||t(e,s))||null},fixed(e){return this.parseNodes(e,{node:!0}).filter(e=>t.isElement(e)&&"fixed"===n._css(e,"position")||n._parents(e,e=>t.isElement(e)&&"fixed"===n._css(e,"position"),!1,!0).length)},hidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>!n._isVisible(e))},not(e,t){return(t=this.parseFilter(t))?this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter((e,s)=>!t(e,s)):[]},same(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).filter(e=>t.some(t=>r.isSame(e,t)))},visible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).filter(e=>n._isVisible(e))},withAnimation(e){return this.parseNodes(e).filter(e=>n._hasAnimation(e))},withAttribute(e,t){return this.parseNodes(e).filter(e=>r.hasAttribute(e,t))},withChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter(e=>r.hasChildren(e))},withClass(e,...t){return t=n._parseClasses(t),this.parseNodes(e).filter(e=>t.some(t=>r.hasClass(e,t)))},withData(e,t){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0,window:!0}).filter(e=>n._hasData(e,t))},withDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).filter((e,s)=>!t||t(e,s))},withProperty(e,t){return this.parseNodes(e).filter(e=>r.hasProperty(e,t))},withTransition(e){return this.parseNodes(e).filter(e=>n._hasTransition(e))}}),Object.assign(n.prototype,{find(e,s=this._context){const o=e.match(n.fastRegex);if(o)return"#"===o[1]?this.findById(o[2],s):"."===o[1]?this.findByClass(o[2],s):this.findByTag(o[2],s);if(e.match(n.complexRegex)){const r=n._prefixSelectors(e,`#${n.tempId} `);return t.isElement(s)?n.__findByCustom(r,s):(s=this.parseNodes(s),n._findByCustom(r,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?t.merge([],r.findBySelector(e,s)):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),n._findBySelector(e,s))},findByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.merge([],r.findByClass(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const o of s)t.merge(n,r.findByClass(e,o));return s.length>1&&n.length>1?t.unique(n):n},findById(e,t=this._context){const s=this.findOneById(e,t);return s?[s]:[]},findByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return t.merge([],r.findByTag(e,s));s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});const n=[];for(const o of s)t.merge(n,r.findByTag(e,o));return s.length>1&&n.length>1?t.unique(n):n},findOne(e,s=this._context){const o=e.match(n.fastRegex);if(o)return"#"===o[1]?this.findOneById(o[2],s):"."===o[1]?this.findOneByClass(o[2],s):this.findOneByTag(o[2],s);if(e.match(n.complexRegex)){const r=n._prefixSelectors(e,`#${n.tempId} `);return t.isElement(s)?n.__findOneByCustom(r,s):(s=this.parseNodes(s),n._findOneByCustom(r,s))}return t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s)?r.findOneBySelector(e,s):(s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0}),n._findOneBySelector(e,s))},findOneByClass(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return r.findByClass(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=r.findByClass(e,t).item(0);if(s)return s}return null},findOneById(e,s=this._context){const n=r.findById(e,this._context);return n?t.isDocument(s)?n:t.isElement(s)?r.contains(s,n)?n:null:(s=this.parseNodes(s)).some(e=>r.contains(e,n))?n:null:null},findOneByTag(e,s=this._context){if(t.isDocument(s)||t.isElement(s)||t.isFragment(s)||t.isShadow(s))return r.findByTag(e,s).item(0);s=this.parseNodes(s,{fragment:!0,shadow:!0,document:!0});for(const t of s){const s=r.findByTag(e,t).item(0);if(s)return s}return null}}),Object.assign(n.prototype,{child(e,t){return this.children(e,t,!0)},children(e,s,r=!1,o=!0){if(s=this.parseFilter(s),t.isElement(e)||t.isDocument(e)||t.isFragment(e)||t.isShadow(e))return n._children(e,s,r,o);e=this.parseNodes(e,{fragment:!0,shadow:!0,document:!0});const i=[];for(const a of e)t.merge(i,n._children(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},closest(e,t,s){return this.parents(e,t,s,!0)},commonAncestor(e){if(!(e=this.sort(e)).length)return;const t=this.createRange();return 1===e.length?r.select(t,e.shift()):(r.setStartBefore(t,e.shift()),r.setEndAfter(t,e.pop())),t.commonAncestorContainer},contents(e){return this.children(e,!1,!1,!1)},fragment(e){const t=this.parseNode(e);if(t)return r.fragment(t)},next(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._next(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._next(o,s));return e.length>1&&r.length>1?t.unique(r):r},nextAll(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._nextAll(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._nextAll(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},offsetParent(e){return this.forceShow(e,e=>r.offsetParent(e))},parent(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._parent(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._parent(o,s));return e.length>1&&r.length>1?t.unique(r):r},parents(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._parents(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._parents(a,s,r,o));return e.length>1&&i.length>1?t.unique(i):i},prev(e,s){if(s=this.parseFilter(s),t.isNode(e))return n._prev(e,s);e=this.parseNodes(e,{node:!0});const r=[];for(const o of e)t.merge(r,n._prev(o,s));return e.length>1&&r.length>1?t.unique(r):r},prevAll(e,s,r,o=!1){if(s=this.parseFilter(s),r=this.parseFilter(r),t.isNode(e))return n._prevAll(e,s,r,o);e=this.parseNodes(e,{node:!0});const i=[];for(const a of e)t.merge(i,n._prevAll(a,s,r,o));return e.length>1&&i.length?t.unique(i):i},shadow(e){const t=this.parseNode(e);if(t)return r.shadow(t)},siblings(e,s,r=!0){if(s=this.parseFilter(s),t.isNode(e))return n._siblings(e,s,r);e=this.parseNodes(e,{node:!0});const o=[];for(const i of e)t.merge(o,n._siblings(i,s,r));return e.length>1&&o.length>1?t.unique(o):o}}),Object.assign(n.prototype,{parseFilter(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>r.is(t,e):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>r.isSame(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.includes(t)))},parseFilterContains(e){return!!e&&(t.isFunction(e)?e:t.isString(e)?t=>!!this.findOne(e,t):t.isNode(e)||t.isFragment(e)||t.isShadow(e)?t=>r.contains(t,e):!!(e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0})).length&&(t=>e.some(e=>r.contains(t,e))))},parseNode(e,s={}){if(t.isString(e)){if("html"in s&&s.html&&"<"===e.trim().charAt(0))return this.parseHTML(e).shift();const t=this.findOne(e,"context"in s?s.context:this._context);return t||null}const r=n.parseNodesFactory(s);if(r(e))return e;const o=t.wrap(e).slice().shift();return o&&r(o)?o:null},parseNodes(e,s={}){if(t.isString(e))return"html"in s&&s.html&&"<"===e.trim().charAt(0)?this.parseHTML(e):this.find(e,"context"in s?s.context:this._context);const r=n.parseNodesFactory(s);return r(e)?[e]:t.wrap(e).filter(r)}}),Object.assign(n.prototype,{afterSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=r.getSelection();if(!r.rangeCount(t))return;const s=r.getRange(t);r.removeRanges(t),r.collapse(s);for(const t of e)r.insert(s,t)},beforeSelection(e){e=this.parseNodes(e,{node:!0,fragment:!0,html:!0});const t=r.getSelection();if(!r.rangeCount(t))return;const s=r.getRange(t);r.removeRanges(t);for(const t of e)r.insert(s,t)},extractSelection(){const e=r.getSelection();if(!r.rangeCount(e))return[];const s=r.getRange(e);r.removeRanges(e);const n=r.extract(s);return t.wrap(r.childNodes(n))},getSelection(){const e=r.getSelection();if(!r.rangeCount(e))return[];const s=r.getRange(e),n=t.merge([],r.findBySelector("*",s.commonAncestorContainer));if(!n.length)return[s.commonAncestorContainer];if(1===n.length)return n;const o=r.startContainer(s),i=r.endContainer(s),a=t.isElement(o)?o:r.parent(o),c=t.isElement(i)?i:r.parent(i);return n.slice(n.indexOf(a),n.indexOf(c)+1)},select(e){const t=this.parseNode(e,{node:!0,fragment:!0,shadow:!0});if(t&&"select"in t)return t.select();const s=r.getSelection();if(r.rangeCount(s)>0&&r.removeRanges(s),!t)return;const n=this.createRange();r.select(n,t),r.addRange(s,n)},selectAll(e){e=this.sort(e);const t=r.getSelection();if(r.rangeCount(t)&&r.removeRanges(t),!e.length)return;const s=this.createRange();1==e.length?r.select(s,e.shift()):(r.setStartBefore(s,e.shift()),r.setEndAfter(s,e.pop())),r.addRange(t,s)},wrapSelection(e){e=this.parseNodes(e,{fragment:!0,html:!0});const s=r.getSelection();if(!r.rangeCount(s))return;const o=r.getRange(s);r.removeRanges(s);const i=r.extract(o),a=n._deepest(e.slice().shift()),c=t.wrap(r.childNodes(i));for(const e of c)r.insertBefore(a,e);for(const t of e)r.insert(o,t)}}),Object.assign(n.prototype,{hasAnimation(e){return this.parseNodes(e).some(e=>n._hasAnimation(e))},hasAttribute(e,t){return this.parseNodes(e).some(e=>r.hasAttribute(e,t))},hasChildren(e){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>r.hasChildren(e))},hasClass(e,...t){return t=n._parseClasses(t),this.parseNodes(e).some(e=>t.some(t=>r.hasClass(e,t)))},hasData(e,t){return this.parseNodes(e,{fragment:!0,shadow:!0,document:!0,window:!0}).some(e=>n._hasData(e,t))},hasDescendent(e,t){return t=this.parseFilterContains(t),this.parseNodes(e,{fragment:!0,shadow:!0,document:!0}).some(e=>!t||t(e))},hasFragment(e){return this.parseNodes(e).some(e=>n._hasFragment(e))},hasProperty(e,t){return this.parseNodes(e).some(e=>r.hasProperty(e,t))},hasShadow(e){return this.parseNodes(e).some(e=>n._hasShadow(e))},hasTransition(e){return this.parseNodes(e).some(e=>n._hasTransition(e))},is(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>!t||t(e))},isConnected(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>r.isConnected(e))},isEqual(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>r.isEqual(e,t)))},isFixed(e){return this.parseNodes(e,{node:!0}).some(e=>t.isElement(e)&&"fixed"===n._css(e,"position")||n._parents(e,e=>t.isElement(e)&&"fixed"===n._css(e,"position"),!1,!0).length)},isHidden(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>!n._isVisible(e))},isSame(e,t){return t=this.parseNodes(t,{node:!0,fragment:!0,shadow:!0}),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).some(e=>t.some(t=>r.isSame(e,t)))},isVisible(e){return this.parseNodes(e,{node:!0,document:!0,window:!0}).some(e=>n._isVisible(e))}}),Object.assign(n.prototype,{exec(e,t=null){return this._context.execCommand(e,!1,t)},forceShow(e,t){const s=this.parseNode(e,{node:!0,document:!0,window:!0});if(s)return n._forceShow(s,t)},index(e,t){return t=this.parseFilter(t),this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).findIndex(e=>!t||t(e))},indexOf(e){const s=this.parseNode(e,{node:!0});if(s)return t.wrap(r.children(r.parent(s))).indexOf(s)},normalize(e){e=this.parseNodes(e,{node:!0,fragment:!0,shadow:!0,document:!0});for(const t of e)r.normalize(t)},serialize(e){return n._parseParams(this.serializeArray(e))},serializeArray(e){return this.parseNodes(e,{fragment:!0,shadow:!0}).reduce((e,s)=>{if(r.is(s,"form")||t.isFragment(s)||t.isShadow(s))return e.concat(this.serializeArray(r.findBySelector("input, select, textarea",s)));if(r.is(s,"[disabled], input[type=submit], input[type=reset], input[type=file], input[type=radio]:not(:checked), input[type=checkbox]:not(:checked)"))return e;const n=r.getAttribute(s,"name");if(!n)return e;const o=r.getAttribute(s,"value")||"";return e.push({name:n,value:o}),e},[])},sort(e){return this.parseNodes(e,{node:!0,fragment:!0,shadow:!0}).sort((e,t)=>{if(r.isSame(e,t))return 0;const s=r.comparePosition(e,t);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:0})}}),Object.assign(n,{_animate(e,s,n){this._animations.has(e)||this._animations.set(e,[]);const r=performance.now();return new Promise((o,i)=>{this._animations.get(e).push((a=!1,c=!1)=>{if(a&&!c)return i(e),!0;let d;return c?d=1:(d=(performance.now()-r)/n.duration,n.infinite?d%=1:d=t.clamp(d),"ease-in"===n.type?d=Math.pow(d,2):"ease-out"===n.type?d=Math.sqrt(d):"ease-in-out"===n.type&&(d=d<=.5?2*Math.pow(d,2):1-(1-d)**2*2)),s(e,d,n),1===d?(o(e),!0):void 0})})},_animationFrame(){for(let[e,t]of this._animations)(t=t.filter(e=>!e())).length?this._animations.set(e,t):this._animations.delete(e);this._animations.size?e.requestAnimationFrame(e=>this._animationFrame()):this._animating=!1},_start(){this._animating||(this._animating=!0,this._animationFrame())},_stop(e,t=!0){if(!this._animations.has(e))return;const s=this._animations.get(e);for(const e of s)e(!0,t);this._animations.delete(e)}}),Object.assign(n,{_clearQueue(e){this._queues.has(e)&&this._queues.delete(e)},_dequeueNode(e){if(!this._queues.has(e))return;const t=this._queues.get(e).shift();t?Promise.resolve(t(e)).finally(t=>this._dequeueNode(e)):this._queues.delete(e)},_queue(e,t){const s=!this._queues.has(e);s&&this._queues.set(e,[]),this._queues.get(e).push(t),s&&this._dequeueNode(e)}}),Object.assign(n,{_setAttribute(e,t){for(const s in t)r.setAttribute(e,s,t[s])}}),Object.assign(n,{_cloneData(e,t){n._data.has(e)&&this._setData(t,{...n._data.get(e)})},_getData(e,t){if(this._data.has(e))return t?this._data.get(e)[t]:this._data.get(e)},_removeData(e,t){if(this._data.has(e)){if(t){const s=this._data.get(e);if(delete s[t],Object.keys(s).length)return}this._data.delete(e)}},_setData(e,t){this._data.has(e)||this._data.set(e,{}),Object.assign(this._data.get(e),t)}}),Object.assign(n,{_constrain(e,t){const s=this._rect(e),r={};let o,i;s.height>t.height&&(r.height=t.height),s.width>t.width&&(r.width=t.width),s.left-t.left<0?o=s.left-t.left:s.right-t.right>0&&(o=s.right-t.right),o&&(r.left=`${parseFloat(this._css(e,"left"))-o}px`),s.top-t.top<0?i=s.top-t.top:s.bottom-t.bottom>0&&(i=s.bottom-t.bottom),i&&(r.top=`${parseFloat(this._css(e,"top"))-i}px`),n._setStyle(e,r)},_position(e,t){return this._forceShow(e,e=>{const s={x:r.offsetLeft(e),y:r.offsetTop(e)};if(t){let t=e;for(;t=r.offsetParent(t);)s.x+=r.offsetLeft(t),s.y+=r.offsetTop(t)}return s})},_rect(t,s){return this._forceShow(t,t=>{const n=r.rect(t);return s&&(n.x+=r.getScrollX(e),n.y+=r.getScrollY(e)),n})}}),Object.assign(n,{_getScrollXDocument:e=>r.getScrollX(r.scrollingElement(e)),_getScrollYDocument:e=>r.getScrollY(r.scrollingElement(e)),_setScroll(e,t,s){r.setScrollX(e,t),r.setScrollY(e,s)},_setScrollDocument(e,t,s){return this._setScroll(r.scrollingElement(e),t,s)},_setScrollXDocument:(e,t)=>r.setScrollX(r.scrollingElement(e),t),_setScrollXWindow:(e,t)=>r.setScrollWindow(e,t,r.getScrollYWindow(e)),_setScrollYDocument:(e,t)=>r.setScrollY(r.scrollingElement(e),t),_setScrollYWindow:(e,t)=>r.setScrollWindow(e,r.getScrollXWindow(e),t)}),Object.assign(n,{_height(e,t=!0,s,n){return this._forceShow(e,e=>{let o=r.height(e);return t||(o-=parseInt(this._css(e,"padding-top"))+parseInt(this._css(e,"padding-bottom"))),s&&(o+=parseInt(this._css(e,"border-top-width"))+parseInt(this._css(e,"border-bottom-width"))),n&&(o+=parseInt(this._css(e,"margin-top"))+parseInt(this._css(e,"margin-bottom"))),o})},_width(e,t=!0,s,n){return this._forceShow(e,e=>{let o=r.width(e);return t||(o-=parseInt(this._css(e,"padding-left"))+parseInt(this._css(e,"padding-right"))),s&&(o+=parseInt(this._css(e,"border-left-width"))+parseInt(this._css(e,"border-right-width"))),n&&(o+=parseInt(this._css(e,"margin-left"))+parseInt(this._css(e,"margin-right"))),o})}}),Object.assign(n,{_css(e,t){return this._styles.has(e)||this._styles.set(e,r.css(e)),t?this._styles.get(e).getPropertyValue(t):this._styles.get(e)},_setStyle(e,s,n){for(let o in s){let i=s[o];o=t.snakeCase(o),i&&t.isNumeric(i)&&!this.cssNumberProperties.includes(o)&&(i+="px"),r.setStyle(e,o,i,n)}}}),Object.assign(n,{_delegateFactory(e,t,s){const o=t.match(n.complexRegex)?this._getDelegateContainsFactory(e,t):this._getDelegateMatchFactory(e,t);return t=>{if(r.isSame(t.target,e))return;const n=o(t.target);return n?(t.delegateTarget=n,s(t)):void 0}},_getDelegateContainsFactory(e,t){return t=n._prefixSelectors(selectors,`#${n._tempId}`),s=>{const n=this.__findByCustom(t,e);return!!n.length&&(n.includes(s)?s:this._parents(s,e=>n.includes(e),t=>r.isSame(e,t),!0).shift())}},_getDelegateMatchFactory(e,t){return s=>r.is(s,t)?s:this._parents(s,e=>r.is(e,t),t=>r.isSame(e,t),!0).shift()},_selfDestructFactory(e,t,s,n){const r=o=>(s?this._removeEvent(e,t,n,s):this._removeEvent(e,t,r),n(o));return r}}),Object.assign(n,{_addEvent(e,t,s,o,i){let a=s;i&&(a=this._selfDestructFactory(e,t,o,a)),o&&(a=this._delegateFactory(e,o,a)),this._events.has(e)||this._events.set(e,{});const c=this._events.get(e),d={delegate:o,callback:s,realCallback:a,selfDestruct:i};for(const s of n._parseEvents(t)){const t=n._parseEvent(s);if(d.event=s,d.realEvent=t,c[t]){if(c[t].includes(d))return}else c[t]=[];r.addEvent(e,t,a),c[t].push(d)}},_cloneEvents(e,t){if(!this._events.has(e))return;const s=this._events.get(e);for(const e in s)for(const n of s[e])this._addEvent(t,n.event,n.callback,n.delegate,n.selfDestruct)},_removeEvent(e,t,s,o){if(!this._events.has(e))return;const i=this._events.get(e),a=t?n._parseEvents(t):Object.keys(i);for(const t of a){const a=n._parseEvent(t);if(!i[a])return;i[a]=i[a].filter(n=>!!(a===t&&a!==n.realEvent||a!==t&&t!==n.event||o&&(o!==n.delegate||s&&s!==n.callback)||!o&&s&&s!==n.realCallback)||(r.removeEvent(e,n.realEvent,n.realCallback),!1)),i[a].length||delete i[a]}Object.keys(i).length||this._events.delete(e)}}),Object.assign(n,{_parseClasses:e=>e.flat().flatMap(e=>e.split(" ")),_parseData:(e,s)=>t.isObject(e)?e:{[e]:s},_parseEvent:e=>e.split(".").shift(),_parseEvents:e=>e.split(" "),_parseFormData(e){const s=new FormData;if(t.isArray(e)){const t={};for(const s of e)t[s.name]=s.value;e=t}return this._parseFormValues(e,s),s},_parseFormValues(e,s,n){let r;for(r in e){const o=e[r];if(n&&(r=`${n}[${r}]`),t.isPlainObject(o))this._parseFormValues(o,s,r);else if(t.isArray(o))for(const e of o)s.append(r,e);else s.set(r,o)}},_parseParams(e){let s=[];return t.isArray(e)?s=e.map(e=>this._parseParam(e.name,e.value)):t.isObject(e)&&(s=Object.keys(e).map(t=>this._parseParam(t,e[t]))),s.flatMap(encodeURI).join("&")},_parseParam(e,s){return t.isArray(s)?s.map(t=>this._parseParam(e,t)).flat():t.isObject(s)?Object.keys(s).map(t=>this._parseParam(e+"["+t+"]",s[t])).flat():e+"="+s},_prefixSelectors(e,t){return e.split(this.splitRegex).filter(e=>!!e).map(e=>`${t} ${e}`)}}),Object.assign(n,{_clone(e,t=!0,s=!1,n=!1){const o=r.clone(e,t);return s||n?(s&&this._cloneEvents(e,o),n&&this._cloneData(e,o),t&&this._deepClone(e,o,s,n),o):o},_deepClone(e,s,n=!1,o=!1){const i=t.wrap(r.childNodes(e)),a=t.wrap(r.childNodes(s));for(let e=0;e<i.length;e++)n&&this._cloneEvents(i[e],a[e]),o&&this._cloneData(i[e],a[e]),this._deepClone(i[e],a[e])},_detach(e){const t=r.parent(e);t||r.removeChild(t,e)},_empty(e){const s=t.wrap(r.childNodes(e));for(const t of s)this._empty(t),this._remove(t),r.removeChild(e,t);if(n._hasShadow(e)){const t=r.shadow(e);this._empty(t),this._remove(t)}if(n._hasFragment(e)){const t=r.fragment(e);this._empty(t),this._remove(t)}},_remove(e){r.triggerEvent(e,"remove"),t.isElement(e)&&(this._clearQueue(e),this._stop(e),this._styles.has(e)&&this._styles.delete(e)),this._removeEvent(e),this._removeData(e)},_replaceWith(e,t){const s=r.parent(e);if(s){for(const n of t){const t=this._clone(n,!0);r.insertBefore(s,t,e)}this._empty(e),this._remove(e),r.removeChild(s,e)}}}),Object.assign(n,{_unwrap(e,s){const n=r.parent(e,s);if(!n)return;const o=r.parent(n);if(!n)return;const i=t.wrap(r.childNodes(n));for(const e of i)r.insertBefore(o,e,n);this._remove(n)},_wrap(e,t){const s=r.parent(e);if(!s)return;const n=t.map(e=>this._clone(e,!0));for(const t of n)r.insertBefore(s,t,e);const o=this._deepest(n.shift());r.insertBefore(o,e)},_wrapInner(e,s){const n=t.wrap(r.childNodes(e)),o=s.map(e=>this._clone(e,!0));for(const t of o)r.insertBefore(e,t);const i=this._deepest(o.shift());for(const e of n)r.insertBefore(i,e)}}),Object.assign(n,{parseHTML:e=>(new DOMParser).parseFromString(e,"text/html"),parseXML:e=>(new DOMParser).parseFromString(e,"application/xml")}),Object.assign(n,{_findByCustom(e,s=this._context){const n=[];for(const r of s)t.merge(n,this.__findByCustom(e,r));return s.length>1&&n.length>1?t.unique(n):n},_findBySelector(e,s){const n=[];for(const o of s)t.merge(n,r.findBySelector(e,o));return s.length>1&&n.length>1?t.unique(n):n},_findOneByCustom(e,t){for(const s of t){const t=this.__findOneByCustom(e,s);if(t)return t}return null},_findOneBySelector(e,t){for(const s of t){const t=r.findOneBySelector(e,s);if(t)return t}return null},__findByCustom(e,s){const n=r.getAttribute(s,"id");r.setAttribute(s,"id",this.tempId);const o=r.parent(s),i=[];for(const s of e)t.merge(i,r.findBySelector(s,o));return n?r.setAttribute(s,"id",n):r.removeAttribute(s,"id"),e.length>1&&i.length>1?t.unique(i):i},__findOneByCustom(e,t){const s=r.getAttribute(t,"id");r.setAttribute(t,"id",this.tempId);const n=r.parent(t);if(!n)return null;let o=null;for(const t of e)if(o=r.findOneBySelector(t,n))break;return s?r.setAttribute(t,"id",s):r.removeAttribute(t,"id"),o}}),Object.assign(n,{_children(e,s,n=!1,o=!1){const i=t.wrap(o?r.children(e):r.childNodes(e)),a=[];let c;for(c of i)if((!s||s(c))&&(a.push(c),n))break;return a},_deepest:e=>t.merge([],r.findBySelector("*",e)).find(e=>!r.hasChildren(e))||e,_next(e,t){const s=[];return(e=r.next(e))?t&&!t(e)?s:(s.push(e),s):s},_nextAll(e,t,s,n=!1){const o=[];for(;(e=r.next(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!n)););return o},_parent(e,t){const s=[],n=r.parent(e);return n?t&&!t(n)?s:(s.push(n),s):s},_parents(e,s,n,o=!1){const i=[];for(;(e=r.parent(e))&&!t.isDocument(e)&&(!n||!n(e))&&(s&&!s(e)||(i.push(e),!o)););return i},_prev(e,t){const s=[];return(e=r.prev(e))?t&&!t(e)?s:(s.push(e),s):s},_prevAll(e,t,s,n=!1){const o=[];for(;(e=r.prev(e))&&(!s||!s(e))&&(t&&!t(e)||(o.push(e),!n)););return o},_siblings(e,t,s=!0){const n=[],o=r.parent(e);if(!o)return n;const i=s?o.children:o.childNodes;let a;for(a of i)r.isSame(e,a)||t&&!t(a)||n.push(a);return n}}),Object.assign(n,{parseNodesFactory:e=>e?s=>(e.node?t.isNode(s):t.isElement(s))||e.fragment&&t.isFragment(s)||e.shadow&&t.isShadow(s)||e.document&&t.isDocument(s)||e.window&&t.isWindow(s):t.isElement}),Object.assign(n,{_hasAnimation(e){return!!parseFloat(this._css(e,"animation-duration"))},_hasData(e,t){return this._data.has(e)&&(!t||this._data.get(e).hasOwnProperty(t))},_hasFragment:e=>!!r.fragment(e),_hasShadow:e=>!!r.shadow(e),_hasTransition(e){return!!parseFloat(this._css(e,"transition-duration"))},_isVisible:e=>t.isWindow(e)?r._isVisibleDocument(r.document(e)):t.isDocument(e)?r.isVisibleDocument(e):!!r.offsetParent(e)}),Object.assign(n,{_forceShow(e,s){if(t.isDocument(e)||t.isWindow(e)||n._isVisible(e))return s(e);const o=[];t.isElement(e)&&"none"===this._css(e,"display")&&o.push(e),t.merge(o,this._parents(e,e=>t.isElement(e)&&"none"===this._css(e,"display")));const i=new Map;for(const e of o)i.set(e,r.getAttribute(e,"style")),r.setStyle(e,"display","initial",!0);const a=s(e);for(const[e,t]of i)t?r.setAttribute(e,"style",t):r.removeAttribute(e,"style");return a}}),Object.assign(n,{_animating:!1,_animations:new Map,_queues:new WeakMap,_data:new WeakMap,_events:new WeakMap,_styles:new WeakMap,ajaxDefaults:{beforeSend:!1,cache:!0,contentType:"application/x-www-form-urlencoded",data:!1,method:"GET",processData:!0},animationDefaults:{duration:1e3,type:"ease-in-out",infinite:!1},cssNumberProperties:["font-weight","line-height","opacity","orphans","widows","z-index"],complexRegex:/(?:^\s*[\>\+\~]|\,(?=(?:(?:[^"']*["']){2})*[^"']*$)\s*[\>\+\~])/,fastRegex:/^([\#\.]?)([\w\-]+)$/,localRegex:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,splitRegex:/\,(?=(?:(?:[^"]*"){2})*[^"]*$)\s*/,tempId:"frost"+Date.now().toString(16)});class r{}return Object.assign(r,{getAttribute:(e,t)=>e.getAttribute(t),getDataset:(e,t)=>t?e.dataset[t]:e.dataset,getProperty:(e,t)=>e[t],removeAttribute(e,t){e.removeAttribute(t)},removeProperty(e,t){delete e[t]},setAttribute(e,t,s){e.setAttribute(t,s)},setDataset(e,t){Object.assign(e.dataset,t)},setProperty(e,t){Object.assign(e,t)}}),Object.assign(r,{offsetLeft:e=>e.offsetLeft,offsetTop:e=>e.offsetTop,rect:e=>e.getBoundingClientRect()}),Object.assign(r,{getScrollX:e=>e.scrollLeft,getScrollXWindow:e=>e.scrollX,getScrollY:e=>e.scrollTop,getScrollYWindow:e=>e.scrollY,setScrollWindow:(e,t,s)=>e.scroll(t,s),setScrollX(e,t){e.scrollLeft=t},setScrollY(e,t){e.scrollTop=t}}),Object.assign(r,{height:e=>e.clientHeight,heightWindow:(e,t)=>t?e.outerHeight:e.innerHeight,width:e=>e.clientWidth,widthWindow:(e,t)=>t?e.outerWeight:e.innerWidth}),Object.assign(r,{addClass(e,...t){e.classList.add(...t)},css:t=>e.getComputedStyle(t),removeClass(e,...t){e.classList.remove(...t)},toggleClass(e,...t){e.classList.toggle(...t)},getStyle:(e,t)=>t?e.style[t]:e.style,setStyle(e,t,s,n){e.style.setProperty(t,s,n?"important":"")}}),Object.assign(r,{blur(e){e.blur()},click(e){e.click()},focus(e){e.focus()}}),Object.assign(r,{addEvent(e,t,s){e.addEventListener(t,s)},removeEvent(e,t,s){e.removeEventListener(t,s)},triggerEvent(e,t,s){const n=new Event(t);s&&Object.assign(n,s),e.dispatchEvent(n)}}),Object.assign(r,{attachShadow:(e,t=!0)=>e.attachShadow({mode:t?"open":"closed"}),clone:(e,t)=>e.cloneNode(t),create:(e,t)=>e.createElement(t),createComment:(e,t)=>e.createCommentNode(t),createFragment:e=>e.createDocumentFragment(),createRange:e=>e.createRange(),createText:(e,t)=>e.createTextNode(t)}),Object.assign(r,{removeChild(e,t){e.removeChild(t)}}),Object.assign(r,{insertBefore(e,t,s=null){e.insertBefore(t,s)}}),Object.assign(r,{findByClass:(e,t)=>t.getElementsByClassName(e),findById:(e,t)=>t.getElementById(e),findByTag:(e,t)=>t.getElementsByTagName(e),findBySelector:(e,t)=>t.querySelectorAll(e),findOneBySelector:(e,t)=>t.querySelector(e)}),Object.assign(r,{childNodes:e=>e.childNodes,children:e=>e.children,document:e=>e.document,documentElement:e=>e.documentElement,firstChild:e=>e.firstChild,fragment:e=>e.content,next:e=>e.nextSibling,offsetParent:e=>e.offsetParent,parent:e=>e.parentNode,prev:e=>e.previousSibling,scrollingElement:e=>e.scrollingElement,shadow:e=>e.shadowRoot}),Object.assign(r,{addRange(e,t){e.addRange(t)},collapse(e){e.collapse()},endContainer:e=>e.endContainer,extract:e=>e.extractContents(),getRange:(e,t=0)=>e.getRangeAt(t),getSelection:()=>e.getSelection(),insert(e,t){e.insertNode(t)},rangeCount:e=>e.rangeCount,removeRanges(e){e.removeAllRanges()},select(e,t){e.selectNode(t)},setEndAfter(e,t){e.setEndAfter(t)},setStartBefore(e,t){e.setStartBefore(t)},startContainer:e=>e.startContainer}),Object.assign(r,{contains:(e,t)=>e.contains(t),hasAttribute:(e,t)=>e.hasAttribute(t),hasChildren:e=>!!e.childElementCount,hasClass:(e,t)=>e.classList.contains(t),hasProperty:(e,t)=>e.hasOwnProperty(t),is:(e,s)=>t.isElement(e)&&e.matches(s),isConnected:e=>e.isConnected,isEqual:(e,t)=>e.isEqualNode(t),isSame:(e,t)=>e.isSameNode(t),isVisibleDocument:e=>"visible"===e.visibilityState}),Object.assign(r,{comparePosition:(e,t)=>e.compareDocumentPosition(t),normalize(e){e.normalize()}}),{DOM:n,DOMNode:r,dom:new n}});